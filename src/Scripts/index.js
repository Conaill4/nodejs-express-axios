/************************************************************************
*  Copyright 2020 Adobe
*  All Rights Reserved.
*  NOTICE: Adobe permits you to use, modify, and distribute this file in
*  accordance with the terms of the Adobe license agreement accompanying
*  it.
**************************************************************************
*/
!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequireb775;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequireb775=r),r.register("dlagQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}})),r.register("67pXD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}})),r.register("fTTag",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(Array.isArray(e))return a.default(e)};var n,a=(n=r("hPgmf"))&&n.__esModule?n:{default:n}})),r.register("hPgmf",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}})),r.register("i13wC",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}})),r.register("c0Wyi",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),r.register("fCWBB",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(!e)return;if("string"==typeof e)return a.default(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a.default(e,t)};var n,a=(n=r("hPgmf"))&&n.__esModule?n:{default:n}}));var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var i={};function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,n){t&&l(e.prototype,t);n&&l(e,n);return e};var c=r("dlagQ"),s={};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){u.default(e,t,n[t])}))}return e};var d,u=(d=r("dlagQ"))&&d.__esModule?d:{default:d};var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(e,t){if(null==e)return{};var n,a,r=m.default(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r};var m=function(e){return e&&e.__esModule?e:{default:e}}(r("67pXD"));var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e){return f.default(e)||v.default(e)||y.default(e)||g.default()};var f=b(r("fTTag")),v=b(r("i13wC")),g=b(r("c0Wyi")),y=b(r("fCWBB"));function b(e){return e&&e.__esModule?e:{default:e}}var _=Object.keys;function E(e){return"string"==typeof e}function T(e){return"number"==typeof e}function C(e){return"object"==typeof e?null!==e:w(e)}function w(e){return"function"==typeof e}function I(e,t){if(e){var n=!0,a=!1,r=void 0;try{for(var o,i=_(e)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;t(e[l],l)}}catch(e){a=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}}function O(){return Object.seal({current:null})}var x={animationIterationCount:0,borderImageOutset:0,borderImageSlice:0,borderImageWidth:0,boxFlex:0,boxFlexGroup:0,boxOrdinalGroup:0,columnCount:0,columns:0,flex:0,flexGrow:0,flexPositive:0,flexShrink:0,flexNegative:0,flexOrder:0,gridArea:0,gridRow:0,gridRowEnd:0,gridRowSpan:0,gridRowStart:0,gridColumn:0,gridColumnEnd:0,gridColumnSpan:0,gridColumnStart:0,fontWeight:0,lineClamp:0,lineHeight:0,opacity:0,order:0,orphans:0,tabSize:0,widows:0,zIndex:0,zoom:0,fillOpacity:0,floodOpacity:0,stopOpacity:0,strokeDasharray:0,strokeDashoffset:0,strokeMiterlimit:0,strokeOpacity:0,strokeWidth:0};var S=["Webkit","ms","Moz","O"];_(x).forEach((function(e){S.forEach((function(t){x[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=0}))}));var D,M=Symbol.for("jsx-dom:type");(D||(D={})).ShadowRoot="ShadowRoot";function N(e){return!(t=e,"boolean"==typeof t||null==e);var t}function A(e){return Array.isArray(e)?e.map(A).filter(Boolean).join(" "):C(e)?_(e).filter((function(t){return e[t]})).join(" "):N(e)?""+e:""}var k={animate:0,circle:0,clipPath:0,defs:0,desc:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,foreignObject:0,g:0,image:0,line:0,linearGradient:0,marker:0,mask:0,metadata:0,path:0,pattern:0,polygon:0,polyline:0,radialGradient:0,rect:0,stop:0,svg:0,switch:0,symbol:0,text:0,textPath:0,tspan:0,use:0,view:0},L=/^(a(ll|t|u)|base[FP]|c(al|lipPathU|on)|di|ed|ex|filter[RU]|g(lyphR|r)|ke|l(en|im)|ma(rker[HUW]|s)|n|pat|pr|point[^e]|re[^n]|s[puy]|st[^or]|ta|textL|vi|xC|y|z)/;var F=function(){"use strict";function t(n){e(o)(this,t),this.props=n}return e(i)(t,[{key:"render",value:function(){return null}}]),t}();function P(t,n){var a,r,o=n.children,i=e(p)(n,["children"]);if(i.namespaceURI||0!==k[t]||(i=e(s)({},i,{namespaceURI:"http://www.w3.org/2000/svg"})),E(t)){if(function(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=_(e)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;V(l,e[l],t)}}catch(e){a=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}(i,a=i.namespaceURI?document.createElementNS(i.namespaceURI,t):document.createElement(t)),H(o,a),a instanceof window.HTMLSelectElement&&null!=i.value)if(!0===i.multiple&&Array.isArray(i.value)){var l=i.value.map((function(e){return String(e)}));a.querySelectorAll("option").forEach((function(e){return e.selected=l.includes(e.value)}))}else a.value=i.value;j(i.ref,a)}else{if(!w(t))throw new TypeError("Invalid JSX element type: ".concat(t));C(t.defaultProps)&&(i=e(s)({},t.defaultProps,i)),a=(r=t.prototype)&&r.isReactComponent?function(t,n,a){return new t(n=e(s)({},n,{children:a})).render()}(t,i,o):t(e(s)({},i,{children:o}))}return a}function R(t,n){for(var a=arguments.length,r=new Array(a>2?a-2:0),o=2;o<a;o++)r[o-2]=arguments[o];var i;return(E(n)||Array.isArray(n))&&(r.unshift(n),n={}),null==(n=n||{}).children||r.length||(i=n,n=e(p)(i,["children"]),r=i.children),P(t,e(s)({},n,{children:r}),n.key)}function j(e,t){var n;C(n=e)&&"current"in n?e.current=t:w(e)&&e(t)}function H(t,n){if(function(e){return C(e)&&"number"==typeof e.length&&"number"!=typeof e.nodeType}(t))!function(t,n){var a=!0,r=!1,o=void 0;try{for(var i,l=e(h)(t)[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){H(i.value,n)}}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}}(t,n);else if(E(t)||T(t))B(document.createTextNode(t),n);else if(null===t)B(document.createComment(""),n);else if((o=t)&&"number"==typeof o.nodeType)B(t,n);else if(null!=(r=t)&&r[M]===D.ShadowRoot){var a=n.attachShadow(t.attr);H(t.children,a),j(t.ref,a)}var r,o}function B(e,t){t instanceof window.HTMLTemplateElement?t.content.appendChild(e):t.appendChild(e)}function U(e,t){return e.replace(/[A-Z\d]/g,(function(e){return t+e.toLowerCase()}))}function V(e,t,n){switch(e){case"xlinkActuate":case"xlinkArcrole":case"xlinkHref":case"xlinkRole":case"xlinkShow":case"xlinkTitle":case"xlinkType":return void q(n,"http://www.w3.org/1999/xlink",U(e,":"),t);case"xmlnsXlink":return void Y(n,U(e,":"),t);case"xmlBase":case"xmlLang":case"xmlSpace":return void q(n,"http://www.w3.org/XML/1998/namespace",U(e,":"),t)}switch(e){case"htmlFor":return void Y(n,"for",t);case"dataset":return void I(t,(function(e,t){null!=e&&(n.dataset[t]=e)}));case"innerHTML":case"innerText":case"textContent":return void(N(t)&&(n[e]=t));case"dangerouslySetInnerHTML":return void(C(t)&&(n.innerHTML=t.__html));case"value":if(null==t||n instanceof window.HTMLSelectElement)return;if(n instanceof window.HTMLTextAreaElement)return void(n.value=t);break;case"spellCheck":return void(n.spellcheck=t);case"class":case"className":return void(w(t)?t(n):Y(n,"class",A(t)));case"ref":case"namespaceURI":return;case"style":return void function e(t,n){null==n||!1===n||(Array.isArray(n)?n.forEach((function(n){return e(t,n)})):E(n)?t.setAttribute("style",n):C(n)&&I(n,(function(e,n){T(e)&&0!==x[n]?t.style[n]=e+"px":t.style[n]=e})))}(n,t)}if(w(t)){if("o"===e[0]&&"n"===e[1]){var a=e.toLowerCase();null==n[a]?n[a]=t:n.addEventListener(e,t)}}else C(t)?n[e]=t:!0===t?Y(n,e,""):!1!==t&&null!=t&&(n instanceof SVGElement&&!L.test(e)?Y(n,U(e,"-"),t):Y(n,e,t))}function Y(e,t,n){e.setAttribute(t,n)}function q(e,t,n,a){e.setAttributeNS(t,n,a)}Object.defineProperties(F.prototype,{isReactComponent:{value:!0}});var G=new Map,X=function(t){return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return function(a){var o=a.style,i=e(p)(a,["style"]),l=n.length-1,c=n.slice(0,l).reduce((function(e,t,n){return e+t+r[n](i)}),"")+n[l];return R(t,e(s)({style:[c,o]},i))}}};new Proxy((function(e){return X(e)}),{get:function(e,t){return function(e,t,n){if(e.has(t))return e.get(t);var a=n(t);return e.set(t,a),a}(G,t,(function(){return X(t)}))}});var z={Component:F,PureComponent:F,createElement:R,Fragment:function(e){var t=document.createDocumentFragment();return H(e.children,t),t},ShadowRoot:function(t){var n,a=t.children,r=t.ref,o=e(p)(t,["children","ref"]);return n={},e(c)(n,M,D.ShadowRoot),e(c)(n,"ref",r),e(c)(n,"attr",o),e(c)(n,"children",a),n}};function K(e){var t;e&&(t=e);var n=function(e){return e&&(t=e),t};return n.chain=function(e){return function(n,a){if(t)return t[e](n,a)}},n}var Q,W,Z,J,$,ee,te,ne,ae,re,oe,ie,le,ce,se,de,ue,pe,me,he,fe,ve,ge,ye,be='^((?:")?)(?:[^"])(?:[\\w\\-.!#$%&\'*+\\/=?^_`{|}~])*\\1@',_e="(?:(\\w[\\-\\w]{0,62}\\.)+(?![0-9]*$)[A-Za-z]{2,63})$",Ee="^([0]?[1-9]|[1|2][0-9]|[3][0|1])[-]([0]?[1-9]|[1][0-2])[-]([0-9]{4})$",Te="^([0][1-9]|[1|2][0-9]|[3][0|1])[-]([0][1-9]|[1][0-2])[-]([0-9]{4})[,][\\s]([0]?[1-9]|[1][0-2])[:]([0-5][0-9])[\\s]$",Ce="^([0]?[1-9]|[1][0-2])[:]([0-5][0-9])[\\s])$";(W=Q||(Q={})).LIVE_CHAT="live_chat",W.LIVE_CHAT_MESSAGE="live_chat_message",(J=Z||(Z={})).LIVE_CHAT_ENDED="Livechat ended.",J.CONNECT_FAILED="Connect Failed",(ee=$||($={})).TIMED_OUT="TIMED_OUT",ee.CLOSED_BY_VISITOR="CLOSED_BY_VISITOR",ee.CLOSED_BY_AGENT="CLOSED_BY_AGENT",(ne=te||(te={})).INITIATE_TIMEOUT="initiate_timeout",ne.INITIATE_FAILED="initiate_failed",ne.INITIATING="initiating",(re=ae||(ae={})).AGENT_PROFILE="agent_profile",re.LIVE_CHAT="livechat",re.CALENDAR_INFO="calendarInfo",re.CUSTOM="custom",re.SYSTEM="system",re.MEETING_BOOKING_RESPONSE="meeting_booking_response",re.MEETING_BOOKING_REQUEST="meeting_booking_request",re.CALENDAR_PROFILE_CARD="calendar_profile_card",re.CALENDAR_PICKER="calendar_picker",re.QUESTION="question",(ie=oe||(oe={})).AGENT="agent",ie.VISITOR="visitor",ie.SYSTEM="system",ie.SERVER="server",ie.CLIENT="client",(ce=le||(le={})).PROMPT="assisted_response_prompt",ce.VISITOR_QUESTION="assisted_response_question",ce.GENAI_ANSWER="assisted_response_answer",ce.VISITOR_FEEDBACK="assisted_response_feedback",ce.END="assisted_response_end",ce.AFFIRMATION_QUESTION="assisted_response_affirmation_question",ce.AFFIRMATION_QUESTIONS="assisted_response_affirmations_list",ce.AFFIRMATION_CHOICE="assisted_response_affirmation_choice",ce.NUDGE_CHOICE="assisted_response_nudge_choice",ce.RELATED_LINKS="assisted_response_related_links",ce.NUDGE_QUESTION="nudge_question",ce.NUDGE_QUESTION_CHOICES="nudge_question_choices",(de=se||(se={})).LC_201="lc_201",de.LC_202="lc_202",de.LC_203="lc_203",de.LC_204="lc_204",de.LC_205="lc_205",de.LC_206="lc_206",de.LC_207="lc_207",de.LC_208="lc_208",de.LC_209="lc_209",de.LC_210="lc_210",(pe=ue||(ue={})).EMAIL_REQUEST="meeting_email_request",pe.EMAIL_RESPONSE="meeting_email_response",pe.BOOKING_RESPONSE="meeting_booking_response",pe.BOOKING_REQUEST="meeting_booking_request",pe.CALENDAR_GET="calendar_get",pe.CALENDAR_INFO="calendar_info",(he=me||(me={})).UNAVAILABLE_SLOT="UnavailableSlot",he.NO_SLOTS_AVAILABLE="NoSlotsAvailable",(ve=fe||(fe={})).LIVESTREAM="liveStream",ve.DIALOG="dialog",(ye=ge||(ge={})).CHATBOT="chatbot",ye.INLINE="inline",ye.POPUP="popup";var we,Ie,Oe=2e3,xe={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},Se="https://assets.adoberesources.net/calendar_default.svg",De={CLIENT:"client",SERVER:"server",UNFORMATTED:"unformatted"};(Ie=we||(we={})).CONVERSATIONAL_FORMS_CLOSE="adobedx.conversationalforms.close",Ie.CONVERSATION_CLOSE="adobedx.conversations.close",Ie.CONVERSATION_READY="adobedx.conversations.ready",Ie.CONVERSATION_FAILED="adobedx.conversations.failed",Ie.CONVERSATION_TRIGGERED="adobedx.conversations.triggered",Ie.CONVERSATION_ENGAGED="adobedx.conversations.engaged",Ie.CONVERSATION_COMPLETED="adobedx.conversations.completed",Ie.CONVERSATION_CLOSED="adobedx.conversations.closed",Ie.CONVERSATION_MEETING_REQUESTED="adobedx.conversations.meeting.requested",Ie.CONVERSATION_MEETING_BOOKED="adobedx.conversations.meeting.booked",Ie.CONVERSATION_INPUT_PHONE="adobedx.conversations.input.phone",Ie.CONVERSATION_INPUT_EMAIL="adobedx.conversations.input.email",Ie.CONVERSATION_LIVE_CHAT_REQUESTED="adobedx.conversations.live_chat.requested",Ie.CONVERSATION_LIVE_CHAT_INITIATED="adobedx.conversations.live_chat.initiated",Ie.CONVERSATION_LIVE_CHAT_ENDED="adobedx.conversations.live_chat.ended",Ie.CONVERSATION_LIVE_CHAT_REQUEST_TIMEOUT="adobedx.conversations.live_chat.timeout";function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ae,ke=(Ae=function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Me(Object(a),!0).forEach((function(t){Ne(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({},{}),{setState:function(e){Object.assign(Ae,e)},getState:function(){return Ae}});function Le(e){var t=ke.getState(),n=e.id,a=e.style,r=e.content,o=e.messageType,i=void 0===o?"default":o,l={hb_chat_client:a===De.CLIENT,hb_chat_server:a===De.SERVER,hb_chat_unformatted:a===De.UNFORMATTED},c=a===De.CLIENT?null==t?void 0:t.AT_VISITOR_SPEECH:null==t?void 0:t.AT_BOT_SPEECH;return z.createElement("div",{id:n,"data-msg-type":i||"default",class:l,"aria-live":"polite","aria-roledescription":"message"},z.createElement("div",{class:"hb_conversation_starter"},c),r)}var Fe=!1;function Pe(e){var t=O(),n=O(),a=O(),r=O(),o=O(),i=ke.getState();return e.mutators({showButton:function(t){var n=a.current.getAttribute("position")||"RIGHT";a.current.className=Re({show:t,position:n}),o.current.onclick=e.onClick,t&&(Fe?a.current.classList.remove("hb_chatbutton_wrap_animate"):(a.current.classList.add("hb_chatbutton_wrap_animate"),Fe=!0))},showCallout:function(r){var o=a.current.getAttribute("position")||"RIGHT";t.current.className=je({show:r,position:o}),n.current.className=He({show:r,position:o}),t.current.onclick=e.onClick,n.current.onclick=e.onCalloutClose},calloutText:function(e){t.current.textContent="",t.current.innerHTML=e},setCalloutContent:function(e){t.current.textContent="",t.current.appendChild(e)},badgeText:function(e){r.current.innerHTML=e.toString()},showBadge:function(e){var t=a.current.getAttribute("position")||"RIGHT";r.current.className=Be({show:e,position:t})},onButtonAction:function(e){o&&o.current&&(o.current.firstChild.ariaExpanded="".concat(e))}}),z.createElement("div",{class:Re({show:!1,position:e.position}),ref:a},z.createElement("div",{class:He({show:!1,position:e.position}),ref:n},z.createElement("button",{class:"hb_callout_close_btn","aria-label":i?i.TEXT_ACCESSIBILITY_POKE_CLOSE:""})),z.createElement("div",{class:je({show:!1,position:e.position}),ref:t}),z.createElement("div",{class:"hb_button_wrapper",ref:o},z.createElement("button",{class:"hb_button","aria-label":i?i.TEXT_ACCESSIBILITY_CHAT_BUTTON_OPEN:"","aria-haspopup":"dialog","aria-expanded":!1},z.createElement("div",{class:"hb_chat_button_svg"})),z.createElement("span",{class:Be({show:!1,position:e.position}),ref:r})))}function Re(e){var t=e.show,n=e.position;return A({hb_chatbutton_wrap:!0,hb_chatbutton_wrap_right:"RIGHT"===n,hb_chatbutton_wrap_left:"LEFT"===n,hb_chatbutton_hide:!t,hb_chatbutton_show:t})}function je(e){var t=e.show,n=e.position;return A({hb_callout:!0,hb_callout_right:"RIGHT"===n,hb_callout_left:"LEFT"===n,hb_callout_hide:!t,hb_callout_show:t})}function He(e){var t=e.show,n=e.position;return A({hb_callout:!0,hb_callout_close_right:"RIGHT"===n,hb_callout_close_left:"LEFT"===n,hb_callout_close_show:t,hb_callout_click_area:!0})}function Be(e){var t=e.show,n=e.position;return A({hb_badge:!0,hb_badge_show:t,hb_badge_right:"RIGHT"===n,hb_badge_left:"LEFT"===n})}var Ue=O();function Ve(e){var t,n,a=e.botName,r=e.botAvatarClassName,o=e.headerAvatarFill,i=e.onClose,l=e.mutators,c=O(),s=O(),d=O(),u=ke.getState(),p=[0,0,0];o&&(p=(n=null==(t=o)?void 0:t.match(/[A-Za-z0-9]{2}/g))?n.map((function(e){return parseInt(e,16)})):[]),l({toggleEndLiveSessionBtn:function(e){e?null==c||c.current.classList.remove("hb_hide_element"):null==c||c.current.classList.add("hb_hide_element")},toggleHeaderMenuBtn:function(e){var t,n;e?null===(t=d.current)||void 0===t||t.classList.remove("hb_hide_element"):null===(n=d.current)||void 0===n||n.classList.add("hb_hide_element")}});return z.createElement("div",{class:"hb_chatheader",ref:s},z.createElement("div",{className:"bot_avatar2"},z.createElement("div",{ref:Ue,className:r})),z.createElement("div",{class:"hb_botname"},z.createElement("b",{role:"heading","aria-level":1,id:a},a)),z.createElement("nav",{"aria-label":null==u?void 0:u.TEXT_ACCESSIBILITY_CHAT_HEADER_NAVIGATION},z.createElement("ul",{class:"hb_chat_header_nav"},z.createElement("li",{class:"hb_chat_header_nav_item hb_hide_element",ref:d},z.createElement("button",{"data-testid":"hb_allchats",class:"hb_nav_btn hb_filter hb_all_chats",onClick:function(){e.toggleAllChatSessions()},"aria-label":u?u.TEXT_ACCESSIBILITY_SEE_ALL_CHATS:"See all chat sessions"})),i&&z.createElement("li",{class:"hb_chat_header_nav_item hb_hide_element hb_desktop",ref:c},z.createElement("button",{"data-testid":"hb_close",class:"hb_nav_btn hb_filter hb_minimize",onClick:i,"aria-label":u?u.TEXT_ACCESSIBILITY_CHAT_WINDOW_CLOSE:"Minimize chatbot"})),i&&z.createElement("li",{class:"hb_chat_header_nav_item hb_mobile"},z.createElement("button",{"data-testid":"hb_close_mb",class:"hb_nav_btn hb_filter hb_minimize",onClick:i,"aria-label":u?u.TEXT_ACCESSIBILITY_CHAT_WINDOW_CLOSE:"Minimize chatbot"})))),z.createElement("svg",{height:"0px",width:"0px",style:"display:none;"},z.createElement("defs",null,z.createElement("filter",{id:"hb-chat-color-filter",colorInterpolationFilters:"sRGB"},z.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 ".concat(p[0]/255," 0 0 0 0 ").concat((p[1],p[1]/255)," 0 0 0 0 ").concat(p[2]/255," 0 0 0 1 0")})))))}var Ye=function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=document.createElement("div");return n.innerHTML=t.body.innerHTML,n},qe=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(a,r){if(document.getElementById(t))a(!0);else{var o=document.createElement("script");o.async=n,o.addEventListener("load",a),o.addEventListener("error",r),o.src=e,o.id=t,document.head.before(o)}}))},Ge=function(e){var t=(new Date).toLocaleDateString("en-US"),n=e?new Date(e):new Date(t);return n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),n},Xe=function(e){return e&&-1!==e.indexOf("_")?e.split("_").join("-"):e},ze=function(e,t,n){try{var a=e,r="en-US"===(n=Xe(n)||"en-US")?"long":"longGeneric",o=a.toLocaleString("en-US",{timeZoneName:"shortOffset"}).split(" "),i=o.length>0?o[o.length-1]:"",l=-1!==i.indexOf("-")?"UTC-".concat(i.split("-")[1]):"UTC+".concat(i.split("+")[1]),c=a.toLocaleString(n,{timeZoneName:r}),s=-1!==c.indexOf("AM")?c.indexOf("AM"):c.indexOf("PM"),d=-1!==s?c.substring(s+2,c.length):function(e,t){return e.split(" ").reduce((function(e,n){return n===(null==t?void 0:t.TEXT_ANTE_MERIDIEM)||n.substring(0,2)===(null==t?void 0:t.TEXT_ANTE_MERIDIEM)||n===(null==t?void 0:t.TEXT_POST_MERIDIEM)||n.substring(0,2)===(null==t?void 0:t.TEXT_POST_MERIDIEM)||parseInt(n.substring(0,2),10)>0&&parseInt(n.substring(0,2),10)<24?e:"".concat(e," ").concat(n)}),"")}(c,t),u=-1!==s?d.match(/\b(\w)/g):[d];return{timezone:u?u.join(""):"",offset:l}}catch(e){return{timezone:"",offset:""}}},Ke=function(e){try{var t=-1!==e.indexOf(",")?e.split(","):[e],n=t&&t.length>0?t[0].trim().split("-"):"",a=n&&n.length>0?"".concat(n[2],"-").concat(n[1],"-").concat(n[0]):t[0],r=t&&t.length>1?t[1].trim().split(" ")[0]:"";if(r){r=(r=t&&t.length>1&&-1!==t[1].indexOf("PM")?"".concat(parseInt(r.split(":")[0],10)%12+12,":").concat(r.split(":")[1]):"".concat(parseInt(r.split(":")[0],10)%12,":").concat(r.split(":")[1]))&&1===r.indexOf(":")?"0".concat(r):r;var o=Ge(),i=ze(o).offset,l=i&&i.length>3?i.substring(3):"+00:00",c=l?l.substring(0,1):"",s=l&&-1!==l.indexOf(":")?l.substring(1):"".concat(l.substring(1),":00");return"".concat(a).concat(r?"T".concat(r,":00").concat(c).concat(1===s.indexOf(":")?"0".concat(s):s):"")}return a}catch(e){return console.log(e),""}},Qe=function(e,t){var n="(".concat(t.TEXT_ANTE_MERIDIEM,"|").concat(t.TEXT_POST_MERIDIEM,")");return e.substring(0,e.length-1)+n+e.substring(e.length-1)},We=function(e){if(!e)return document.createElement("div");var t=document.createElement("div");t.innerHTML=e;for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n},Ze=function(e,t){return!e||(e===fe.LIVESTREAM&&t&&t.type===ge.CHATBOT||e===fe.DIALOG)};function Je(){var e=localStorage.getItem("hb_actions");if(e)try{var t=JSON.parse(e);return t.sort((function(e,t){return new Date(t.ts).getTime()-new Date(e.ts).getTime()})),t.filter((function(e){return e.uiType===ge.CHATBOT&&!e.end})).map((function(e){return function(e){return{sid:e.sid,pbId:e.pbId,open:JSON.parse(e.open),engage:JSON.parse(e.engage),ts:e.ts,lsId:e.lsId,uiType:e.uiType,msg_read:e.msg_read&&"string"==typeof e.msg_read?JSON.parse(e.msg_read):e.msg_read,avatar:e.avatar,end:e.end,hasAgent:e.hasAgent}}(e)}))}catch(e){console.log("unable to get active chat sessions while parsing"),console.log(e)}}function $e(e){var t,n,a;if(!e.actions)return z.createElement("div",null);return z.createElement("div",{class:"hb_allchats"},z.createElement("div",{class:"hb_allchats_body"},0===(null===(t=e.actions)||void 0===t?void 0:t.length)&&z.createElement("div",{class:"hb_allchats_empty"},(null===(n=e.localeText)||void 0===n?void 0:n.TEXT_NO_CHATS)||"No chats available"),null===(a=null==e?void 0:e.actions)||void 0===a?void 0:a.map((function(t){var n=function(t){var n,a=new Date(t.ts),r=a.toLocaleTimeString(),o=t.msg_read?null===(n=t.msg_read.payload)||void 0===n?void 0:n.text:"",i=t.msg_read?t.msg_read.sender:"";return{text:o,time:r,timezone:ze(a,e.localeText,"en-US").timezone,localDate:"".concat(a.getDate()>9?a.getDate():"0".concat(a.getDate()),"/").concat(a.getMonth()+1>9?a.getMonth()+1:"0".concat(a.getMonth()+1),"/").concat(a.getFullYear()),sender:i}}(t),a=n.text,r=n.time,o=n.timezone,i=n.localDate,l=n.sender;return z.createElement(et,{avatar:t.avatar,text:a,date:i,time:"".concat(r," ").concat(o),selectChat:function(){return e.onClick(t)},sender:l,active:!t.end,localeText:e.localeText})}))))}function et(e){var t,n=(null==e?void 0:e.avatar)?"hb_allchats_avatar bot_agent_avatar":"hb_allchats_avatar";return z.createElement("div",{class:"hb_allchats_card",onClick:e.selectChat},e.active&&z.createElement("div",{class:"hb_card_active"}),z.createElement("div",{className:n},e.avatar?z.createElement("img",{width:"35",height:"35",alt:null===(t=null==e?void 0:e.localeText)||void 0===t?void 0:t.TEXT_ALT_MESSAGE_AVATAR,src:e.avatar}):z.createElement("div",{className:"bot_2"})),(null==e?void 0:e.sender)===oe.VISITOR&&z.createElement("div",{class:"hb_allchats_reply"},z.createElement("span",{class:"icon"})),z.createElement("div",{class:"hb_allchats_text_container"},Ye("<p>".concat(e.text,"</p>")),z.createElement("p",{class:"hb_allchats_text_date"},e.date," ",e.time)))}function tt(e){var t=e.classNames,n=e.clickFn,a=e.keyDownFn,r=e.buttonRef,o=e.children,i=e.text,l=e.type,c=e.icon,s=e.ariaLabel;return z.createElement("button",{className:t,onClick:n,onKeyDown:function(e){return a?a(e):""},"data-type":l,ref:r,type:"button",disabled:e.disabled,"aria-label":s},o||"",z.createElement("span",{className:c&&"txt"},i||""),c&&z.createElement("span",{className:c}))}function nt(e){var t=e.mutators,n=e.onHide,a=e.onConfirm,r=O(),o=e.localeText,i=e.message,l=e.pHtml;function c(){return z.createElement("div",{class:"hb_session_terminate_error"},z.createElement("img",{src:"https://assets.adoberesources.net/svg/Smock_Alert_18_N.svg",alt:o?o.ERROR_ALERT_ICON:"Alert Icon"}),z.createElement(z.Fragment,null,o.SESSION_TERMINATION_ERROR))}return t({showError:function(){var e,t,n,a,o,i=null===(n=null===(t=null===(e=r.current)||void 0===e?void 0:e.querySelector(".hb_session_headline"))||void 0===t?void 0:t.children)||void 0===n?void 0:n[0];i&&(null===(o=null===(a=r.current)||void 0===a?void 0:a.querySelector(".hb_session_headline"))||void 0===o||o.replaceChild(z.createElement(c,null),i))}}),z.createElement("div",{class:"hb_session_terminate_modal",ref:r},z.createElement("div",{class:"hb_session_headline"},z.createElement("div",{class:"hb_session_terminate_message"},z.createElement("p",{innerHTML:l},i))),z.createElement("div",{class:"hb_session_terminate_bottom hb_flex_center"},n&&z.createElement(tt,{classNames:["hb_btn_session_terminate","hb-btn-cancel"],clickFn:n,text:o.BUTTON_CANCEL_TEXT}),a&&z.createElement(tt,{classNames:["hb_btn_session_terminate","hb-btn-confirm"],clickFn:a,text:o.END_SESSION_BUTTON_TEXT})))}function at(e){var t=e.id,n=e.localeText;return z.createElement("div",{className:"hb_connection_indicator","data-msg-type":"hb_connection_indicator",id:t},z.createElement("div",{className:"spinner",title:"loader"}),n&&z.createElement("div",{className:"message","aria-live":"polite"},n.TEXT_CONNECTING_TO_TEAM_MEMBER))}var rt=z.createElement("svg",{width:"40",height:"40",viewBox:"8 2 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},z.createElement("circle",{cx:"20",cy:"20",r:"20"}),z.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5903 23.4232C19.7108 23.4729 19.8386 23.4951 19.9669 23.4991C19.9785 23.4995 19.9883 23.5059 20 23.5059C20.0117 23.5059 20.0214 23.4996 20.033 23.4992C20.1614 23.4952 20.2893 23.4728 20.4098 23.4231C20.5414 23.3686 20.6603 23.29 20.7594 23.1908L26.7461 17.2051C27.1641 16.7852 27.1641 16.1074 26.7461 15.6875C26.3271 15.2685 25.6475 15.2685 25.2285 15.6875L21.0732 19.8421L21.0732 7.06299C21.0732 6.47022 20.5928 5.98975 20 5.98975C19.4072 5.98975 18.9268 6.47022 18.9268 7.06299L18.9268 19.8421L14.7715 15.6875C14.3525 15.2685 13.6729 15.2685 13.2539 15.6875C13.044 15.8975 12.9395 16.1719 12.9395 16.4463C12.9395 16.7207 13.0449 16.9951 13.2539 17.2051L19.2406 23.1908C19.3397 23.29 19.4586 23.3687 19.5903 23.4232Z",fill:"#222222"}));function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lt,ct=[le.RELATED_LINKS,le.AFFIRMATION_QUESTIONS,le.NUDGE_QUESTION,le.NUDGE_QUESTION_CHOICES,ae.CALENDAR_PICKER];function st(e){var t,n,a=e.children,r=e.mutators,o=e.onClose,i=e.botName,l=e.onHideEndSession,c=e.onSessionTerminate,s=O(),d=O(),u=O(),p=O(),m=K(),h=function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?ot(Object(a),!0).forEach((function(t){it(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({privacyTextShown:!1},e.options),f=function(){var e;null===(e=m())||void 0===e||e.showError()},v=function(t){var n,a;null===(n=e.onRestoreExistingChat)||void 0===n||n.call(e,t),null===(a=e.toggleAllChatSessions)||void 0===a||a.call(e)},g=function(){var t,n;null===(t=e.onSendNewMessage)||void 0===t||t.call(e),null===(n=e.toggleAllChatSessions)||void 0===n||n.call(e)},y=function(){var e,t,n=s.current.querySelector(".hb_arrow_indicator");if(e=d.current.scrollHeight-d.current.scrollTop-d.current.clientHeight<20,t=s.current.scrollHeight>d.current.clientHeight,!e&&t){if(!n){var a=document.createElement("div");a.className="hb_arrow_indicator",a.innerHTML=rt.outerHTML,a.onclick=function(){d.current.scrollTop=d.current.scrollHeight},s.current.appendChild(a)}}else n&&n.remove()},b=function(){n&&clearTimeout(n),n=setTimeout((function(){s.current&&d.current&&y()}),100)};return setTimeout((function(){var e;s.current&&new MutationObserver(b).observe(s.current,{childList:!0}),null===(e=d.current)||void 0===e||e.addEventListener("scroll",b)}),0),r({addElem:function(e){var t,n=ct.includes(e.getAttribute("data-msg-type"));if(null===(t=s.current)||void 0===t||t.appendChild(e),!n&&(null==e?void 0:e.scrollIntoView)&&setTimeout((function(){e.scrollIntoView()}),0),window.innerHeight>120){var a=e.getElementsByClassName("hb_input");if(a&&0===a.length&&(a=e.getElementsByClassName("hb_picker_input")),a&&0===a.length&&(a=e.getElementsByClassName("hb_choice")),a&&a.length>0)a[0].focus({preventScroll:n})}b()},getElem:function(e){var t;return null===(t=s.current)||void 0===t?void 0:t.querySelector("#".concat(e))},removeElem:function(e){var t,n,a,r=null===(t=s.current)||void 0===t?void 0:t.querySelector("#".concat(e));if(r){var o=null!==(a=null===(n=d.current)||void 0===n?void 0:n.scrollTop)&&void 0!==a?a:0;r.remove(),d.current&&(d.current.scrollTop=o)}},clear:function(){var e=s.current;if(e)for(;e.firstChild;)e.firstChild.remove()},resizeChatBody:function(e){if(h&&h.privacyTextShown){var t="";d.current.classList.contains("hb_has_privacy")?t="hb_chatinputbox_with_privacy":e?t="hb_chatinputbox":["hb_chatinputbox","hb_chatinputbox_without_privacy"].forEach((function(e){d.current.classList.remove(e)})),t&&d.current.classList.toggle(t,!1),t&&d.current.classList.add(t)}else h&&!h.privacyUrl?(d.current.classList.toggle("hb_chatinputbox_without_privacy",e),d.current.classList.toggle("hb_without_chatinputbox_without_privacy",!e)):d.current.classList.toggle("hb_chatinputbox",e)},toggleEndSession:function(e){e?u.current.classList.remove("hb_hide_element"):u.current.classList.add("hb_hide_element")},toggleAllChatSessions:function(){var t;p.current.classList.toggle("hb_hide_element"),p.current.classList.contains("hb_hide_element")||(p.current.innerHTML="",p.current.appendChild(z.createElement($e,{actions:Je(),onClick:v,localeText:e.localeText,onButtonClick:g})),null===(t=e.toggleEndSession)||void 0===t||t.call(e,!1))},toggleChatbodyLoader:function(e){var t=d.current.querySelector(".hb_chatbody_loader");t&&(e?t.classList.remove("hb_hide_element"):t.classList.add("hb_hide_element"))}}),z.createElement("div",{ref:d,class:"hb_chatbody ".concat(h.privacyTextShown&&"hb_has_privacy"," ").concat(!h.privacyUrl&&"hb_without_chatinputbox_without_privacy")},z.createElement("div",{ref:p,class:"hb_hide_element","data-testid":"allchats"},z.createElement($e,{actions:Je(),onClick:v,localeText:e.localeText})),z.createElement("div",{ref:u,class:"hb_hide_element","data-testid":"sessionTerminate"},z.createElement(nt,{mutators:m,onHide:l,onConfirm:function(){null==c||c(l,f)},localeText:e.localeText,message:null===(t=e.localeText)||void 0===t?void 0:t.SESSION_TERMINATION_MESSAGE})),z.createElement("div",{class:"hb_chatbody_loader hb_hide_element"},z.createElement(at,{id:"connection-loader"}),z.createElement("div",{class:"spinner"})),z.createElement("div",{class:"hb_chatbody_inner",ref:s,role:"region","aria-labelledby":i,onKeyDown:function(e){e.code&&e.code.toLowerCase().includes("escape")&&(null==o||o())},"data-testid":"innerChatBody"}),a)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e){var t=e.onTextInputChange,n=e.onTextInputComplete,a=e.mutators,r=e.policyUrl,o=e.localeText,i=O(),l=O(),c=O(),s=O(),d=0,u=function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?dt(Object(a),!0).forEach((function(t){ut(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):dt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({privacyTextShown:!1},e.options),p=function(){s.current.style.height="auto",s.current.style.height=s.current.scrollHeight+d+"px"},m=function(){var e,t=s.current.value.trim()||"";0!==(null==t?void 0:t.length)&&(t&&t.length<=Oe&&n?(l.current.classList.toggle("showError",!1),lt&&lt.type===le.VISITOR_QUESTION&&lt.payload&&(lt.payload.inputVal=t),lt&&lt.type===Q.LIVE_CHAT_MESSAGE&&lt.payload&&(lt.payload.content=t),n(lt),null===(e=a())||void 0===e||e.setTextValue(""),p()):l.current.classList.toggle("showError",!0))};return a({setTextValue:function(e){s.current.value=e},showTextInput:function(e){s.current.classList.toggle("show",e),c.current.classList.toggle("show",e),e&&s.current.focus({preventScroll:!0}),d=s.current.offsetHeight-s.current.clientHeight},disableTextInput:function(e){s.current.disabled=e,c.current.disabled=e,c.current.classList.toggle("disable",e)},setTextResponsePayload:function(e){lt=e}}),z.createElement("div",{class:"hb_chat_textinput ".concat(u.privacyTextShown&&"hb_has_privacy_with_textinput"," ").concat(!u.privacyTextShown&&!r&&"hb_textinput_without_privacy"),ref:i},z.createElement("div",{class:"hb_chat_textinput_box_container"},z.createElement("textarea",{rows:1,ref:s,maxLength:Oe,onInput:p,onChange:function(){var e=s.current.value||"";t&&e.length<=Oe&&t(e)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),m())},placeholder:o.LABEL_ADD_MESSAGE,className:"hb_chat_textinput_box"}),z.createElement("button",{ref:c,className:"hb_chat_send_button",onClick:m,"aria-label":o?o.TEXT_ACCESSIBILITY_SEND_BUTTON:""},z.createElement("div",{class:"hb_input_button_wrap"},z.createElement("span",{class:"hb_input_button_icon"})," ",z.createElement("span",null,o.BUTTON_SEND_TEXT)))),z.createElement("div",{class:"hb_chat_textinput_error",ref:l},z.createElement("span",{class:"hb_input_alert hb_input_alert_color"})," ",o.ERROR_MESSAGE_FAILED),r&&z.createElement("div",{className:"hb_chat_textinput_footer ".concat(!u.privacyTextShown&&"show")},z.createElement("div",{className:"hb_policy_url_view"},z.createElement("a",{href:r,target:"_blank"},o.TEXT_PRIVACY_POLICY))))}var mt=["adobezero","adobestaging"];function ht(e){var t=e.mutators,n=e.onTextInputChange,a=e.onTextInputComplete,r=e.botName,o=e.botAvatarClassName,i=e.onClose,l=e.policyUrl,c=e.headerAvatarFill,s=e.localeText,d=e.instanceId,u=e.onSessionTerminate,p=K(),m=K(),h=K(),f=O(),v=localStorage.getItem("hb_sessionId")||"",g=function(){return!!(l&&mt.includes(d||"")&&s.TEXT_PRIVACY_ZERO)&&!JSON.parse(localStorage.getItem("hb_privacy_zero")||"{}")[v]},y={privacyTextShown:g(),privacyUrl:l};t({addElem:p.chain("addElem"),getElem:p.chain("getElem"),removeElem:p.chain("removeElem"),clear:p.chain("clear"),setTextValue:h.chain("setTextValue"),showTextInput:h.chain("showTextInput"),disableTextInput:h.chain("disableTextInput"),setTextResponsePayload:h.chain("setTextResponsePayload"),resizeChatBody:p.chain("resizeChatBody"),showChatFrame:function(e){var t,n;e?(null===(t=f.current)||void 0===t?void 0:t.classList.contains("hb_shown"))||f.current.classList.add("hb_shown"):null===(n=f.current)||void 0===n||n.classList.remove("hb_shown")},toggleEndLiveSessionBtn:m.chain("toggleEndLiveSessionBtn"),onHideEndSession:function(){var e,t;null===(t=null===(e=p())||void 0===e?void 0:e.toggleEndSession)||void 0===t||t.call(e,!1)},toggleHeaderMenuBtn:m.chain("toggleHeaderMenuBtn"),toggleChatbodyLoader:p.chain("toggleChatbodyLoader")});var b=function(e){var t,n,a,r,o,i,l;e.preventDefault(),(l=JSON.parse(localStorage.getItem("hb_privacy_zero")||"{}"))&&(Object.keys(l).forEach((function(e){new Date(l[e])<new Date&&delete l[e]})),localStorage.setItem("hb_privacy_zero",JSON.stringify(l)));var c=JSON.parse(localStorage.getItem("hb_privacy_zero")||"{}"),s=new Date;s.setDate(s.getDate()+7),c[v]=s.toISOString(),localStorage.setItem("hb_privacy_zero",JSON.stringify(c)),null===(n=null===(t=e.target)||void 0===t?void 0:t.parentNode)||void 0===n||n.remove(),null===(a=f.current.querySelector(".hb_has_privacy"))||void 0===a||a.classList.remove("hb_has_privacy"),null===(r=f.current.querySelector(".hb_has_privacy_with_textinput"))||void 0===r||r.classList.remove("hb_has_privacy_with_textinput"),null===(o=f.current.querySelector(".hb_chatinputbox_with_privacy"))||void 0===o||o.classList.replace("hb_chatinputbox_with_privacy","hb_chatinputbox"),null===(i=f.current.querySelector(".hb_chat_textinput_footer"))||void 0===i||i.classList.add("show")},_=function(){var e,t;null===(t=null===(e=p())||void 0===e?void 0:e.toggleAllChatSessions)||void 0===t||t.call(e)};return z.createElement("div",{ref:f,class:"hb_chat hb_chat_right"},z.createElement(Ve,{botName:r,botAvatarClassName:o,mutators:m,onClose:i,headerAvatarFill:c,showEndSessionPopup:function(){var e,t;null===(t=null===(e=p())||void 0===e?void 0:e.toggleEndSession)||void 0===t||t.call(e,!0)},toggleAllChatSessions:_}),z.createElement(st,{mutators:p,options:y,onClose:i,botName:r,onHideEndSession:function(){var e,t;null===(t=null===(e=p())||void 0===e?void 0:e.toggleEndSession)||void 0===t||t.call(e,!1)},onSessionTerminate:u,onRestoreExistingChat:e.onRestoreExistingChat,onSendNewMessage:e.onSendNewMessage,toggleAllChatSessions:_,toggleEndSession:function(){var e,t;null===(t=null===(e=m())||void 0===e?void 0:e.toggleEndLiveSessionBtn)||void 0===t||t.call(e,!1)},localeText:s}),z.createElement(pt,{mutators:h,onTextInputChange:n,onTextInputComplete:a,policyUrl:l,localeText:s,options:y}),function(){if(!g())return"";return z.createElement("div",{className:"hb_policy_zero",innerHTML:s.TEXT_PRIVACY_ZERO.replace(/{{(.+)}}/,'<a href="'.concat(l,'" target="_blank">$1</a>'))},z.createElement("button",{class:"close_privacy",onClick:b},"×"))}())}function ft(e){var t=e.id;return z.createElement("div",{className:"hb_chat_loader","data-msg-type":"hb_chat_loader",id:t},z.createElement("div",{className:"bot_2_avatar"},z.createElement("div",{className:"bot_2"})),z.createElement("div",{className:"hb-msg-loading"},z.createElement("span",null),z.createElement("span",null),z.createElement("span",null)))}function vt(e){var t=e.id,n=e.displayText,a=We(void 0===n?"":n);return z.createElement("div",{className:"hb_chat_connected",id:t,"data-msg-type":"hb_status_separator"},z.createElement("span",{className:"hb_chat_connected_text","aria-live":"polite"},a))}function gt(e){var t=e.styles,n=t&&t.length>0?z.createElement(z.Fragment,null,t.map((function(e){return z.createElement("style",null,e)}))):z.createElement(z.Fragment,null);return e.mutators({addStyle:function(e){n.appendChild(z.createElement("style",null,e))}}),n}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e){var t=e.mutators,n=e.root.shadowRoot?e.root.shadowRoot:e.root.attachShadow({mode:"open"}),a=K(),r=K(),o=K(),i=O();return ke.setState(e.localeText||{}),t({addToChatFrame:function(e){var t;null===(t=a())||void 0===t||t.addElem(z.createElement(Le,function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?yt(Object(a),!0).forEach((function(t){bt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):yt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({},e)))},getFromChatFrame:function(e){var t;return null===(t=a())||void 0===t?void 0:t.getElem(e)},loadStyles:function(e){},addCustomStyle:function(e,t){i.current&&i.current.style.setProperty(e,t)},addBotPosition:function(e){if("LEFT"===e){var t=i.current.getElementsByClassName("hb_chat")[0];t&&t.classList.replace("hb_chat_right","hb_chat_left");var n=i.current.querySelector(".hb_chatbutton_wrap");n&&n.setAttribute("position",e)}else{var a=i.current.getElementsByClassName("hb_chat")[0];a&&a.classList.replace("hb_chat_left","hb_chat_right");var r=i.current.querySelector(".hb_chatbutton_wrap");r&&r.setAttribute("position","RIGHT")}},clearChatFrame:a.chain("clear"),removeFromChatFrame:a.chain("removeElem"),renderWaitingUi:function(e,t){var n;null===(n=a())||void 0===n||n.addElem(z.createElement(ft,{id:e}))},renderConnectingUi:function(t){var n;null===(n=a())||void 0===n||n.addElem(z.createElement(at,{id:t,localeText:e.localeText?e.localeText:{}}))},renderStatusSeparatorUi:function(e,t){var n;null===(n=a())||void 0===n||n.addElem(z.createElement(vt,{id:e,displayText:t}))},showTextInput:a.chain("showTextInput"),disableTextInput:a.chain("disableTextInput"),resizeChatBody:a.chain("resizeChatBody"),showButtonCallout:r.chain("showCallout"),calloutText:r.chain("calloutText"),showButton:r.chain("showButton"),showChatFrame:a.chain("showChatFrame"),addStyle:o.chain("addStyle"),badgeText:r.chain("badgeText"),showBadge:r.chain("showBadge"),setTextValue:a.chain("setTextValue"),setTextResponsePayload:a.chain("setTextResponsePayload"),onButtonAction:r.chain("onButtonAction"),toggleEndLiveSessionBtn:a.chain("toggleEndLiveSessionBtn"),onHideEndSession:a.chain("onHideEndSession"),toggleHeaderMenuBtn:a.chain("toggleHeaderMenuBtn"),toggleChatbodyLoader:a.chain("toggleChatbodyLoader")}),n.appendChild(z.createElement("div",{ref:i,class:"hb_shadow_root"},z.createElement(gt,{styles:e.styles,mutators:o}),z.createElement(ht,{botName:e.agentName,botAvatarClassName:e.avatar,policyUrl:e.privacyPolicyUrl,hasCloseButton:e.hasCloseButton,onClose:e.onClose,mutators:a,onTextInputChange:e.onTextInputChange,onTextInputComplete:e.onTextInputComplete,headerAvatarFill:e.colourSettings?e.colourSettings.headerAvatarFill:"",localeText:e.localeText?e.localeText:{},locale:e.locale,instanceId:e.instanceId,onSessionTerminate:e.onSessionTerminate,onRestoreExistingChat:e.onRestoreExistingChat,onSendNewMessage:e.onSendNewMessage}),z.createElement(Pe,{mutators:r,text:e.buttonText,onClick:e.onButtonClick,onCalloutClose:e.onCalloutClose,avatarType:e.avatarType,showDefaultAvatar:!e.isChatMatchCustomAvatar}))),e.root}function Et(e){return z.createElement("div",{class:"hb_cf_header"},z.createElement("div",{class:"hb_cf_title"}),z.createElement("hr",{class:"hb_ch_header_hr"}),"inline"!==e.type&&z.createElement("div",{className:"hb_ls_close",onClick:e.onClose}))}function Tt(e){var t=e.children,n=e.mutators,a=O();return n({addElem:function(e){var t;null===(t=a.current)||void 0===t||t.appendChild(e)},getElem:function(e){var t;return null===(t=a.current)||void 0===t?void 0:t.querySelector("#".concat(e))},removeElem:function(e){var t,n;null===(n=null===(t=a.current)||void 0===t?void 0:t.querySelector("#".concat(e)))||void 0===n||n.remove()},clear:function(){var e=a.current;if(e)for(;e.firstChild;)e.firstChild.remove()}}),z.createElement("div",{class:"hb_cf_body"},z.createElement("div",{class:"hb_body_inner",ref:a}),t)}function Ct(){return z.createElement("div",null)}function wt(e){var t=e.mutators,n=e.onClose,a=K(),r=K(),o=O();t({addElem:a.chain("addElem"),getElem:a.chain("getElem"),removeElem:a.chain("removeElem"),clear:a.chain("clear"),setTextValue:r.chain("setTextValue"),showTextInput:r.chain("showTextInput"),disableTextInput:r.chain("disableTextInput"),showChatFrame:function(e){o&&o.current&&!e&&o.current.remove()},setTextResponsePayload:r.chain("setTextResponsePayload")});var i=z.createElement("div",{class:"hb_cf_frame"},z.createElement(Et,{onClose:n,text:"Conversation header",type:e.type}),z.createElement(Tt,{mutators:a,localeText:e.localeText}),z.createElement(Ct,null));switch(e.type){case"inline":return z.createElement("div",{ref:o,class:"hb_cf_window"},z.createElement("div",{class:"hb_inline"},i));default:return z.createElement("div",{ref:o,class:"hb_cf_window"},z.createElement("div",{class:"hb_overlay"}),z.createElement("div",{class:"hb_popup"},i))}}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e){ke.setState(e.localeText||{});var t=e.mutators,n=e.root.shadowRoot?e.root.shadowRoot:e.root.attachShadow({mode:"open"}),a=K(),r=K(),o=K(),i=O();return t({addToChatFrame:function(e){var t;null===(t=a())||void 0===t||t.addElem(z.createElement(Le,function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?It(Object(a),!0).forEach((function(t){Ot(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):It(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({},e)))},getFromChatFrame:function(e){var t;return null===(t=a())||void 0===t?void 0:t.getElem(e)},loadStyles:function(e,t){if(!t||!document.querySelector("#".concat(t))){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t&&(n.id=t),document.head.appendChild(n)}},addCustomStyle:function(e,t){i.current&&i.current.style.setProperty(e,t)},addTitle:function(e){var t,n,a,r;if(e=e?e.trim():""){var o=null===(t=i.current)||void 0===t?void 0:t.querySelector(".hb_cf_title");o&&(o.textContent=e,o.classList.add("show"),null===(a=null===(n=o.closest(".hb_cf_header"))||void 0===n?void 0:n.querySelector("hr"))||void 0===a||a.classList.add("show"),null===(r=o.closest(".hb_cf_frame"))||void 0===r||r.classList.add("has-title"))}},addBotPosition:function(){},clearChatFrame:function(){a.chain("clear")},removeFromChatFrame:a.chain("removeElem"),renderWaitingUi:function(e,t){var n,r=t||"";null===(n=a())||void 0===n||n.addElem(z.createElement("div",{id:e,class:"hb_cf_loading"},z.createElement("div",null,r),z.createElement("div",{className:"hb-msg-loading"},z.createElement("span",null),z.createElement("span",null),z.createElement("span",null),z.createElement("span",null),z.createElement("span",null))))},renderConnectingUi:function(t){var n;null===(n=a())||void 0===n||n.addElem(z.createElement(at,{id:t,localeText:e.localeText?e.localeText:{}}))},showTextInput:a.chain("showTextInput"),disableTextInput:a.chain("disableTextInput"),showButtonCallout:r.chain("showCallout"),calloutText:r.chain("calloutText"),showButton:r.chain("showButton"),showChatFrame:a.chain("showChatFrame"),addStyle:o.chain("addStyle"),badgeText:r.chain("badgeText"),showBadge:r.chain("showBadge"),setTextValue:a.chain("setTextValue"),setTextResponsePayload:a.chain("setTextResponsePayload")}),n.innerHTML="",n.appendChild(z.createElement("div",{ref:i,class:"hb_cf_main"},z.createElement(gt,{styles:e.styles,mutators:o}),z.createElement(wt,{botName:e.agentName,botAvatarClassName:e.avatar,policyUrl:e.privacyPolicyUrl,hasCloseButton:e.hasCloseButton,onClose:e.onClose,mutators:a,onTextInputChange:e.onTextInputChange,onTextInputComplete:e.onTextInputComplete,headerAvatarFill:e.colourSettings?e.colourSettings.headerAvatarFill:"",localeText:e.localeText?e.localeText:{},locale:e.locale,type:e.type}))),e.root}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dt(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?St(Object(a),!0).forEach((function(t){Mt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var At=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getShadowRoot",value:function(e){var t="inline"===e?"hb_inline-root":"hb".concat(e?"_".concat(e):"","-root"),n="inline"===e?"":document.querySelector("#".concat(t));return n&&n.remove(),z.createElement("div",{"data-testid":t,id:t})}},{key:"render",value:function(e){var t=K(),n=e.streamConfig,a=this.getShadowRoot(e.type);switch(n&&n.divId&&(n.selector=n.divId),e.type){case"inline":if(n&&n.selector&&"inline"===e.type){var r="string"==typeof n.selector?document.getElementById(n.selector):n.selector;if(r){var o=r.querySelector("#hb_inline-root");o&&o.remove(),r.appendChild(z.createElement(xt,Dt(Dt({},e),{},{mutators:t,root:a})))}else console.log("Conversational flows: selector not found")}else console.log("Conversational flows: selector not found");break;case"popup":case"sidebar":document.body.appendChild(z.createElement(xt,Dt(Dt({},e),{},{mutators:t,root:a})));break;default:document.body.appendChild(z.createElement(_t,Dt(Dt({},e),{},{mutators:t,root:a})))}this.mutators=t()}},{key:"addStyle",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.addStyle(e)}},{key:"addToChatFrame",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.addToChatFrame(e)}},{key:"getFromChatFrame",value:function(e){var t;return null===(t=this.mutators)||void 0===t?void 0:t.getFromChatFrame(e)}},{key:"removeFromChatFrame",value:function(e){var t;e&&(null===(t=this.mutators)||void 0===t||t.removeFromChatFrame(e))}},{key:"renderWaitingUi",value:function(e,t){var n;null===(n=this.mutators)||void 0===n||n.renderWaitingUi(e,t)}},{key:"renderConnectingUi",value:function(e){var t,n;(null===(t=this.mutators)||void 0===t?void 0:t.renderConnectingUi)&&(null===(n=this.mutators)||void 0===n||n.renderConnectingUi(e))}},{key:"renderStatusSeparatorUi",value:function(e,t){var n,a;(null===(n=this.mutators)||void 0===n?void 0:n.renderStatusSeparatorUi)&&(null===(a=this.mutators)||void 0===a||a.renderStatusSeparatorUi(e,t))}},{key:"showTextInput",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showTextInput(e)}},{key:"resizeChatBody",value:function(e){var t,n;(null===(t=this.mutators)||void 0===t?void 0:t.resizeChatBody)&&(null===(n=this.mutators)||void 0===n||n.resizeChatBody(e))}},{key:"showButtonCallout",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showButtonCallout(e)}},{key:"calloutText",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.calloutText(e)}},{key:"showButton",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showButton(e)}},{key:"showChatFrame",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showChatFrame(e)}},{key:"addCustomStyle",value:function(e,t){var n;null===(n=this.mutators)||void 0===n||n.addCustomStyle(e,t)}},{key:"loadStyles",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.loadStyles(e)}},{key:"addBotPosition",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.addBotPosition(e)}},{key:"clearChatFrame",value:function(){var e;null===(e=this.mutators)||void 0===e||e.clearChatFrame()}},{key:"badgeText",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.badgeText(e)}},{key:"showBadge",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showBadge(e)}},{key:"setTextValue",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.setTextValue(e)}},{key:"setTextResponsePayload",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.setTextResponsePayload(e)}},{key:"disableTextInput",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.disableTextInput(e)}},{key:"addTitle",value:function(e){var t;(null===(t=this.mutators)||void 0===t?void 0:t.addTitle)&&this.mutators.addTitle(e)}},{key:"onButtonAction",value:function(e){var t,n;(null===(t=this.mutators)||void 0===t?void 0:t.onButtonAction)&&(null===(n=this.mutators)||void 0===n||n.onButtonAction(e))}},{key:"toggleEndLiveSessionBtn",value:function(e){var t,n;null===(n=null===(t=this.mutators)||void 0===t?void 0:t.toggleEndLiveSessionBtn)||void 0===n||n.call(t,e)}},{key:"onHideEndSession",value:function(){var e,t;null===(t=null===(e=this.mutators)||void 0===e?void 0:e.onHideEndSession)||void 0===t||t.call(e)}},{key:"toggleHeaderMenuBtn",value:function(e){var t,n;null===(n=null===(t=this.mutators)||void 0===t?void 0:t.toggleHeaderMenuBtn)||void 0===n||n.call(t,e)}},{key:"toggleChatbodyLoader",value:function(e){var t,n;null===(n=null===(t=this.mutators)||void 0===t?void 0:t.toggleChatbodyLoader)||void 0===n||n.call(t,e)}}])&&Nt(t.prototype,n),a&&Nt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kt(e){var t=e.localeText,n=e.primaryLabel||(e.onlyClose?null==t?void 0:t.BUTTON_CLOSE_TEXT:null==t?void 0:t.BUTTON_NEXT_TEXT),a=e.secondaryLabel||(null==t?void 0:t.BUTTON_CANCEL_TEXT),r=e.tertiaryLabel||(null==t?void 0:t.BUTTON_BACK_TEXT),o=O();e.mutators&&e.mutators({updatePrimaryAttr:function(e,t){o.current.setAttribute(e,t)},removePrimaryAttr:function(e){o.current.removeAttribute(e)},updatePrimaryLabel:function(e){o.current.querySelectorAll("span")[0].innerHTML=e}});return!1===e.show?z.createElement(z.Fragment,null):e.onlyClose?z.createElement("div",{class:"hb_btn_group"},z.createElement(tt,{clickFn:e.closeFn?e.closeFn:e.primaryFn,text:n,classNames:["hb_btn","primary"]})):z.createElement("div",{class:"hb_btn_group"},e.children,e.tertiaryFn&&z.createElement(tt,{clickFn:e.tertiaryFn,text:r,classNames:["hb_btn","tertiary"]}),e.secondaryFn&&z.createElement(tt,{clickFn:e.secondaryFn,text:a,classNames:["hb_btn","secondary"],disabled:e.isSecondaryDisabled}),e.primaryFn&&z.createElement(tt,{buttonRef:o,clickFn:function(){o.current.classList.add("disabled"),e.primaryFn&&e.primaryFn()},text:n,classNames:["hb_btn","primary"],disabled:e.isPrimaryDisabled,icon:"next"}))}function Lt(e){var t=(null==e?void 0:e.avatar)?"bot_2_avatar bot_agent_avatar":"bot_2_avatar";return z.createElement("div",null,e.isChat&&z.createElement("div",{className:t},e.avatar?z.createElement("img",{width:"25",height:"25",src:e.avatar,alt:e.localeText?e.localeText.TEXT_ALT_CALENDAR_AVATAR:""}):z.createElement("div",{className:"bot_2"})),z.createElement("div",{class:"hb_message"},Ye(e.text)),e.children&&z.createElement("div",null,e.children))}function Ft(e){switch(e.uiType){case ge.INLINE:case ge.POPUP:return z.createElement(z.Fragment,null,z.createElement(Lt,{text:e.text,isChat:!1,children:e.children}),!e.isMessageOnly&&z.createElement(kt,{onlyClose:e.isFinalMessage,closeFn:e.secondaryFn,primaryFn:e.primaryFn,localeText:e.localeText}));case ge.CHATBOT:default:return z.createElement(Lt,{text:e.text,isChat:!0,children:e.children,avatar:e.avatar})}}function Pt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Rt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return"message"===e}}],(n=[{key:"handleMessage",value:function(e,t,n,a,r){var o=this,i=Ze(e.playbookType,r);this.api.addToChatFrame&&(this.contentId=this.api.addToChatFrame({style:i?"server":"unformatted",content:z.createElement(Ft,{text:e.payload?e.payload.text:"",uiType:r&&r.type,primaryFn:function(){o.api.sendMessage({type:e.type,sender:"client",id:e.id,playbookType:e.playbookType}),o.api.removeFromChatFrame(o.contentId)},secondaryFn:function(){o.api.showChatFrame(!1)},isFinalMessage:e.isFinalMessage,localeText:n}),messageType:e.type}))}},{key:"handleReplay",value:function(e,t,n,a,r){var o=this;e.forEach((function(e){return o.handleMessage(e,t,n,a,r)}))}}])&&Pt(t.prototype,n),a&&Pt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jt(e){var t=e.onChoiceClick,n=e.choices,a=O();return z.createElement("div",{ref:a,"data-msg-type":"question-choices",class:"hb_question ".concat(e.questionClassNames&&e.questionClassNames.length>0?e.questionClassNames.join(" "):"")},n?n.map((function(n,r){return n?z.createElement("button",{id:"".concat(r),class:"hb_choice ".concat(e.questionChoiceClassNames&&e.questionChoiceClassNames.length>0?e.questionChoiceClassNames.join(" "):""),onClick:function(){return function(e,n){if(-1!==n&&a&&a.current){for(var r=0,o=Array.from(a.current.children);r<o.length;r++){var i=o[r],l=i.getAttribute("class");l&&l.includes("selected")&&i.classList.remove("selected")}a.current.children[n].classList.add("selected")}t(e)}(n,r)}},"string"==typeof n?n:n.text):z.createElement(z.Fragment,null)})):z.createElement(z.Fragment,null))}function Ht(e){var t=K(),n="";switch(e.uiType){case ge.INLINE:case ge.POPUP:return z.createElement("div",{id:e.id},z.createElement("div",{class:"hb_cf_qs_container"},z.createElement(Ft,{text:e.text?e.text:"",uiType:e.uiType,isMessageOnly:!0,localeText:e.localeText}),z.createElement(jt,{text:e.text?e.text:"",choices:e.choices?e.choices:[],onChoiceClick:function(e){var a;n=e,e&&(null===(a=t())||void 0===a||a.removePrimaryAttr("disabled"))},questionClassNames:["hb_question"],questionChoiceClassNames:["hb_choices"]})),z.createElement(kt,{mutators:t,isPrimaryDisabled:!0,primaryFn:function(){n&&e.onChoiceClick(n)},localeText:e.localeText}));case ge.CHATBOT:default:return z.createElement(jt,{text:e.text?e.text:"",choices:e.choices?e.choices:[],onChoiceClick:e.onChoiceClick})}}function Bt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ut=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return"question"===e}}],(n=[{key:"handleMessage",value:function(e,t,n,a,r){var o=this,i=e,l=Ze(e.playbookType,r);if("question_answer"===i.type)this.questionId&&this.api.removeFromChatFrame(this.questionId),this.api.addToChatFrame({style:"client",content:z.createElement("div",{class:"hb_answer"},i.payload?i.payload.text:""),messageType:i.type});else{var c=e;l&&this.api.addToChatFrame({style:"server",content:z.createElement(Ft,{text:c.payload?c.payload.text:"",uiType:r&&r.type,localeText:n}),messageType:c.type}),this.questionId=this.api.addToChatFrame({content:z.createElement(Ht,{text:c.payload?c.payload.text:"",choices:c.payload?c.payload.choices:[],onChoiceClick:function(i){var c={id:e.id,type:"question_answer",sender:"client",payload:"string"==typeof i?{text:i,type:"message"}:i,playbookType:e.playbookType};l?o.handleMessage(c,t,n,a,r):o.api.removeFromChatFrame(o.questionId),o.api.sendMessage(c),o.api.resizeChatBody(!0)},hideFrame:function(){return o.api.showChatFrame(!1)},uiType:r&&r.type,id:t,localeText:n}),style:"unformatted",messageType:c.type})}}},{key:"handleReplay",value:function(e,t,n,a,r){var o=this;e.forEach((function(e){return o.handleMessage(e,t,n,a,r)}))}}])&&Bt(t.prototype,n),a&&Bt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e){return z.createElement("div",{style:{width:"100%"}},e.label&&z.createElement("label",{htmlFor:"textfield-".concat(e.id)},e.label),z.createElement("input",function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Vt(Object(a),!0).forEach((function(t){Yt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({id:"textfield-".concat(e.id),required:e.isRequired,class:e.classNames?e.classNames.join(" "):"",title:e.title,placeholder:e.placeholder,onClick:e.onClick,type:"date"===e.inputType||"datetime"===e.inputType?"text":e.inputType,ref:e.inputRef,onInput:e.onInput,"data-type":e.inputType,max:e.max,min:e.min,step:e.step,onKeyDown:e.onKeyPress},e.ariaAttributes)))}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xt(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Gt(Object(a),!0).forEach((function(t){zt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Wt(e){var t=e.localeText;return z.createElement("div",{id:"infocard-".concat(e.id)},z.createElement(Ft,{uiType:e.uiType,text:e.text,isMessageOnly:!0,localeText:t||{}}),e.onEnterClick?z.createElement("form",{onSubmit:function(t){return t.preventDefault(),e.onSubmit&&e.onSubmit(),!1},ref:e.formRef},z.createElement("div",{class:"hb_input_container",ref:e.inputContainerRef},z.createElement(qt,{isRequired:!1,classNames:e.textFieldClassNames&&e.textFieldClassNames.length>0?["hb_input"].concat(Kt(e.textFieldClassNames)):["hb_input"],title:e.title,placeholder:e.placeholder,onClick:e.onClick,inputType:"date"===e.inputType||"datettime"===e.inputType?"text":e.inputType,inputRef:e.inputRef,onInput:e.onInput,onKeyPress:e.onKeyPress,id:"infocard-".concat(e.id),label:"",defaultValue:"",max:e.max,min:e.min,step:e.step,ariaAttributes:e.ariaAttributes}),e.isChat&&z.createElement("button",{type:"submit",class:"hb_input_button","aria-label":t?t.TEXT_ACCESSIBILITY_INFO_BUTTON:"",onClick:e.onSubmit},z.createElement("div",{class:"hb_input_button_icon"}))),e.children?e.children:""):z.createElement(z.Fragment,null))}function Zt(e){var t=O(),n=O(),a=e.mutators||K(),r=function(){var e;n&&n.current&&(null===(e=n.current.querySelector(".hb_input_error"))||void 0===e||e.remove())},o=function(){var o,i,l,c,s;if(t.current&&t.current.firstChild){var d=t.current.querySelector("input");d.setCustomValidity("");var u=new RegExp(e.pattern,"gmi");d.validity.valid&&""!==(null===(o=d.value)||void 0===o?void 0:o.trim())&&u.test(d.value)?e.onEnterClick(d.value):(r(),null===(i=n.current)||void 0===i||i.appendChild(z.createElement("span",{class:"hb_input_error"},z.createElement("span",{class:"hb_input_alert hb_input_alert_color"}),z.createElement("span",{class:"hb_input_error_text"},e.error||e.title))),null===(c=null===(l=e.inputRef)||void 0===l?void 0:l.current)||void 0===c||c.addEventListener("hb_input_change",r),null===(s=a())||void 0===s||s.updatePrimaryAttr("disabled","true"))}},i=function(t){var o,i,l;n&&n.current&&(r(),null===(i=null===(o=e.inputRef)||void 0===o?void 0:o.current)||void 0===i||i.removeEventListener("hb_input_change",r),null===(l=a())||void 0===l||l.removePrimaryAttr("disabled")),e.onInput&&e.onInput(t)};switch(e.uiType){case ge.INLINE:case ge.POPUP:return z.createElement(Wt,Xt(Xt({},e),{},{formRef:n,isChat:!1,textFieldClassNames:["hb_cf_input"],inputContainerRef:t,onInput:i,inputRef:e.inputRef}),e.children,z.createElement(kt,{primaryFn:o,isPrimaryDisabled:!0,mutators:a,localeText:e.localeText}));case ge.CHATBOT:default:return z.createElement(Wt,Xt(Xt({},e),{},{formRef:n,isChat:!0,inputContainerRef:t,onSubmit:o,onInput:i,inputRef:e.inputRef}),e.children)}}var Jt,$t,en,tn,nn={};Jt=nn,$t="default",en=function(){return Fn},tn=function(e){return Fn=e},Object.defineProperty(Jt,$t,{get:en,set:tn,enumerable:!0,configurable:!0});var an=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],rn={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},on={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ln=on,cn=function(e,t){return void 0===t&&(t=2),("000"+e).slice(-1*t)},sn=function(e){return!0===e?1:0};function dn(e,t){var n;return function(){var a=this,r=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(a,r)}),t)}}var un=function(e){return e instanceof Array?e:[e]};function pn(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function mn(e,t,n){var a=window.document.createElement(e);return t=t||"",n=n||"",a.className=t,void 0!==n&&(a.textContent=n),a}function hn(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function fn(e,t){return t(e)?e:e.parentNode?fn(e.parentNode,t):void 0}function vn(e,t){var n=mn("div","numInputWrapper"),a=mn("input","numInput "+e),r=mn("span","arrowUp"),o=mn("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?a.type="number":(a.type="text",a.pattern="\\d*"),void 0!==t)for(var i in t)a.setAttribute(i,t[i]);return n.appendChild(a),n.appendChild(r),n.appendChild(o),n}function gn(e){try{return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}var yn=function(){},bn=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},_n={D:yn,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*sn(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,n){var a=parseInt(t),r=new Date(e.getFullYear(),0,2+7*(a-1),0,0,0,0);return r.setDate(r.getDate()-r.getDay()+n.firstDayOfWeek),r},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:yn,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:yn,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},En={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Tn={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[Tn.w(e,t,n)]},F:function(e,t,n){return bn(Tn.n(e,t,n)-1,!1,t)},G:function(e,t,n){return cn(Tn.h(e,t,n))},H:function(e){return cn(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[sn(e.getHours()>11)]},M:function(e,t){return bn(e.getMonth(),!0,t)},S:function(e){return cn(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return cn(e.getFullYear(),4)},d:function(e){return cn(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return cn(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return cn(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},Cn=function(e){var t=e.config,n=void 0===t?rn:t,a=e.l10n,r=void 0===a?on:a,o=e.isMobile,i=void 0!==o&&o;return function(e,t,a){var o=a||r;return void 0===n.formatDate||i?t.split("").map((function(t,a,r){return Tn[t]&&"\\"!==r[a-1]?Tn[t](e,o,n):"\\"!==t?t:""})).join(""):n.formatDate(e,t,o)}},wn=function(e){var t=e.config,n=void 0===t?rn:t,a=e.l10n,r=void 0===a?on:a;return function(e,t,a,o){if(0===e||e){var i,l=o||r,c=e;if(e instanceof Date)i=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)i=new Date(e);else if("string"==typeof e){var s=t||(n||rn).dateFormat,d=String(e).trim();if("today"===d)i=new Date,a=!0;else if(n&&n.parseDate)i=n.parseDate(e,s);else if(/Z$/.test(d)||/GMT$/.test(d))i=new Date(e);else{for(var u=void 0,p=[],m=0,h=0,f="";m<s.length;m++){var v=s[m],g="\\"===v,y="\\"===s[m-1]||g;if(En[v]&&!y){f+=En[v];var b=new RegExp(f).exec(e);b&&(u=!0)&&p["Y"!==v?"push":"unshift"]({fn:_n[v],val:b[++h]})}else g||(f+=".")}i=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),p.forEach((function(e){var t=e.fn,n=e.val;return i=t(i,n,l)||i})),i=u?i:void 0}}if(i instanceof Date&&!isNaN(i.getTime()))return!0===a&&i.setHours(0,0,0,0),i;n.errorHandler(new Error("Invalid date provided: "+c))}}};function In(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var On=function(e,t,n){return 3600*e+60*t+n},xn=function(e){var t=Math.floor(e/3600),n=(e-3600*t)/60;return[t,n,e-3600*t-60*n]},Sn={DAY:864e5};function Dn(e){var t=e.defaultHour,n=e.defaultMinute,a=e.defaultSeconds;if(void 0!==e.minDate){var r=e.minDate.getHours(),o=e.minDate.getMinutes(),i=e.minDate.getSeconds();t<r&&(t=r),t===r&&n<o&&(n=o),t===r&&n===o&&a<i&&(a=e.minDate.getSeconds())}if(void 0!==e.maxDate){var l=e.maxDate.getHours(),c=e.maxDate.getMinutes();(t=Math.min(t,l))===l&&(n=Math.min(c,n)),t===l&&n===c&&(a=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:a}}"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var a=function(t){t&&Object.keys(t).forEach((function(n){return e[n]=t[n]}))},r=0,o=t;r<o.length;r++){var i=o[r];a(i)}return e});var Mn=function(){return(Mn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Nn=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,l=o.length;i<l;i++,r++)a[r]=o[i];return a};function An(e,t){var n={config:Mn(Mn({},rn),Ln.defaultConfig),l10n:ln};function a(){var e;return(null===(e=n.calendarContainer)||void 0===e?void 0:e.getRootNode()).activeElement||document.activeElement}function r(e){return e.bind(n)}function o(){var e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){var t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function i(e){if(0===n.selectedDates.length){var t=void 0===n.config.minDate||In(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),a=Dn(n.config);t.setHours(a.hours,a.minutes,a.seconds,t.getMilliseconds()),n.selectedDates=[t],n.latestSelectedDateObj=t}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,a=gn(e),r=a;void 0!==n.amPM&&a===n.amPM&&(n.amPM.textContent=n.l10n.amPM[sn(n.amPM.textContent===n.l10n.amPM[0])]);var o=parseFloat(r.getAttribute("min")),i=parseFloat(r.getAttribute("max")),l=parseFloat(r.getAttribute("step")),c=parseInt(r.value,10),s=e.delta||(t?38===e.which?1:-1:0),d=c+l*s;if(void 0!==r.value&&2===r.value.length){var u=r===n.hourElement,p=r===n.minuteElement;d<o?(d=i+d+sn(!u)+(sn(u)&&sn(!n.amPM)),p&&f(void 0,-1,n.hourElement)):d>i&&(d=r===n.hourElement?d-i-sn(!n.amPM):o,p&&f(void 0,1,n.hourElement)),n.amPM&&u&&(1===l?d+c===23:Math.abs(d-c)>l)&&(n.amPM.textContent=n.l10n.amPM[sn(n.amPM.textContent===n.l10n.amPM[0])]),r.value=cn(d)}}(e);var r=n._input.value;l(),$(),n._input.value!==r&&n._debouncedChange()}function l(){if(void 0!==n.hourElement&&void 0!==n.minuteElement){var e,t,a=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(n.minuteElement.value,10)||0)%60,o=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;void 0!==n.amPM&&(e=a,t=n.amPM.textContent,a=e%12+12*sn(t===n.l10n.amPM[1]));var i=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===In(n.latestSelectedDateObj,n.config.minDate,!0),l=void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===In(n.latestSelectedDateObj,n.config.maxDate,!0);if(void 0!==n.config.maxTime&&void 0!==n.config.minTime&&n.config.minTime>n.config.maxTime){var c=On(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),d=On(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),u=On(a,r,o);if(u>d&&u<c){var p=xn(c);a=p[0],r=p[1],o=p[2]}}else{if(l){var m=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;(a=Math.min(a,m.getHours()))===m.getHours()&&(r=Math.min(r,m.getMinutes())),r===m.getMinutes()&&(o=Math.min(o,m.getSeconds()))}if(i){var h=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;(a=Math.max(a,h.getHours()))===h.getHours()&&r<h.getMinutes()&&(r=h.getMinutes()),r===h.getMinutes()&&(o=Math.max(o,h.getSeconds()))}}s(a,r,o)}}function c(e){var t=e||n.latestSelectedDateObj;t&&t instanceof Date&&s(t.getHours(),t.getMinutes(),t.getSeconds())}function s(e,t,a){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,a||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=cn(n.config.time_24hr?e:(12+e)%12+12*sn(e%12==0)),n.minuteElement.value=cn(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[sn(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=cn(a)))}function d(e){var t=gn(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&M(n)}function u(e,t,a,r){return t instanceof Array?t.forEach((function(t){return u(e,t,a,r)})):e instanceof Array?e.forEach((function(e){return u(e,t,a,r)})):(e.addEventListener(t,a,r),void n._handlers.push({remove:function(){return e.removeEventListener(t,a,r)}}))}function p(){K("onChange")}function m(e,t){var a=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),r=n.currentYear,o=n.currentMonth;try{void 0!==a&&(n.currentYear=a.getFullYear(),n.currentMonth=a.getMonth())}catch(e){e.message="Invalid date supplied: "+a,n.config.errorHandler(e)}t&&n.currentYear!==r&&(K("onYearChange"),T()),!t||n.currentYear===r&&n.currentMonth===o||K("onMonthChange"),n.redraw()}function h(e){var t=gn(e);~t.className.indexOf("arrow")&&f(e,t.classList.contains("arrowUp")?1:-1)}function f(e,t,n){var a=e&&gn(e),r=n||a&&a.parentNode&&a.parentNode.firstChild,o=Q("increment");o.delta=t,r&&r.dispatchEvent(o)}function v(e,t,a,r){var o=N(t,!0),i=mn("span",e,t.getDate().toString());return i.dateObj=t,i.$i=r,i.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===In(t,n.now)&&(n.todayDateElem=i,i.classList.add("today"),i.setAttribute("aria-current","date")),o?(i.tabIndex=-1,W(t)&&(i.classList.add("selected"),n.selectedDateElem=i,"range"===n.config.mode&&(pn(i,"startRange",n.selectedDates[0]&&0===In(t,n.selectedDates[0],!0)),pn(i,"endRange",n.selectedDates[1]&&0===In(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&i.classList.add("inRange")))):i.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&(In(e,n.selectedDates[0])>=0&&In(e,n.selectedDates[1])<=0)}(t)&&!W(t)&&i.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&r%7==6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),K("onDayCreate",i),i}function g(e){e.focus(),"range"===n.config.mode&&F(e)}function y(e){for(var t=e>0?0:n.config.showMonths-1,a=e>0?n.config.showMonths:-1,r=t;r!=a;r+=e)for(var o=n.daysContainer.children[r],i=e>0?0:o.children.length-1,l=e>0?o.children.length:-1,c=i;c!=l;c+=e){var s=o.children[c];if(-1===s.className.indexOf("hidden")&&N(s.dateObj))return s}}function b(e,t){var r=a(),o=A(r||document.body),i=void 0!==e?e:o?r:void 0!==n.selectedDateElem&&A(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&A(n.todayDateElem)?n.todayDateElem:y(t>0?1:-1);void 0===i?n._input.focus():o?function(e,t){for(var a=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,r=t>0?n.config.showMonths:-1,o=t>0?1:-1,i=a-n.currentMonth;i!=r;i+=o)for(var l=n.daysContainer.children[i],c=a-n.currentMonth===i?e.$i+t:t<0?l.children.length-1:0,s=l.children.length,d=c;d>=0&&d<s&&d!=(t>0?s:-1);d+=o){var u=l.children[d];if(-1===u.className.indexOf("hidden")&&N(u.dateObj)&&Math.abs(e.$i-d)>=Math.abs(t))return g(u)}n.changeMonth(o),b(y(o),0)}(i,t):g(i)}function _(e,t){for(var a=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,r=n.utils.getDaysInMonth((t-1+12)%12,e),o=n.utils.getDaysInMonth(t,e),i=window.document.createDocumentFragment(),l=n.config.showMonths>1,c=l?"prevMonthDay hidden":"prevMonthDay",s=l?"nextMonthDay hidden":"nextMonthDay",d=r+1-a,u=0;d<=r;d++,u++)i.appendChild(v("flatpickr-day "+c,new Date(e,t-1,d),0,u));for(d=1;d<=o;d++,u++)i.appendChild(v("flatpickr-day",new Date(e,t,d),0,u));for(var p=o+1;p<=42-a&&(1===n.config.showMonths||u%7!=0);p++,u++)i.appendChild(v("flatpickr-day "+s,new Date(e,t+1,p%o),0,u));var m=mn("div","dayContainer");return m.appendChild(i),m}function E(){if(void 0!==n.daysContainer){hn(n.daysContainer),n.weekNumbers&&hn(n.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<n.config.showMonths;t++){var a=new Date(n.currentYear,n.currentMonth,1);a.setMonth(n.currentMonth+t),e.appendChild(_(a.getFullYear(),a.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&F()}}function T(){if(!(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)){var e;n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e=t,!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())){var a=mn("option","flatpickr-monthDropdown-month");a.value=new Date(n.currentYear,t).getMonth().toString(),a.textContent=bn(t,n.config.shorthandCurrentMonth,n.l10n),a.tabIndex=-1,n.currentMonth===t&&(a.selected=!0),n.monthsDropdownContainer.appendChild(a)}}}function C(){var e,t=mn("div","flatpickr-month"),a=window.document.createDocumentFragment();n.config.showMonths>1||"static"===n.config.monthSelectorType?e=mn("span","cur-month"):(n.monthsDropdownContainer=mn("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),u(n.monthsDropdownContainer,"change",(function(e){var t=gn(e),a=parseInt(t.value,10);n.changeMonth(a-n.currentMonth),K("onMonthChange")})),T(),e=n.monthsDropdownContainer);var r=vn("cur-year",{tabindex:"-1"}),o=r.getElementsByTagName("input")[0];o.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&o.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(o.setAttribute("max",n.config.maxDate.getFullYear().toString()),o.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var i=mn("div","flatpickr-current-month");return i.appendChild(e),i.appendChild(r),a.appendChild(i),t.appendChild(a),{container:t,yearElement:o,monthElement:e}}function w(){hn(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var e=n.config.showMonths;e--;){var t=C();n.yearElements.push(t.yearElement),n.monthElements.push(t.monthElement),n.monthNav.appendChild(t.container)}n.monthNav.appendChild(n.nextMonthNav)}function I(){n.weekdayContainer?hn(n.weekdayContainer):n.weekdayContainer=mn("div","flatpickr-weekdays");for(var e=n.config.showMonths;e--;){var t=mn("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(t)}return O(),n.weekdayContainer}function O(){if(n.weekdayContainer){var e=n.l10n.firstDayOfWeek,t=Nn(n.l10n.weekdays.shorthand);e>0&&e<t.length&&(t=Nn(t.splice(e,t.length),t.splice(0,e)));for(var a=n.config.showMonths;a--;)n.weekdayContainer.children[a].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function x(e,t){void 0===t&&(t=!0);var a=t?e:e-n.currentMonth;a<0&&!0===n._hidePrevMonthArrow||a>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=a,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,K("onYearChange"),T()),E(),K("onMonthChange"),Z())}function S(e){return n.calendarContainer.contains(e)}function D(e){if(n.isOpen&&!n.config.inline){var t=gn(e),a=S(t),r=!(t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput)))&&!a&&!S(e.relatedTarget),o=!n.config.ignoredFocusElements.some((function(e){return e.contains(t)}));r&&o&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&i(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&n.clear(!1))}}function M(e){if(!(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())){var t=e,a=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),a&&(n.redraw(),K("onYearChange"),T())}}function N(e,t){var a;void 0===t&&(t=!0);var r=n.parseDate(e,void 0,t);if(n.config.minDate&&r&&In(r,n.config.minDate,void 0!==t?t:!n.minDateHasTime)<0||n.config.maxDate&&r&&In(r,n.config.maxDate,void 0!==t?t:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===r)return!1;for(var o=!!n.config.enable,i=null!==(a=n.config.enable)&&void 0!==a?a:n.config.disable,l=0,c=void 0;l<i.length;l++){if("function"==typeof(c=i[l])&&c(r))return o;if(c instanceof Date&&void 0!==r&&c.getTime()===r.getTime())return o;if("string"==typeof c){var s=n.parseDate(c,void 0,!0);return s&&s.getTime()===r.getTime()?o:!o}if("object"==typeof c&&void 0!==r&&c.from&&c.to&&r.getTime()>=c.from.getTime()&&r.getTime()<=c.to.getTime())return o}return!o}function A(e){return void 0!==n.daysContainer&&(-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e))}function k(e){var t=e.target===n._input,a=n._input.value.trimEnd()!==J();!t||!a||e.relatedTarget&&S(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function L(t){var r=gn(t),o=n.config.wrap?e.contains(r):r===n._input,c=n.config.allowInput,s=n.isOpen&&(!c||!o),d=n.config.inline&&o&&!c;if(13===t.keyCode&&o){if(c)return n.setDate(n._input.value,!0,r===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),r.blur();n.open()}else if(S(r)||s||d){var u=!!n.timeContainer&&n.timeContainer.contains(r);switch(t.keyCode){case 13:u?(t.preventDefault(),i(),V()):Y(t);break;case 27:t.preventDefault(),V();break;case 8:case 46:o&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(u||o)n.hourElement&&n.hourElement.focus();else{t.preventDefault();var p=a();if(void 0!==n.daysContainer&&(!1===c||p&&A(p))){var m=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),x(m),b(y(1),0)):b(void 0,m)}}break;case 38:case 40:t.preventDefault();var h=40===t.keyCode?1:-1;n.daysContainer&&void 0!==r.$i||r===n.input||r===n.altInput?t.ctrlKey?(t.stopPropagation(),M(n.currentYear-h),b(y(1),0)):u||b(void 0,7*h):r===n.currentYearElement?M(n.currentYear-h):n.config.enableTime&&(!u&&n.hourElement&&n.hourElement.focus(),i(t),n._debouncedChange());break;case 9:if(u){var f=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((function(e){return e})),v=f.indexOf(r);if(-1!==v){var g=f[v+(t.shiftKey?-1:1)];t.preventDefault(),(g||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(r)&&t.shiftKey&&(t.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&r===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],l(),$();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],l(),$()}(o||S(r))&&K("onKeyDown",t)}function F(e,t){if(void 0===t&&(t="flatpickr-day"),1===n.selectedDates.length&&(!e||e.classList.contains(t)&&!e.classList.contains("flatpickr-disabled"))){for(var a=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),r=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),o=Math.min(a,n.selectedDates[0].getTime()),i=Math.max(a,n.selectedDates[0].getTime()),l=!1,c=0,s=0,d=o;d<i;d+=Sn.DAY)N(new Date(d),!0)||(l=l||d>o&&d<i,d<r&&(!c||d>c)?c=d:d>r&&(!s||d<s)&&(s=d));Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+t)).forEach((function(t){var o,i,d,u=t.dateObj.getTime(),p=c>0&&u<c||s>0&&u>s;if(p)return t.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(e){t.classList.remove(e)}));l&&!p||(["startRange","inRange","endRange","notAllowed"].forEach((function(e){t.classList.remove(e)})),void 0!==e&&(e.classList.add(a<=n.selectedDates[0].getTime()?"startRange":"endRange"),r<a&&u===r?t.classList.add("startRange"):r>a&&u===r&&t.classList.add("endRange"),u>=c&&(0===s||u<=s)&&(i=r,d=a,(o=u)>Math.min(i,d)&&o<Math.max(i,d))&&t.classList.add("inRange")))}))}}function P(){!n.isOpen||n.config.static||n.config.inline||B()}function R(e){return function(t){var a=n.config["_"+e+"Date"]=n.parseDate(t,n.config.dateFormat),r=n.config["_"+("min"===e?"max":"min")+"Date"];void 0!==a&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=a.getHours()>0||a.getMinutes()>0||a.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((function(e){return N(e)})),n.selectedDates.length||"min"!==e||c(a),$()),n.daysContainer&&(U(),void 0!==a?n.currentYearElement[e]=a.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!r&&void 0!==a&&r.getFullYear()===a.getFullYear())}}function j(){return n.config.wrap?e.querySelector("[data-input]"):e}function H(){"object"!=typeof n.config.locale&&void 0===Ln.l10ns[n.config.locale]&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=Mn(Mn({},Ln.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?Ln.l10ns[n.config.locale]:void 0),En.D="("+n.l10n.weekdays.shorthand.join("|")+")",En.l="("+n.l10n.weekdays.longhand.join("|")+")",En.M="("+n.l10n.months.shorthand.join("|")+")",En.F="("+n.l10n.months.longhand.join("|")+")",En.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")",void 0===Mn(Mn({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===Ln.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=Cn(n),n.parseDate=wn({config:n.config,l10n:n.l10n})}function B(e){if("function"!=typeof n.config.position){if(void 0!==n.calendarContainer){K("onPreCalendarPosition");var t=e||n._positionElement,a=Array.prototype.reduce.call(n.calendarContainer.children,(function(e,t){return e+t.offsetHeight}),0),r=n.calendarContainer.offsetWidth,o=n.config.position.split(" "),i=o[0],l=o.length>1?o[1]:null,c=t.getBoundingClientRect(),s=window.innerHeight-c.bottom,d="above"===i||"below"!==i&&s<a&&c.top>a,u=window.pageYOffset+c.top+(d?-a-2:t.offsetHeight+2);if(pn(n.calendarContainer,"arrowTop",!d),pn(n.calendarContainer,"arrowBottom",d),!n.config.inline){var p=window.pageXOffset+c.left,m=!1,h=!1;"center"===l?(p-=(r-c.width)/2,m=!0):"right"===l&&(p-=r-c.width,h=!0),pn(n.calendarContainer,"arrowLeft",!m&&!h),pn(n.calendarContainer,"arrowCenter",m),pn(n.calendarContainer,"arrowRight",h);var f=window.document.body.offsetWidth-(window.pageXOffset+c.right),v=p+r>window.document.body.offsetWidth,g=f+r>window.document.body.offsetWidth;if(pn(n.calendarContainer,"rightMost",v),!n.config.static)if(n.calendarContainer.style.top=u+"px",v)if(g){var y=function(){for(var e=null,t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];if(n.cssRules){try{n.cssRules}catch(e){continue}e=n;break}}return null!=e?e:(a=document.createElement("style"),document.head.appendChild(a),a.sheet);var a}();if(void 0===y)return;var b=window.document.body.offsetWidth,_=Math.max(0,b/2-r/2),E=y.cssRules.length,T="{left:"+c.left+"px;right:auto;}";pn(n.calendarContainer,"rightMost",!1),pn(n.calendarContainer,"centerMost",!0),y.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+T,E),n.calendarContainer.style.left=_+"px",n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=f+"px";else n.calendarContainer.style.left=p+"px",n.calendarContainer.style.right="auto"}}}else n.config.position(n,e)}function U(){n.config.noCalendar||n.isMobile||(T(),Z(),E())}function V(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function Y(e){e.preventDefault(),e.stopPropagation();var t=fn(gn(e),(function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")}));if(void 0!==t){var a=t,r=n.latestSelectedDateObj=new Date(a.dateObj.getTime()),o=(r.getMonth()<n.currentMonth||r.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=a,"single"===n.config.mode)n.selectedDates=[r];else if("multiple"===n.config.mode){var i=W(r);i?n.selectedDates.splice(parseInt(i),1):n.selectedDates.push(r)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=r,n.selectedDates.push(r),0!==In(r,n.selectedDates[0],!0)&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()})));if(l(),o){var c=n.currentYear!==r.getFullYear();n.currentYear=r.getFullYear(),n.currentMonth=r.getMonth(),c&&(K("onYearChange"),T()),K("onMonthChange")}if(Z(),E(),$(),o||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():g(a),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){var s="single"===n.config.mode&&!n.config.enableTime,d="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(s||d)&&V()}p()}}n.parseDate=wn({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=u,n._setHoursFromDate=c,n._positionCalendar=B,n.changeMonth=x,n.changeYear=M,n.clear=function(e,t){void 0===e&&(e=!0);void 0===t&&(t=!0);n.input.value="",void 0!==n.altInput&&(n.altInput.value="");void 0!==n.mobileInput&&(n.mobileInput.value="");n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth());if(!0===n.config.enableTime){var a=Dn(n.config),r=a.hours,o=a.minutes,i=a.seconds;s(r,o,i)}n.redraw(),e&&K("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active"));K("onClose")},n.onMouseOver=F,n._createElement=mn,n.createDay=v,n.destroy=function(){void 0!==n.config&&K("onDestroy");for(var e=n._handlers.length;e--;)n._handlers[e].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var t=n.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput);n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete n[e]}catch(e){}}))},n.isEnabled=N,n.jumpToDate=m,n.updateValue=$,n.open=function(e,t){void 0===t&&(t=n._positionElement);if(!0===n.isMobile){if(e){e.preventDefault();var a=gn(e);a&&a.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void K("onOpen")}if(n._input.disabled||n.config.inline)return;var r=n.isOpen;n.isOpen=!0,r||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),K("onOpen"),B(t));!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return n.hourElement.select()}),50))},n.redraw=U,n.set=function(e,t){if(null!==e&&"object"==typeof e)for(var a in Object.assign(n.config,e),e)void 0!==q[a]&&q[a].forEach((function(e){return e()}));else n.config[e]=t,void 0!==q[e]?q[e].forEach((function(e){return e()})):an.indexOf(e)>-1&&(n.config[e]=un(t));n.redraw(),$(!0)},n.setDate=function(e,t,a){void 0===t&&(t=!1);void 0===a&&(a=n.config.dateFormat);if(0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);G(e,a),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),m(void 0,t),c(),0===n.selectedDates.length&&n.clear(!1);$(t),t&&K("onChange")},n.toggle=function(e){if(!0===n.isOpen)return n.close();n.open(e)};var q={locale:[H,O],showMonths:[w,o,I],minDate:[m],maxDate:[m],positionElement:[z],clickOpens:[function(){!0===n.config.clickOpens?(u(n._input,"focus",n.open),u(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function G(e,t){var a=[];if(e instanceof Array)a=e.map((function(e){return n.parseDate(e,t)}));else if(e instanceof Date||"number"==typeof e)a=[n.parseDate(e,t)];else if("string"==typeof e)switch(n.config.mode){case"single":case"time":a=[n.parseDate(e,t)];break;case"multiple":a=e.split(n.config.conjunction).map((function(e){return n.parseDate(e,t)}));break;case"range":a=e.split(n.l10n.rangeSeparator).map((function(e){return n.parseDate(e,t)}))}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));n.selectedDates=n.config.allowInvalidPreload?a:a.filter((function(e){return e instanceof Date&&N(e,!1)})),"range"===n.config.mode&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}function X(e){return e.slice().map((function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e})).filter((function(e){return e}))}function z(){n._positionElement=n.config.positionElement||n._input}function K(e,t){if(void 0!==n.config){var a=n.config[e];if(void 0!==a&&a.length>0)for(var r=0;a[r]&&r<a.length;r++)a[r](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(Q("change")),n.input.dispatchEvent(Q("input")))}}function Q(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function W(e){for(var t=0;t<n.selectedDates.length;t++){var a=n.selectedDates[t];if(a instanceof Date&&0===In(a,e))return""+t}return!1}function Z(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach((function(e,t){var a=new Date(n.currentYear,n.currentMonth,1);a.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=bn(a.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=a.getMonth().toString(),e.value=a.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function J(e){var t=e||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map((function(e){return n.formatDate(e,t)})).filter((function(e,t,a){return"range"!==n.config.mode||n.config.enableTime||a.indexOf(e)===t})).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function $(e){void 0===e&&(e=!0),void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=J(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=J(n.config.altFormat)),!1!==e&&K("onValueUpdate")}function ee(e){var t=gn(e),a=n.prevMonthNav.contains(t),r=n.nextMonthNav.contains(t);a||r?x(a?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=e,n.isOpen=!1,function(){var a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],o=Mn(Mn({},JSON.parse(JSON.stringify(e.dataset||{}))),t),i={};n.config.parseDate=o.parseDate,n.config.formatDate=o.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(e){n.config._enable=X(e)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(e){n.config._disable=X(e)}});var l="time"===o.mode;if(!o.dateFormat&&(o.enableTime||l)){var c=Ln.defaultConfig.dateFormat||rn.dateFormat;i.dateFormat=o.noCalendar||l?"H:i"+(o.enableSeconds?":S":""):c+" H:i"+(o.enableSeconds?":S":"")}if(o.altInput&&(o.enableTime||l)&&!o.altFormat){var s=Ln.defaultConfig.altFormat||rn.altFormat;i.altFormat=o.noCalendar||l?"h:i"+(o.enableSeconds?":S K":" K"):s+" h:i"+(o.enableSeconds?":S":"")+" K"}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:R("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:R("max")});var d=function(e){return function(t){n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:d("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:d("max")}),"time"===o.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0);Object.assign(n.config,i,o);for(var u=0;u<a.length;u++)n.config[a[u]]=!0===n.config[a[u]]||"true"===n.config[a[u]];an.filter((function(e){return void 0!==n.config[e]})).forEach((function(e){n.config[e]=un(n.config[e]||[]).map(r)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(u=0;u<n.config.plugins.length;u++){var p=n.config.plugins[u](n)||{};for(var m in p)an.indexOf(m)>-1?n.config[m]=un(p[m]).map(r).concat(n.config[m]):void 0===o[m]&&(n.config[m]=p[m])}o.altInputClass||(n.config.altInputClass=j().className+" "+n.config.altInputClass);K("onParseConfig")}(),H(),function(){if(n.input=j(),!n.input)return void n.config.errorHandler(new Error("Invalid input element specified"));n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=mn(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling));n.config.allowInput||n._input.setAttribute("readonly","readonly");z()}(),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&G(e,n.config.dateFormat);n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]);void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i"));void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i"));n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=n.currentMonth),void 0===t&&(t=n.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:n.l10n.daysInMonth[e]}},n.isMobile||function(){var e=window.document.createDocumentFragment();if(n.calendarContainer=mn("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild((n.monthNav=mn("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=mn("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=mn("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,w(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(e){n.__hidePrevMonthArrow!==e&&(pn(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(e){n.__hideNextMonthArrow!==e&&(pn(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],Z(),n.monthNav)),n.innerContainer=mn("div","flatpickr-innerContainer"),n.config.weekNumbers){var t=function(){n.calendarContainer.classList.add("hasWeeks");var e=mn("div","flatpickr-weekwrapper");e.appendChild(mn("span","flatpickr-weekday",n.l10n.weekAbbreviation));var t=mn("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),a=t.weekWrapper,r=t.weekNumbers;n.innerContainer.appendChild(a),n.weekNumbers=r,n.weekWrapper=a}n.rContainer=mn("div","flatpickr-rContainer"),n.rContainer.appendChild(I()),n.daysContainer||(n.daysContainer=mn("div","flatpickr-days"),n.daysContainer.tabIndex=-1),E(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var e=Dn(n.config);n.timeContainer=mn("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var t=mn("span","flatpickr-time-separator",":"),a=vn("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=a.getElementsByTagName("input")[0];var r=vn("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});n.minuteElement=r.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=cn(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),n.minuteElement.value=cn(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():e.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(a),n.timeContainer.appendChild(t),n.timeContainer.appendChild(r),n.config.time_24hr&&n.timeContainer.classList.add("time24hr");if(n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var o=vn("flatpickr-second");n.secondElement=o.getElementsByTagName("input")[0],n.secondElement.value=cn(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():e.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(mn("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(o)}n.config.time_24hr||(n.amPM=mn("span","flatpickr-am-pm",n.l10n.amPM[sn((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM));return n.timeContainer}());pn(n.calendarContainer,"rangeMode","range"===n.config.mode),pn(n.calendarContainer,"animate",!0===n.config.animate),pn(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);var o=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!o&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var i=mn("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(i,n.element),i.appendChild(n.element),n.altInput&&i.appendChild(n.altInput),i.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){n.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+e+"]"),(function(t){return u(t,"click",n[e])}))}));if(n.isMobile)return void function(){var e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=mn("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr));n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d"));n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d"));n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step")));n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(e){}u(n.mobileInput,"change",(function(e){n.setDate(gn(e).value,!1,n.mobileFormatStr),K("onChange"),K("onClose")}))}();var e=dn(P,50);n._debouncedChange=dn(p,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&u(n.daysContainer,"mouseover",(function(e){"range"===n.config.mode&&F(gn(e))}));u(n._input,"keydown",L),void 0!==n.calendarContainer&&u(n.calendarContainer,"keydown",L);n.config.inline||n.config.static||u(window,"resize",e);void 0!==window.ontouchstart?u(window.document,"touchstart",D):u(window.document,"mousedown",D);u(window.document,"focus",D,{capture:!0}),!0===n.config.clickOpens&&(u(n._input,"focus",n.open),u(n._input,"click",n.open));void 0!==n.daysContainer&&(u(n.monthNav,"click",ee),u(n.monthNav,["keyup","increment"],d),u(n.daysContainer,"click",Y));if(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){var t=function(e){return gn(e).select()};u(n.timeContainer,["increment"],i),u(n.timeContainer,"blur",i,{capture:!0}),u(n.timeContainer,"click",h),u([n.hourElement,n.minuteElement],["focus","click"],t),void 0!==n.secondElement&&u(n.secondElement,"focus",(function(){return n.secondElement&&n.secondElement.select()})),void 0!==n.amPM&&u(n.amPM,"click",(function(e){i(e)}))}n.config.allowInput&&u(n._input,"blur",k)}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&c(n.config.noCalendar?n.latestSelectedDateObj:void 0),$(!1)),o();var a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&a&&B(),K("onReady")}(),n}function kn(e,t){for(var n=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement})),a=[],r=0;r<n.length;r++){var o=n[r];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=An(o,t||{}),a.push(o._flatpickr)}catch(e){console.error(e)}}return 1===a.length?a[0]:a}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return kn(this,e)},HTMLElement.prototype.flatpickr=function(e){return kn([this],e)});var Ln=function(e,t){return"string"==typeof e?kn(window.document.querySelectorAll(e),t):e instanceof Node?kn([e],t):kn(e,t)};Ln.defaultConfig={},Ln.l10ns={en:Mn({},ln),default:Mn({},ln)},Ln.localize=function(e){Ln.l10ns.default=Mn(Mn({},Ln.l10ns.default),e)},Ln.setDefaults=function(e){Ln.defaultConfig=Mn(Mn({},Ln.defaultConfig),e)},Ln.parseDate=wn({}),Ln.formatDate=Cn({}),Ln.compareDates=In,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return kn(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=Ln);var Fn=Ln;function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Rn(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Pn(Object(a),!0).forEach((function(t){jn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hn(e){var t=e.slots,n=e.onChoiceClick,a=e.localeText,r=e.locale;if(!n)return z.createElement(z.Fragment,null);var o,i,l,c,s,d=O(),u=O(),p=O(),m=O(),h=O(),f=O(),v=O(),g=t?Object.keys(t).sort():[],y=g&&g.length>0?g[0]:Ge().toISOString().split("T")[0],b=ze(Ge(),a,r),_=b.timezone,E=b.offset,T="https://npmcdn.com/flatpickr/dist/l10n/default.js";function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";if(u&&u.current&&u.current.firstChild&&!l){var n=y,a=g&&g.length>0?g[g.length-1]:"2100-12-31";e.enable&&e.enable.length>0&&(n=e.enable[0].from,a=e.enable[0].to),s=(0,nn.default)(u.current.firstChild,{locale:t,defaultDate:y,minDate:n,maxDate:a,inline:!0,monthSelectorType:"static",onReady:function(){I(u,y),I(h,y),l=y},onChange:function(t,n){l=n,i="",!e.isChat&&l&&D(),I(u,n),L(d,!0),I(h,n),L(m,!0)},enable:e.enable?e.enable:g})}}function w(){var t,n;u&&u.current&&u.current.appendChild(z.createElement(F,null)),h&&h.current&&h.current.appendChild(z.createElement(F,null)),qe(T,"flatpickr-script",!1).then((function(){var e,t;u&&u.current&&(null===(e=u.current.querySelector(".hb_connection_indicator"))||void 0===e||e.remove()),h&&h.current&&(null===(t=h.current.querySelector(".hb_connection_indicator"))||void 0===t||t.remove()),C(c)})).catch((function(e){var t,n;console.log("unable to load locale calendar .....",e),u&&u.current&&(null===(t=u.current.querySelector(".hb_connection_indicator"))||void 0===t||t.remove()),h&&h.current&&(null===(n=h.current.querySelector(".hb_connection_indicator"))||void 0===n||n.remove()),C()})),d&&d.current&&d.current.classList.replace("hb_modal_close","hb_modal_open"),m&&m.current&&(null===(t=m.current)||void 0===t||t.classList.replace("hb_modal_open","hb_modal_close")),p&&p.current&&(null===(n=p.current)||void 0===n||n.classList.add("hb_chat_overlay")),s&&Array.isArray(s)&&s.length>0&&s.setDate(l||y),e.forwardInstance&&s&&e.forwardInstance(s,S)}function I(n,r){if((o=t&&t[r]&&t[r].length>0?t[r]:e.defaultTimeSlots)&&o.length>0){var i="(".concat(a.TEXT_ANTE_MERIDIEM,"|").concat(a.TEXT_POST_MERIDIEM,")"),l=Ce.substring(0,Ce.length-2)+i+Ce.substring(Ce.length-1),c=new RegExp(l),s=o.map((function(e){if(c.test(e))return z.createElement("button",{type:"button",class:"hb_time_slots",onClick:function(t){return S(e,t)}},e);var t=-1!==e.indexOf(" ")?e.split(" "):[],n=t&&t.length>0?"am"===t[1].toLowerCase()?a.TEXT_ANTE_MERIDIEM:a.TEXT_POST_MERIDIEM:"";return z.createElement("button",{type:"button",class:"hb_time_slots",onClick:function(t){return S(e,t)}},t&&t.length>0?"".concat(t[0]," ").concat(n):e)}));if(n&&n.current&&n.current.lastChild)n.current.lastChild.innerHTML="";s.forEach((function(e){n&&n.current&&n.current.lastChild&&n.current.lastChild.appendChild(e)}))}}function x(){var t;d&&d.current&&d.current.classList&&d.current.classList.replace("hb_modal_open","hb_modal_close"),m&&(null===(t=m.current)||void 0===t||t.classList.replace("hb_modal_open","hb_modal_close")),p&&p.current&&p.current.classList&&p.current.classList.remove("hb_chat_overlay"),L(m,!0),L(d,!0),e.onModalClose&&e.onModalClose()}function S(t,n){var a,r;if(u&&u.current&&u.current.querySelectorAll(".hb_time_slots").forEach((function(e){e.classList.remove("selected")})),d&&(null===(a=d.current)||void 0===a?void 0:a.classList.contains("hb_modal_open"))&&(L(d,!1),L(m,!0)),h&&h.current&&h.current.querySelectorAll(".hb_time_slots").forEach((function(e){e.classList.remove("selected")})),m&&(null===(r=m.current)||void 0===r?void 0:r.classList.contains("hb_modal_open"))&&(L(m,!1),L(d,!0)),n)n.target.classList.add("selected");else if(u&&u.current){var o=-1;if(Array.from(u.current.querySelectorAll(".hb_time_slots")).some((function(e){return e.innerHTML===t&&e.classList.add("selected"),o++,e.innerHTML===t})),-1!==o&&u.current.lastChild){var c=u.current.children.length,s=u.current.children[c-1].children[o].offsetTop;u.current.children[c-1].scrollTop=s-100}}i=t,!e.isChat&&l&&i&&D()}function D(){n({date:l,time:i,timezone:_}),x()}function M(){if(l){var e=l.split("-"),t=Ge(l),n=Xe(r)||"en-US",a=t.toLocaleDateString(n,{month:"long"});return"".concat(a.substring(0,1).toUpperCase()).concat(a.substring(1)," ").concat(parseInt(e[2],10)>0?e[2]:"0".concat(e[2])," ").concat(e[0])}return""}function N(e){var t=null==s?void 0:s.currentMonth,n=null==s?void 0:s.currentYear,a=null==s?void 0:s.utils.getDaysInMonth(t,n),r=l?parseInt(l.split("-")[2],10):0,o=0;return r&&a&&(e<0?1===r?(void 0!==t&&n&&0===t?(null==s||s.changeYear(n-1),null==s||s.changeMonth(11,!1)):null==s||s.changeMonth(-1),o=(a=null==s?void 0:s.utils.getDaysInMonth(s.currentMonth,s.currentYear))||1):r<=a&&(o=r-1):e>0&&(r===a?(void 0!==t&&11===t&&n?(null==s||s.changeYear(n+1),null==s||s.changeMonth(0,!1)):null==s||s.changeMonth(1),o=1):r<a&&(o=r+1)),n=null==s?void 0:s.currentYear,t=null==s?void 0:s.currentMonth),void 0!==t?"".concat(n,"-").concat(t+1,"-").concat(o):l}function A(){var e=g?g.findIndex((function(e){return e===l})):-1;l=-1!==e?g.length>e+1?g[e+1]:l:N(1),s&&s.setDate(l),I(h,l),L(m,!0),f.current&&(f.current.children[0].innerHTML=M())}function k(){var e=g?g.findIndex((function(e){return e===l})):-1;l=-1!==e?e-1>-1?g[e-1]:l:N(-1),s&&s.setDate(l),I(h,l),L(m,!0),f.current&&(f.current.children[0].innerHTML=M())}function L(t,n){var a=t&&t.current?t.current.querySelector(".hb-btn-confirm"):null;"date"!==e.calendarType&&a&&(n?a.classList.contains("hb_disabled")||a.classList.add("hb_disabled"):a.classList.remove("hb_disabled"))}r&&(c=r.length>2&&!r.includes("zh-tw")?r.substring(0,2).toLowerCase():r.toLowerCase(),T="https://npmcdn.com/flatpickr/dist/l10n/".concat(c="en"===(c="zh-tw"===r?"zh_tw":c)?"default":c,".js"));var F=function(){return z.createElement("div",{class:"hb_connection_indicator"},z.createElement("div",{class:"spinner"}))},P=function(){return z.createElement("div",null,z.createElement("div",{className:"hb_date_cheveron_left",onClick:k},z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-chevron-left",viewBox:"0 0 16 16"},z.createElement("path",{"fill-rule":"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"}))),z.createElement("div",{ref:f,className:"hb_appointment_date"},z.createElement("span",null,M())),z.createElement("div",{className:"hb_date_cheveron_right",onClick:A},z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-chevron-right",viewBox:"0 0 16 16"},z.createElement("path",{"fill-rule":"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"}))))},R=function(){return z.createElement("div",{className:"hb_question"},z.createElement(tt,{classNames:e.showButton?["hb_choice"]:["hb_choice_hide"],clickFn:w,buttonRef:e.buttonRef,text:a.TEXT_SCHEDULE_MEETING}))},j=function(t){var n=g&&g.length>0||e.defaultTimeSlots&&e.defaultTimeSlots.length>0;return t.isMobile?n?z.createElement("div",{className:"hb_appointment_body hb_appointment_modal_mobile",ref:h},z.createElement("div",{className:"hb_date_switcher"}),z.createElement("div",{className:"hb_appointment_timezone"},a.TEXT_TIMEZONE," ",z.createElement("b",null,_)," (",E,")"),z.createElement("div",{className:"hb_calendar-timeslots"})):z.createElement(z.Fragment,null):z.createElement("div",{className:"hb_appointment_body",ref:u},z.createElement("div",{className:"hb_calendar-picker",id:"flatpickr"}),n&&z.createElement("div",{className:"hb_calendar-timeslots hb_appointment_modal_desktop"}))},H=function(e){return z.createElement("div",{className:"hb_appointment_header"},z.createElement("span",{className:"hb_appointment_header-text"},e.headerText),z.createElement("div",{className:"hb_appointment_modal_close",onClick:e.clickFn}),e.children)};if("date"===e.calendarType)return z.createElement((function(){return z.createElement(z.Fragment,null,z.createElement("div",{ref:p,className:""}),z.createElement("div",{className:"hb_question"},z.createElement(tt,{classNames:["hb_choice_hide"],clickFn:w,buttonRef:e.buttonRef,text:a.TEXT_SCHEDULE_MEETING})),z.createElement("div",{id:e.id,ref:d,className:"hb_appointment_modal hb_calendar_modal hb_appointment_modal_top hb_modal_close",role:"dialog","aria-modal":"true","aria-label":e.localeText?e.localeText.TEXT_ACCESSIBILITY_DATE:""},z.createElement("div",{className:"hb_calendar_body",ref:u},z.createElement("div",{className:"hb_calendar-picker",id:"flatpickr"})),z.createElement("span",{className:"hb_calendar_action_buttons"},z.createElement(tt,{classNames:["hb-btn-appointment","hb-btn-cancel"],clickFn:x,text:a.BUTTON_CANCEL_TEXT}),z.createElement(tt,{classNames:["hb-btn-appointment","hb-btn-confirm"],clickFn:D,text:a.BUTTON_CONFIRM_TEXT}))))}),null);if("body"===e.calendarType)return z.createElement("div",{ref:v},z.createElement(R,null),z.createElement(j,{isMobile:!1}),z.createElement(j,{isMobile:!0}));return z.createElement(z.Fragment,null,z.createElement("div",{ref:p,className:""}),z.createElement("div",{className:"hb_calendar"},z.createElement(R,null),z.createElement("div",{id:e.id,ref:d,className:"hb_appointment_modal ".concat(e.showButton?"":"hb_appointment_modal_top"," hb_modal_close"),role:"dialog","aria-modal":"true","aria-label":e.localeText?e.localeText.TEXT_ACCESSIBILITY_DATETIME:"",onKeyDown:function(e){e.stopPropagation(),e.code&&e.code.toLowerCase().includes("escape")&&(null==x||x())}},z.createElement(H,{headerText:"".concat(e.calendarHeading," ").concat(_),clickFn:x},z.createElement("span",{className:"hb_appointment_header-buttons hb_appointment_modal_desktop"},z.createElement(tt,{classNames:["hb-btn-appointment","hb-btn-cancel"],clickFn:x,text:a.BUTTON_CANCEL_TEXT}),z.createElement(tt,{classNames:["hb-btn-appointment","hb_disabled","hb-btn-confirm"],clickFn:D,text:a.BUTTON_CONFIRM_TEXT}))),z.createElement(j,{isMobile:!1}),z.createElement("span",{className:"hb_appointment_header-buttons hb_appointment_modal_mobile"},z.createElement(tt,{classNames:["hb-btn-appointment","hb_disabled","hb-btn-cancel"],text:a.BUTTON_BACK_TEXT}),z.createElement(tt,{classNames:["hb-btn-appointment","hb-btn-confirm"],clickFn:function(){var e,t;d&&(null===(e=d.current)||void 0===e||e.classList.replace("hb_modal_open","hb_modal_close")),m&&(null===(t=m.current)||void 0===t||t.classList.replace("hb_modal_close","hb_modal_open")),h.current&&h.current.children[0].appendChild(z.createElement(P,null))},text:a.BUTTON_NEXT_TEXT}))),z.createElement("div",{className:"hb_appointment_modal_mobile"},z.createElement("div",{ref:m,className:"hb_appointment_modal hb_modal_close"},z.createElement(H,{headerText:e.timeslotHeading,clickFn:x}),z.createElement(j,{isMobile:!0}),z.createElement("span",{className:"hb_appointment_header-buttons hb_appointment_modal_mobile"},z.createElement(tt,{classNames:["hb-btn-appointment","hb-btn-cancel"],clickFn:function(){var e;d&&d.current&&d.current.classList&&d.current.classList.replace("hb_modal_close","hb_modal_open"),m&&(null===(e=m.current)||void 0===e||e.classList.replace("hb_modal_open","hb_modal_close")),h&&h.current&&h.current.lastChild&&(h.current.lastChild.innerHTML="",I(h,l),L(m,!0),h.current.children[0].removeChild(h.current.children[0].children[0]))},text:a.BUTTON_BACK_TEXT}),z.createElement(tt,{classNames:["hb-btn-appointment","hb_disabled","hb-btn-confirm"],clickFn:D,text:a.BUTTON_CONFIRM_TEXT}))))))}function Bn(e){var t=ke.getState();switch(e.uiType){case ge.INLINE:case ge.POPUP:return z.createElement(z.Fragment,null,z.createElement(Hn,Rn(Rn({},e),{},{isChat:!1,openCalendar:!0,calendarType:"body",showButton:!1})),e.showButtonGroup&&z.createElement(kt,{primaryFn:e.primaryFn,primaryLabel:t.BUTTON_CONFIRM_TEXT,isPrimaryDisabled:!0,mutators:e.mutators,localeText:t},z.createElement("span",{class:"hb_input_error hb_slot_error",ref:e.errorRef},z.createElement("span",{class:"hb_input_alert hb_input_alert_color"}),z.createElement("span",{class:"hb_input_error_text"},t.ERROR_SELECTED_SLOT_NOT_AVAILABLE))));case ge.CHATBOT:default:return z.createElement(Hn,Rn(Rn({},e),{},{isChat:!0,showButton:e.showButton}))}}function Un(e){for(var t,n,a=O(),r=e.buttonRef||O(),o=K(),i=function(e){(e.type&&e.type.toLowerCase().includes("click")||e.code&&e.code.toLowerCase().includes("arrow"))&&(r&&r.current&&r.current.click(),a&&a.current&&(a.current.ariaExpanded="true"))},l=[],c=0;c<24;c++){var s=c;c<12?(s=0===c?12:c,l.push("".concat(s,":00 ").concat(e.localeText.TEXT_ANTE_MERIDIEM)),l.push("".concat(s,":30 ").concat(e.localeText.TEXT_ANTE_MERIDIEM))):(s=c-12==0?12:c-12,l.push("".concat(s,":00 ").concat(e.localeText.TEXT_POST_MERIDIEM)),l.push("".concat(s,":30 ").concat(e.localeText.TEXT_POST_MERIDIEM)))}var d=!e.uiType||e.uiType&&e.uiType===ge.CHATBOT;return z.createElement(z.Fragment,null,z.createElement("div",{class:d?"hb_chat_server":""},z.createElement(Zt,{title:e.title,text:e.text,onEnterClick:e.onEnterClick,inputRef:a,pattern:e.pattern,inputType:e.inputType,placeholder:e.placeholder,onClick:i,onInput:function(a){var r,i=new RegExp(Ee),l=Qe(Te,e.localeText),c=new RegExp(l);if(i.test(a.target.value)){var s=Ke(a.target.value);t.setDate(s,!0)}if(c.test(a.target.value)){var d=Ke(a.target.value);t.setDate(d.split("T")[0],!0);var u=a.target.value.split(",")[1].trim();n(u,"")}null===(r=o())||void 0===r||r.removePrimaryAttr("disabled")},onKeyPress:i,inputIcon:!0,id:e.id,textFieldClassNames:e.textFieldClassNames,hideFrame:e.hideFrame,uiType:e.uiType,ariaAttributes:{role:"combobox","aria-expanded":"false","aria-haspopup":"dialog","aria-controls":"calendar-".concat(e.id)},mutators:o,localeText:e.localeText})),z.createElement(Bn,{id:"calendar-".concat(e.id),onChoiceClick:function(e){var t;if(a&&a.current&&e.date){var n=e.date.split("-");a.current.value="".concat(n[2],"-").concat(n[1],"-").concat(n[0]).concat(e.time?", ".concat(e.time):""),a.current.focus();var r=new Event("hb_input_change",{});a.current.dispatchEvent(r),a.current.ariaExpanded="false",null===(t=o())||void 0===t||t.removePrimaryAttr("disabled")}},enable:[{from:"1901-01-01",to:"2100-12-31"}],defaultTimeSlots:"date"===e.inputType?[]:l,showButton:e.showOpenCalendarButton,showButtonGroup:!1,buttonRef:r,calendarType:d?e.inputType:"body",calendarHeading:e.calendarHeading,timeslotHeading:e.timeslotHeading,forwardInstance:function(e,a){t=e,n=a},localeText:e.localeText,locale:e.locale,uiType:e.uiType,onModalClose:function(){a&&a.current&&(a.current.ariaExpanded="false")}}))}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yn(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Vn(Object(a),!0).forEach((function(t){qn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function zn(e){var t=O(),n=O(),a=O(),r=e.pickerRef,o=e.formRef,i=!1,l=!1,c=!1,s="",d=function(){r&&r.current&&r.current.classList.toggle("hb_picker_focused")},u=function(e){e.code.toLowerCase().includes("arrow")&&e.preventDefault()},p=function(){if(n.current){var e=n.current.closest(".hb_chatbody");null==e||e.addEventListener("scroll",(function t(){f(!0),null==e||e.removeEventListener("scroll",t)}))}},m=function(e){n.current&&n.current.parentElement&&n.current.parentElement.parentElement&&n.current.parentElement.parentElement.parentElement&&(!i&&e?(n.current.parentElement.parentElement.parentElement.addEventListener("keydown",u),i=!0):i&&!e&&(n.current.parentElement.parentElement.parentElement.removeEventListener("keydown",u),i=!1))},h=function(){var e;if(n.current&&t.current&&r.current){var a,o=window.innerHeight,i=t.current.getBoundingClientRect(),l=i.height,c=i.y,s=r.current.getBoundingClientRect(),d=s.y,u=s.height,p=!!(d&&l&&o)&&d+u+l>o;p&&t.current.classList.add("hb_picker_top"),a=p?d-c+u:c-d-u,null===(e=t.current)||void 0===e||e.setAttribute("style","bottom:"+a+"px")}},f=function(e){var t;if((!e||c)&&(n.current&&n.current.parentElement&&n.current.parentElement.parentElement&&n.current.parentElement.parentElement.parentElement)){var a=n.current.parentElement.parentElement.parentElement;c?(a.lastChild&&a.removeChild(a.lastChild),a.lastChild&&(c=!1),r.current&&(r.current.children[0].ariaExpanded="false")):(a.appendChild(z.createElement(_,null)),c=!0,h(),m(!0),l||(null===(t=o.current)||void 0===t||t.addEventListener("keydown",(function(e){e.code.toLowerCase().includes("enter")&&e.preventDefault()})),l=!0),p(),r.current&&(r.current.children[0].ariaExpanded="true"))}},v=function(e){var n=t.current?t.current.children[0]:"",a=n?Array.from(n.children):"",r=-1,o=-1;if(a&&a.length>0){var i,l=Gn(a);try{for(l.s();!(i=l.n()).done;){var c=i.value,s=c.getAttribute("id")?c.getAttribute("id"):"",d=s&&-1!==s.indexOf("_")?parseInt(s.substring(s.indexOf("_")+1),10):-1;if(d!==e){var u=c?c.children.length:0,p=c&&u>0?c.children[u-1].getAttribute("class"):"";p&&p.includes("hb_picker_item_selected")&&(r=d);var m=c?c.getAttribute("class"):"";m&&m.includes("hb_picker_item_searched")&&(o=d)}}}catch(e){l.e(e)}finally{l.f()}}return{searchedIndex:o,selectedIndex:r}},g=function(e,n){if(-1!==e){var a=v(e),r=a.selectedIndex,o=a.searchedIndex,i=t.current?t.current.children[0]:"";if(-1!==r&&n){var l=i?i.children[r]:"";l&&l.lastChild&&(l.ariaSelected="false"),l&&l.lastChild&&l.removeChild(l.lastChild)}if(-1!==o){var c=i?i.children[o]:"";c&&c.classList.remove("hb_picker_item_searched")}}},y=function(e){var n=-1;if(e.type&&e.type.toLowerCase().includes("click")){f(!1);var o=v(),i=o.searchedIndex,l=o.selectedIndex;-1===i&&(n=-1===l?0:l)}else if(e.code&&e.code.toLowerCase().includes("arrow")){!c&&f(!1);var s=v(),d=s.searchedIndex,u=s.selectedIndex,p=t.current?t.current.children[0]:"",h=p?Array.from(p.children):"";(n=-1===d?-1===u?0:u:e.code.toLowerCase().includes("up")?d-1:d+1)<0?n=0:n>=h.length&&(n=h.length-1)}else if(e.code&&e.code.toLowerCase().includes("enter")){var y=v().searchedIndex;-1!==y&&b(y),f(!0),m(!0)}else e.code&&e.code.toLowerCase().includes("tab")?(a.current&&(a.current.autofocus=!0),f(!0)):e.code&&e.code.toLowerCase().includes("escape")&&f(!0);!function(e){if(-1!==e&&t.current&&t.current.firstChild){var n=t.current.children[0].children[e].offsetTop;t.current.scrollTop=n,t.current.children[0].children[e].classList.add("hb_picker_item_searched"),r.current&&r.current.children[0].setAttribute("aria-activedescendant",t.current.children[0].children[e].id)}g(e,!1)}(n)},b=function(n){var a,o=t.current?t.current.children[0]:"",i=o?o.children[n].children[0].dataset.value:"";if(r&&r.current&&i&&(r.current.children[0].value=i),i&&(null===(a=r.current)||void 0===a||a.children[0].removeAttribute("style")),o){var l=o.children[n].children.length,c=o.children[n].children[l-1].getAttribute("class");(null==c?void 0:c.includes("hb_picker_item_selected"))||(o.children[n].appendChild(z.createElement("div",{class:"hb_picker_item_selected"})),o.children[n].ariaSelected="true",s=i)}g(n,!0),m(!1),e.removeErrorText&&e.removeErrorText()};window.onclick=function(e){var t=e.composedPath();if(t&&t.length>0){var n=t[0];n.classList.contains("hb_picker")||n.classList.contains("hb_picker_input")||n.classList.contains("hb_picker_down_icon")||f(!0)}};var _=function(n){var a=r.current&&r.current.firstChild?r.current.children[0].value:"",o=n.items?n.items.length>0?n.items:[""]:a?e.options.filter((function(e){return e.startsWith(a)})):e.options;return o&&0===o.length&&o.push(""),z.createElement("div",{class:"hb_picker_popover hb_picker_show ".concat(e.pickerPopoverClassNames&&e.pickerPopoverClassNames.length>0?e.pickerPopoverClassNames.join(" "):""),ref:t},z.createElement("ul",{class:"hb_picker_menu",id:"hb_picklist",role:"listbox","aria-label":e.localeText?e.localeText.TEXT_ACCESSIBILITY_PICKLIST:""},o.map((function(t,n){return z.createElement("li",{class:"hb_picker_menu_item",id:"item_".concat(n),onClick:function(e){return t?b(n):""},onKeyDown:function(e){return t?y(e):""},role:"option","aria-label":t||e.localeText.TEXT_NO_MATCH_FOUND,"aria-selected":s&&t.startsWith(s)?"true":"false"},z.createElement("span",{class:"hb_picker_menu_item_label","data-value":t||""},t||e.localeText.TEXT_NO_MATCH_FOUND),s&&t.startsWith(s)&&z.createElement("div",{class:"hb_picker_item_selected"}))}))))};return z.createElement("div",{ref:n},z.createElement(Ft,{text:e.label,uiType:e.uiType,isMessageOnly:!0,localeText:e.localeText}),z.createElement("form",{ref:o,onSubmit:function(e){return e.preventDefault()}},z.createElement("div",{class:"hb_input_container"},z.createElement("div",{ref:r,class:"hb_picker"},z.createElement("input",{type:"text",onClick:y,class:"hb_picker_input",onKeyDown:y,onInput:function(){!c&&f(!1);var a=r.current&&r.current.firstChild?r.current.children[0].value:"";""===a&&(s=""),function(e){var a;if(e&&n.current&&n.current.parentElement&&n.current.parentElement.parentElement&&n.current.parentElement.parentElement.parentElement){var r=n.current.parentElement.parentElement.parentElement;c&&(null===(a=t.current)||void 0===a||a.remove(),r.appendChild(z.createElement(_,{items:e})),h())}}(e.options.filter((function(e){return e.toLowerCase().startsWith(a.toLowerCase())}))),e.removeErrorText&&e.removeErrorText()},placeholder:e.placeholder,"data-type":"picker",title:e.localeText.ERROR_PICKLIST,role:"combobox","aria-expanded":"false","aria-activedescendant":"","aria-controls":"hb_picklist",onFocus:d,onBlur:d}),z.createElement("div",{class:"hb_picker_down_icon",onClick:y,onKeyDown:y})),e.isChat?z.createElement(tt,{clickFn:e.submitFn,keyDownFn:e.submitFn,buttonRef:a,classNames:["hb_input_button"],ariaLabel:e.localeText?e.localeText.TEXT_ACCESSIBILITY_INFO_BUTTON:""},z.createElement("div",{class:"hb_input_button_icon"})):""),e.children))}function Kn(e){var t=O(),n=O(),a=function(){var e;n&&n.current&&(null===(e=n.current.querySelector(".hb_input_error"))||void 0===e||e.remove())},r=function(r){var o,i=t.current&&t.current.firstChild?t.current.children[0].value:"";-1===e.options.findIndex((function(e){return e.toLowerCase()===i.toLowerCase()}))&&t.current&&(t.current.children[0].value="",i=""),t.current&&t.current.firstChild&&(t.current.children[0].setCustomValidity(""),t.current.children[0].validity.valid&&""!==t.current.children[0].value||(a(),null===(o=n.current)||void 0===o||o.appendChild(z.createElement("span",{class:"hb_input_error"},z.createElement("span",{class:"hb_input_alert"}),e.localeText.ERROR_PICKLIST)))),n.current&&!n.current.reportValidity()||r&&r.code&&!r.code.toLowerCase().includes("enter")||i&&e.onOptionSelect(i)};switch(e.uiType){case ge.INLINE:case ge.POPUP:return z.createElement(zn,Yn(Yn({},e),{},{pickerClassNames:["hb_cf_picker"],pickerPopoverClassNames:["hb_cf_popover"],isChat:!1,pickerRef:t,formRef:n,removeErrorText:a}),z.createElement(kt,{primaryFn:r,localeText:e.localeText}));case ge.CHATBOT:default:return z.createElement(zn,Yn(Yn({},e),{},{isChat:!0,pickerRef:t,formRef:n,submitFn:r,removeErrorText:a}))}}function Qn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Wn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.infoInputType="^.{1,}$",this.max=2147483647,this.min=0,this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return"info"===e}}],(n=[{key:"handleMessage",value:function(e,t,n,a,r){var o,i,l,c,s,d,u,p,m,h,f,v,g=this,y=e,b=Ze(e.playbookType,r);if("info_answer"===y.type){if(this.textInfoId&&this.api.removeFromChatFrame(this.textInfoId),y.payload&&y.payload.label?this.api.addToChatFrame({style:"server",messageType:(null===(o=null==y?void 0:y.payload)||void 0===o?void 0:o.type)||(null==y?void 0:y.type),content:z.createElement("div",null,z.createElement("div",{className:"bot_2_avatar"},z.createElement("div",{className:"bot_2"})),z.createElement("div",{class:"hb_message"},Ye(y.payload.label)))}):this.labelText&&this.api.addToChatFrame({style:"server",messageType:(null===(i=null==y?void 0:y.payload)||void 0===i?void 0:i.type)||(null==y?void 0:y.type),content:z.createElement("div",null,z.createElement("div",{className:"bot_2_avatar"},z.createElement("div",{className:"bot_2"})),z.createElement("div",{class:"hb_message"},Ye(this.labelText)||n.LABEL_EMAIL))}),y.payload&&y.payload.inputVal){var _="date"===y.payload.type||"datetime"===y.payload.type?function(e,t){try{var n=-1!==e.indexOf("T")?e.split("T"):[e],a=n&&n.length>0?n[0].trim().split("-"):"",r=a&&a.length>0?"".concat(a[2],"-").concat(a[1],"-").concat(a[0]):n[0],o=n&&n.length>1?n[1].trim().split(":"):[],i=o&&o.length>0?"".concat(parseInt(o[0],10)>12?parseInt(o[0],10)-12:(parseInt(o[0],10)+11)%12+1,":").concat(o[1]," ").concat(parseInt(o[0],10)>11?t.TEXT_POST_MERIDIEM:t.TEXT_ANTE_MERIDIEM):"";return"".concat(r).concat(i?", ".concat(i):"")}catch(e){return console.log(e),""}}(y.payload.inputVal,n):y.payload.inputVal;this.api.addToChatFrame({style:"client",messageType:(null===(l=null==y?void 0:y.payload)||void 0===l?void 0:l.type)||(null==y?void 0:y.type),content:z.createElement("div",{class:"hb_answer"},_)})}}else{var E=e;this.cardType=E.payload&&E.payload.type;var T=function(a){var r;if("string"!=typeof a){var o=a.currentTarget.querySelector(".hb_input");r=E.payload&&"email"===E.payload.type?o.value.toLowerCase():o.value,r=!E.payload||"date"!==E.payload.type&&"datetime"!==E.payload.type?o.value:Ke(o.value)}else r=E.payload&&"email"===E.payload.type?a.toLowerCase():a,r=!E.payload||"date"!==E.payload.type&&"datetime"!==E.payload.type?a:Ke(a);var i={id:e.id,type:"info_answer",sender:"client",payload:{label:E.payload&&"boolean"!==E.payload.type?E.payload.text:"",type:E.payload?E.payload.type:"",inputVal:r},playbookType:e.playbookType};b&&g.handleMessage(i,t,n),g.api.removeFromChatFrame(g.textInfoId),g.api.sendMessage(i),E.payload&&["email","phone"].some((function(e){return e===g.cardType}))&&g.api.dispatchCallbackEvent("email"===g.cardType?we.CONVERSATION_INPUT_EMAIL:we.CONVERSATION_INPUT_PHONE)};if(E.payload&&"boolean"===E.payload.type)b&&this.api.addToChatFrame({style:"server",messageType:(null===(c=null==E?void 0:E.payload)||void 0===c?void 0:c.type)||(null==E?void 0:E.type),content:z.createElement(Ft,{text:E.payload?E.payload.text:"",uiType:r&&r.type,localeText:n})}),this.textInfoId=this.api.addToChatFrame({content:z.createElement(Ht,{text:E.payload?E.payload.text:"",choices:E.payload?E.payload.choices:[],onChoiceClick:T,hideFrame:function(){return g.api.showChatFrame(!1)},uiType:r&&r.type,id:t,localeText:n}),style:"unformatted",messageType:(null===(s=null==E?void 0:E.payload)||void 0===s?void 0:s.type)||(null==E?void 0:E.type)});else if(E.payload&&E.payload.pickList&&E.payload.pickList.length>0)this.labelText=E.payload?E.payload.text:"",this.textInfoId=this.api.addToChatFrame({style:b?"server":"unformatted",content:z.createElement(Kn,{id:t,uiType:r&&r.type,label:E.payload.text,placeholder:E.payload.placeholder,options:E.payload.pickList||[],onOptionSelect:T,localeText:n,hideFrame:function(){return g.api.showChatFrame(!1)}}),messageType:(null===(d=null==E?void 0:E.payload)||void 0===d?void 0:d.type)||(null==E?void 0:E.type)});else if(E.payload&&"datetime"===E.payload.type||"date"===E.payload.type){this.labelText=E.payload?E.payload.text:"",E.payload&&"date"===E.payload.type?(this.infoInputType=Ee,this.titleMsg=n.ERROR_DATE):E.payload&&"datetime"===E.payload.type&&(this.infoInputType=Qe(Te,n),this.titleMsg=n.ERROR_DATETIME);var C=O();this.textInfoId=this.api.addToChatFrame({content:z.createElement(Un,{text:E.payload.text,placeholder:E.payload.placeholder,onEnterClick:T,title:this.titleMsg,inputType:E.payload.type,pattern:this.infoInputType,calendarHeading:"date"===E.payload.type?n.TEXT_SELECT_DATE_IN_TIMEZONE:n.TEXT_SELECT_DATE_N_TIME_IN_TIMEZONE,timeslotHeading:n.TEXT_SELECT_TIME_IN_TIMEZONE,showOpenCalendarButton:!1,localeText:n,locale:a||"en-US",id:t,textFieldClassNames:b?void 0:["hb_cf_input"],hideFrame:function(){return g.api.showChatFrame(!1)},buttonRef:C,uiType:r&&r.type}),style:"unformatted",messageType:(null===(u=null==E?void 0:E.payload)||void 0===u?void 0:u.type)||(null==E?void 0:E.type)}),b||null===(p=C.current)||void 0===p||p.click()}else if(this.labelText=E.payload?E.payload.text:"",E.payload&&"phone"===E.payload.type?(this.infoInputType="^[0-9-+\\s()]{10,18}$",this.titleMsg=n.ERROR_PHONE):E.payload&&"email"===E.payload.type?(this.infoInputType="".concat(be).concat(_e),this.titleMsg=n.ERROR_EMAIL,(null===(m=E.payload.metadata)||void 0===m?void 0:m.restrictedEmailDomains)&&(this.infoInputType="".concat(be).concat(E.payload.metadata.restrictedEmailDomains.map((function(e){return"(?!".concat(e,")")})).join("")).concat(_e),this.titleMsg=n.ERROR_BUSINESS_EMAIL),E.payload.type="text"):E.payload&&"integer"===E.payload.type?(this.titleMsg=n.ERROR_INTEGER,this.infoInputType="[0-9]+"):E.payload&&"float"===E.payload.type&&(this.titleMsg=n.ERROR_FLOAT),E.payload&&this.infoInputType){var w="integer"===E.payload.type||"float"===E.payload.type?"number":E.payload.type,I="integer"===E.payload.type?1:1e-6,x="integer"===E.payload.type?function(e){return/[0-9]/.test(e.key)||"Enter"===e.key}:void 0;this.titleMsg=this.titleMsg||n.ENTER_MESSAGE+(f=E.payload.text||E.payload.placeholder,(v=(new DOMParser).parseFromString(f,"text/html")).documentElement.textContent||v.documentElement.innerText);var S=this.titleMsg||n.ERROR_REQUIRED;this.textInfoId=this.api.addToChatFrame({style:b?"server":"unformatted",content:z.createElement(Zt,{text:E.payload.text,placeholder:E.payload.placeholder,onEnterClick:T,title:this.titleMsg,error:S,inputType:w,pattern:this.infoInputType,max:this.max,min:this.min,step:I,onKeyPress:x,id:t,uiType:r&&r.type,textFieldClassNames:b?void 0:["hb_cf_input"],hideFrame:function(){return g.api.showChatFrame(!1)},localeText:n}),messageType:(null===(h=null==E?void 0:E.payload)||void 0===h?void 0:h.type)||(null==E?void 0:E.type)})}}}},{key:"handleReplay",value:function(e,t,n,a,r){var o=this;e.forEach((function(e){return o.handleMessage(e,t,n,a,r)}))}}])&&Qn(t.prototype,n),a&&Qn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Jn(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Zn(Object(a),!0).forEach((function(t){$n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e){return z.createElement("div",null,z.createElement(Ft,{text:e.localeText.TEXT_SCHEDULE_APPOINTMENT,uiType:e.uiType,isMessageOnly:!0,localeText:e.localeText},z.createElement("div",{class:"calandar-profile-container ".concat(e.calendarAvatarClassnames&&e.calendarAvatarClassnames.length>0?e.calendarAvatarClassnames.join(" "):"")},e.avatar&&z.createElement("img",{width:"50",height:"50",alt:e.localeText?e.localeText.TEXT_ALT_CALENDAR_AVATAR_:"",src:e.avatar}),e.profile&&e.profile.name&&z.createElement("div",null,e.profile.name))))}function ta(e){switch(e.uiType){case ge.INLINE:case ge.POPUP:return z.createElement(ea,Jn(Jn({},e),{},{isChat:!1,calendarAvatarClassnames:["hb_cf_calendar_avatar"]}));case ge.CHATBOT:default:return z.createElement(ea,Jn(Jn({},e),{},{isChat:!0}))}}function na(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var aa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return e===ue.CALENDAR_INFO||e===ue.EMAIL_RESPONSE||e===ue.EMAIL_REQUEST||e===ue.CALENDAR_GET||e===ue.BOOKING_REQUEST||e===ue.BOOKING_RESPONSE}}],(n=[{key:"handleMessage",value:function(e,t,n,a,r,o){var i,l,c,s,d,u,p,m,h,f,v,g,y,b=this,_=ue.BOOKING_REQUEST,E=ue.BOOKING_RESPONSE,T=ue.CALENDAR_INFO,C=ue.EMAIL_REQUEST,w=ue.EMAIL_RESPONSE,I=Ze(e.playbookType,r);switch(e.type){case _:var O={date:e.payload.date||"",time:e.payload.time||""};this.slotInfo=O;break;case E:if(e.payload.isSuccess){if(this.slotInfo&&(null===(i=this.slotInfo)||void 0===i?void 0:i.date)&&this.slotInfo.time){var x,S=new Date("".concat(null===(l=this.slotInfo)||void 0===l?void 0:l.date.replace(/-/g,"/")," ").concat(null===(c=this.slotInfo)||void 0===c?void 0:c.time)),D=ze(S,n,a).timezone,M=Xe(a)||"en-US",N=this.api.addToChatFrame({style:I?"client":"unformatted",content:z.createElement("div",{class:"hb_answer"},n.TEXT_MEETING_SCHEDULE," ",z.createElement("b",null,S.toLocaleDateString(M,xe)," ",D)),messageType:E});if(o||this.api.dispatchCallbackEvent(we.CONVERSATION_MEETING_BOOKED,{meetingInfo:{datetime_local:"".concat(S.toLocaleDateString(M,xe)),datetime_utc:S.toISOString(),timezone:D},agentName:(null===(s=this.meetingAgentProfile)||void 0===s?void 0:s.name)||"",agentId:(null===(d=this.meetingAgentProfile)||void 0===d?void 0:d.id)||""}),this.calanderModalId&&(this.api.removeFromChatFrame(this.calanderModalId),this.calanderModalId=void 0),!I)x=this.api.addToChatFrame({style:I?"server":"unformatted",content:z.createElement(kt,{onlyClose:e.isFinalMessage,closeFn:function(){b.api.showChatFrame(!1)},primaryFn:function(){b.api.removeFromChatFrame(N),b.api.removeFromChatFrame(x),b.api.sendMessage({})},localeText:n}),messageType:"action_buttons"})}}else this.handleCalendarError(e,t,n,a,r,I);break;case C:var A="".concat(be).concat(_e),k=n.ERROR_EMAIL,L=e.payload.restrictedEmailDomains;L&&(A="".concat(be).concat(L.map((function(e){return"(?!".concat(e,")")})).join("")).concat(_e),k=n.ERROR_BUSINESS_EMAIL),this.textInfoId=this.api.addToChatFrame({style:I?"server":"unformatted",content:z.createElement(Zt,{id:t,text:"<p>".concat(n.LABEL_EMAIL,"</p>"),title:k,pattern:A,uiType:r&&r.type,textFieldClassNames:I?void 0:["hb_cf_input"],placeholder:"email@company.com",onEnterClick:function(r){var o="string"!=typeof r?r.currentTarget.querySelector(".hb_input"):r;b.emailAddress=o?o.toLowerCase():o,b.textInfoId&&b.api.removeFromChatFrame(b.textInfoId);var i={id:e.id,sender:"client",type:w,payload:{type:"email",inputVal:b.emailAddress}};b.api.sendMessage(i),b.api.dispatchCallbackEvent(we.CONVERSATION_INPUT_EMAIL),I&&b.handleMessage(i,t,n,a)},inputType:"email",hideFrame:function(){return b.api.showChatFrame(!1)},localeText:n}),messageType:"input_email"});break;case w:this.textInfoId&&this.api.removeFromChatFrame(this.textInfoId),this.emailAddress=e.payload.inputVal,this.api.addToChatFrame({messageType:"email_label",style:"server",content:z.createElement("div",null,z.createElement("div",{className:"bot_2_avatar"},z.createElement("div",{className:"bot_2"})),z.createElement("div",{class:"hb_message"},n.LABEL_EMAIL))}),this.api.addToChatFrame({messageType:"email_val",style:"client",content:z.createElement("div",{class:"hb_answer"},e.payload.inputVal)});break;case T:e.payload.isSuccess?(this.meetingAgentProfile=null===(p=null===(u=e.payload)||void 0===u?void 0:u.response)||void 0===p?void 0:p.profile,this.profileCardId=this.api.addToChatFrame({style:I?"server":"unformatted",content:z.createElement(ta,{avatar:null!==(v=null===(f=null===(h=null===(m=e.payload)||void 0===m?void 0:m.response)||void 0===h?void 0:h.profile)||void 0===f?void 0:f.avatar)&&void 0!==v?v:Se,profile:null===(y=null===(g=e.payload)||void 0===g?void 0:g.response)||void 0===y?void 0:y.profile,localeText:n,uiType:r&&r.type}),messageType:"calendar_profile_card"}),e.isMeetingBooked||this.handleCalendar(n,t,a,e,r,I)):this.handleCalendarError(e,t,n,a,r,I)}}},{key:"handleCalendar",value:function(e,t,n,a,r){var o,i,l,c,s=this,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=ue.BOOKING_REQUEST,p=K();if(a){var m,h=null===(i=null===(o=a.payload)||void 0===o?void 0:o.response)||void 0===i?void 0:i.meetingDuration,f=function(t){var r,o,i,l,c,m,h,f,v,g,y,b;t.profileId=null===(i=null===(o=null===(r=a.payload)||void 0===r?void 0:r.response)||void 0===o?void 0:o.profile)||void 0===i?void 0:i.id;var _={id:a.id,type:u,sender:"client",payload:t,playbookType:a.playbookType};if(s.slotInfo=t,d){s.api.sendMessage(_);var E=new Date("".concat(null===(l=s.slotInfo)||void 0===l?void 0:l.date.replace(/-/g,"/")," ").concat(null===(c=s.slotInfo)||void 0===c?void 0:c.time)),T=ze(E,e,n).timezone,C=Xe(n)||"en-US";s.api.dispatchCallbackEvent(we.CONVERSATION_MEETING_REQUESTED,{meetingInfo:{datetime_local:"".concat(E.toLocaleDateString(C,xe)),datetime_utc:E.toISOString(),timezone:T},agentName:(null===(f=null===(h=null===(m=a.payload)||void 0===m?void 0:m.response)||void 0===h?void 0:h.profile)||void 0===f?void 0:f.name)||"",agentId:(null===(y=null===(g=null===(v=a.payload)||void 0===v?void 0:v.response)||void 0===g?void 0:g.profile)||void 0===y?void 0:y.id)||""}),s.calanderModalId&&(s.api.removeFromChatFrame(s.calanderModalId),s.calanderModalId=void 0)}else s.messageAnswer=_,s.noSlotsErrorRef&&s.noSlotsErrorRef.current&&s.noSlotsErrorRef.current.classList.contains("hb_slot_error_show")&&s.noSlotsErrorRef.current.classList.remove("hb_slot_error_show"),null===(b=p())||void 0===b||b.removePrimaryAttr("disabled")};d||(m=O(),this.noSlotsErrorRef=O());var v=function(){var t,r,o,i,l,c,d,u;if(s.messageAnswer&&(null===(t=s.messageAnswer.payload)||void 0===t?void 0:t.date)&&s.messageAnswer.payload.time){s.api.sendMessage(s.messageAnswer);var p=new Date("".concat(null===(r=s.messageAnswer.payload)||void 0===r?void 0:r.date.replace(/-/g,"/")," ").concat(s.messageAnswer.payload.time)),m=ze(p,e,n).timezone,h=Xe(n)||"en-US";s.api.dispatchCallbackEvent(we.CONVERSATION_MEETING_REQUESTED,{meetingInfo:{datetime_local:"".concat(p.toLocaleDateString(h,xe)),datetime_utc:p.toISOString(),timezone:m},agentName:(null===(l=null===(i=null===(o=a.payload)||void 0===o?void 0:o.response)||void 0===i?void 0:i.profile)||void 0===l?void 0:l.name)||"",agentId:(null===(u=null===(d=null===(c=a.payload)||void 0===c?void 0:c.response)||void 0===d?void 0:d.profile)||void 0===u?void 0:u.id)||""}),s.api.removeFromChatFrame(s.profileCardId),s.calanderModalId&&(s.api.removeFromChatFrame(s.calanderModalId),s.calanderModalId=void 0),s.messageAnswer=void 0}};this.calanderModalId&&(this.api.removeFromChatFrame(this.calanderModalId),this.calanderModalId=void 0),this.calanderModalId=this.api.addToChatFrame({style:"unformatted",content:z.createElement(Bn,{id:"calendar-".concat(t),onChoiceClick:f,slots:null===(c=null===(l=a.payload)||void 0===l?void 0:l.response)||void 0===c?void 0:c.slots,calendarHeading:e.TEXT_SCHEDULE_MEETING_IN_TIMEZONE.replace(/{{\d+}}/,"".concat(h||30)),timeslotHeading:e.TEXT_SCHEDULE_MEETING,localeText:e,locale:n||"en-US",buttonRef:m,secondaryFn:function(){return s.api.showChatFrame(!1)},primaryFn:v,showButtonGroup:!0,showButton:!0,errorRef:this.noSlotsErrorRef,mutators:p,uiType:r&&r.type}),messageType:"calendar_picker"}),d||m&&m.current&&m.current.click()}}},{key:"handleCalendarError",value:function(e,t,n,a,r){var o,i,l=this,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=ue.CALENDAR_GET,d=me.UNAVAILABLE_SLOT,u=me.NO_SLOTS_AVAILABLE,p=function(){var t={id:e.id,type:s,sender:"client"};l.api.sendMessage(t),l.retryAppointment&&l.api.removeFromChatFrame(l.retryAppointment),l.calendarRetry&&!c&&l.api.removeFromChatFrame(l.calendarRetry)};switch(null===(i=null===(o=e.payload)||void 0===o?void 0:o.error)||void 0===i?void 0:i.errorCode){case d:var m=this.api.getHistory().find((function(e){return"calendar_info"===e.type}));c?(this.api.addToChatFrame({messageType:d,style:"server",content:z.createElement(Ft,{text:"<p>".concat(n.ERROR_SELECTED_SLOT_NOT_AVAILABLE,"</p>"),uiType:r&&r.type,localeText:n})}),this.handleCalendar(n,t,a,m,r,c)):m&&(this.handleMessage(m,t,n,a,r,!1),this.noSlotsErrorRef&&this.noSlotsErrorRef.current&&!this.noSlotsErrorRef.current.classList.contains("hb_slot_error_show")&&this.noSlotsErrorRef.current.classList.add("hb_slot_error_show"));break;case u:this.api.addToChatFrame({messageType:u,style:"server",content:z.createElement(Ft,{text:"<p>".concat(n.ERROR_NO_SLOTS_AVAILABLE,"</p>"),uiType:r&&r.type,localeText:n})});break;default:this.calendarRetry=this.api.addToChatFrame({messageType:"retry_calendar",style:"server",content:z.createElement(Ft,{text:"<p>".concat(n.ERROR_CONNECTIVITY,"</p>"),uiType:r&&r.type,localeText:n})}),this.retryAppointment=this.api.addToChatFrame({messageType:"retry_appointment",content:z.createElement("div",{className:"hb_question hb_btn_group"},z.createElement("button",{className:"hb_choice hb_retry",onClick:function(){return p()}},n.BUTTON_RETRY_TEXT))})}}},{key:"handleReplay",value:function(e,t,n,a,r){var o=this;e.forEach((function(e){return o.handleMessage(e,t,n,a,r,!0)}))}}])&&na(t.prototype,n),a&&na(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oa(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?ra(Object(a),!0).forEach((function(t){ia(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ra(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function la(e){var t=e.localeText;return z.createElement("div",{id:e.id,class:e.classNames},z.createElement(Ft,{uiType:e.uiType,text:"",isMessageOnly:!0,localeText:t||{}}),z.createElement(tt,{classNames:["pdf"],clickFn:e.clickFn,ariaLabel:t?t.TEXT_ACCESSIBILITY_PDF_BUTTON:""},z.createElement("div",{class:"content"},Ye('<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n<defs>\n  <style>\n    .cls-1 {\n      fill: #fff;\n    }\n\n    .cls-2 {\n      fill: #ff2116;\n    }\n\n    .cls-3 {\n      fill: #2c2c2c;\n    }\n\n    .cls-4 {\n      fill: #fa0f00;\n    }\n  </style>\n</defs>\n<g id="Path">\n  <path id="white_bg" class="cls-1" d="M8.5,47.25A3.71357,3.71357,0,0,1,4.75,43.5V4.5A3.71357,3.71357,0,0,1,8.5.75H31.6a2.96151,2.96151,0,0,1,2.1.9L41.35,9.3a2.96151,2.96151,0,0,1,.9,2.1V43.5a3.71357,3.71357,0,0,1-3.75,3.75Z"/>\n  <path id="red_outline" class="cls-2" d="M31.6,1.5a3.14541,3.14541,0,0,1,1.65.6L40.9,9.75a3.14541,3.14541,0,0,1,.6,1.65V43.5a3.00882,3.00882,0,0,1-3,3H8.5a3.00882,3.00882,0,0,1-3-3V4.5a3.00882,3.00882,0,0,1,3-3H31.6m0-1.5H8.5A4.41968,4.41968,0,0,0,4,4.5v39A4.41968,4.41968,0,0,0,8.5,48h30A4.41968,4.41968,0,0,0,43,43.5V11.4a4.31249,4.31249,0,0,0-1.05-2.7L34.3,1.05A4.67268,4.67268,0,0,0,31.6,0Z"/>\n  <path id="PDF" class="cls-3" d="M15.8575,34.326v-.015l.0015-.0135.003-.012.006-.0105.0075-.009.012-.006.0135-.0045.018-.0015c.051-.003.105-.0045.162-.0075s.1155-.0045.1785-.006c.0615-.0015.126-.0045.192-.006l.204-.0045c.0705-.0015.141-.003.2145-.003.0735-.0015.147-.0015.2235-.003s.1515-.0015.2295-.0015h.234a4.149,4.149,0,0,1,.615.0435,3.04072,3.04072,0,0,1,.5235.126,2.38345,2.38345,0,0,1,.4365.201,1.96672,1.96672,0,0,1,.351.267,1.84339,1.84339,0,0,1,.456.699,2.33244,2.33244,0,0,1,.111.417,2.76108,2.76108,0,0,1,.036.45,2.89035,2.89035,0,0,1-.0525.5625,2.17929,2.17929,0,0,1-.1515.4785,1.9453,1.9453,0,0,1-.24.3975,1.885,1.885,0,0,1-.318.3195,2.20991,2.20991,0,0,1-.3855.2445,2.65255,2.65255,0,0,1-.4425.171,3.35963,3.35963,0,0,1-.489.1005,3.98766,3.98766,0,0,1-.5235.033h-.084c-.0255,0-.0495,0-.072-.0015-.0225,0-.042-.0015-.063-.0015-.0195,0-.039-.0015-.057-.0015s-.036-.0015-.0525-.0015c-.018,0-.0345-.0015-.0525-.0015s-.036,0-.054-.0015h-.06v2.448a.06713.06713,0,0,1-.0015.018l-.003.015-.0045.012-.0075.0105-.0105.0075c-.0045.0015-.0075.0045-.012.0045l-.015.003H15.931l-.018-.0015-.015-.003-.012-.0045-.0105-.0075-.0075-.0105c-.0015-.0045-.0045-.00749-.0045-.012l-.003-.015v-6.003C15.8575,34.7535,15.8575,34.326,15.8575,34.326ZM16.99,37.704c.018.0015.036.003.054.003s.036.0015.054.003c.018,0,.036.0015.054.0015s.0375.0015.057.0015h.297c.093,0,.1845-.0045.276-.0135a2.083,2.083,0,0,0,.2625-.0435,1.53645,1.53645,0,0,0,.243-.0795,1.12694,1.12694,0,0,0,.216-.1215,1.01008,1.01008,0,0,0,.1815-.168.96239.96239,0,0,0,.138-.2205,1.21759,1.21759,0,0,0,.0885-.279,1.72779,1.72779,0,0,0,.0315-.3435,1.69693,1.69693,0,0,0-.0225-.2835,1.2471,1.2471,0,0,0-.0675-.2475,1.00012,1.00012,0,0,0-.111-.21.96659.96659,0,0,0-.1515-.171,1.04123,1.04123,0,0,0-.192-.1335,1.31628,1.31628,0,0,0-.2295-.096,1.58474,1.58474,0,0,0-.267-.057,2.38712,2.38712,0,0,0-.3015-.0195h-.093c-.0315,0-.0615,0-.0915.0015-.03,0-.0585.0015-.087.0015s-.0555.0015-.0825.003-.0525.0015-.0765.003-.0465.003-.069.003c-.021.0015-.042.003-.06.003a.46579.46579,0,0,0-.0495.00451V37.704Zm4.2285-3.3675v-.018l.0015-.015.0045-.0135.006-.0105.009-.009.0135-.006a.05373.05373,0,0,1,.0165-.006l.021-.0045c.03-.0015.0675-.003.111-.0045s.093-.003.147-.0045q.08325-.00225.18-.0045c.0645-.0015.135-.003.207-.0045l.2295-.0045c.0795-.0015.162-.003.2475-.003.084-.0015.171-.0015.258-.003.087,0,.177-.0015.2655-.0015a4.21979,4.21979,0,0,1,.7485.063,3.36073,3.36073,0,0,1,.648.183,2.62124,2.62124,0,0,1,.5475.2955,2.57865,2.57865,0,0,1,.4485.3975,2.74322,2.74322,0,0,1,.348.492,3.22287,3.22287,0,0,1,.249.57751,3.98667,3.98667,0,0,1,.1485.6555,5.12126,5.12126,0,0,1,.0495.7245,5.42449,5.42449,0,0,1-.081.9615,3.88249,3.88249,0,0,1-.228.7905,3.178,3.178,0,0,1-.3465.633,2.86819,2.86819,0,0,1-.945.849,3.13119,3.13119,0,0,1-.546.24,3.44781,3.44781,0,0,1-.5595.135,3.60967,3.60967,0,0,1-.546.042h-.21c-.072,0-.1485,0-.225-.0015s-.153-.0015-.2295-.0015-.153-.0015-.2265-.003-.147-.003-.2145-.003-.1335-.0015-.195-.003-.1155-.003-.165-.0045-.093-.003-.1275-.003l-.015-.00149L21.25,41.238l-.0105-.0075-.009-.009-.0075-.012-.0045-.015-.003-.0165-.0015-.0195V35.19l.0045-.85349Zm1.143,5.895.066.0045c.021.0015.0435.003.0645.003s.042.0015.0645.003.0435.003.0645.003c.0225.0015.0435.0015.066.003.0225,0,.045.0015.0675.0015s.0465,0,.0705.0015h.072a2.31933,2.31933,0,0,0,.426-.039,1.86642,1.86642,0,0,0,.39-.1185,1.67246,1.67246,0,0,0,.348-.1995,1.89452,1.89452,0,0,0,.3015-.2805,2.0666,2.0666,0,0,0,.246-.3645,2.56246,2.56246,0,0,0,.1845-.45,3.41338,3.41338,0,0,0,.117-.537,4.73807,4.73807,0,0,0,.0435-.624,4.19535,4.19535,0,0,0-.0375-.603,2.87894,2.87894,0,0,0-.1155-.5085,2.2151,2.2151,0,0,0-.1845-.417,1.79447,1.79447,0,0,0-.246-.3315,1.67609,1.67609,0,0,0-.2985-.249,1.71271,1.71271,0,0,0-.3435-.1725,2.12254,2.12254,0,0,0-.381-.1005,2.60329,2.60329,0,0,0-.4095-.0315h-.081c-.027,0-.0525,0-.078.0015-.0255,0-.0495.0015-.0735.0015s-.048.0015-.072.003-.0465.0015-.0705.003c-.0225.0015-.045.003-.0675.003-.0225.0015-.045.003-.0675.003l-.0675.0045v4.359C22.36,39.915,22.3615,40.2315,22.3615,40.2315Zm6.1665.924a.11353.11353,0,0,1-.0015.0225l-.003.018-.0045.015-.0075.012-.0105.009-.012.006-.015.003-.018.0015H27.46l-.018-.0015-.015-.003-.012-.006c-.003-.003-.0075-.0045-.0105-.009l-.0075-.012a.044.044,0,0,1-.0045-.015l-.003-.018-.0015-.0225v-6.84l.0015-.018.003-.015.0045-.012.0075-.0105.0105-.0075a.02864.02864,0,0,1,.012-.0045l.015-.003.018-.0015h3.492a.09224.09224,0,0,1,.021.0015l.0165.003.0135.0045.0105.0075.0075.0105.006.012.0045.015.0045.018.0135.1095.01351.1095.0135.1095.0135.1095.0135.1095.0135.1095.0135.1095.0135.1095a.11353.11353,0,0,1,.0015.0225l-.0015.018-.006.015a.0361.0361,0,0,1-.009.012l-.012.009a.05373.05373,0,0,1-.0165.006.076.076,0,0,1-.0195.003l-.0225.0015h-2.529v1.992h2.286l.015.003.0135.0045.009.006.0075.009a.02847.02847,0,0,1,.0045.0135l.003.0165.0015.021v.876a.09224.09224,0,0,1-.0015.021l-.003.0165-.0045.0135-.0075.009-.0105.006-.012.0045-.015.0015H28.528V41.1555Z"/>\n  <path class="cls-4" d="M18.34485,24.89581a14.726,14.726,0,0,1-.90433,1.20392c-.14588.17272-.2886.33072-.42652.47294a2.3965,2.3965,0,0,1-1.39981.88689.44969.44969,0,0,1-.32068-.11487.64447.64447,0,0,1-.0917-.10319.4401.4401,0,0,1-.08159-.228.50794.50794,0,0,1,.009-.12794.77285.77285,0,0,1,.04042-.13855,1.90078,1.90078,0,0,1,.44673-.61826q.083-.08222.17846-.167A12.416,12.416,0,0,1,18.81141,24.177Q18.57762,24.55454,18.34485,24.89581Zm10.50861-3.16987a7.15042,7.15042,0,0,1,1.33615.10319.89065.89065,0,0,1,.73091.51405.63524.63524,0,0,1,.02842.17114.8507.8507,0,0,1-.0168.2017c-.06946.35814-.43978.58984-.94638.58984a1.90786,1.90786,0,0,1-.19956-.02476,1.70525,1.70525,0,0,1-.228-.02892,6.95621,6.95621,0,0,1-2.71071-1.3719c.20853-.03164.40859-.0569.59931-.07742A13.30079,13.30079,0,0,1,28.85346,21.72594Zm-4.03713-.42551c-.53666.11266-1.09075.24332-1.6533.39179-.40379.10691-.81364.22387-1.22336.34866.21762-.44554.41768-.8869.592-1.3066.22961-.5546.44546-1.10913.64351-1.6516.17429.27332.35453.53881.5383.79419q.27337.37843.55762.7294.2838.35078.5767.66991l-.04724.01054ZM22.04248,11.7281a.59449.59449,0,0,1,.04319-.059.496.496,0,0,1,.38863-.22065.45056.45056,0,0,1,.28949.09637,1.26517,1.26517,0,0,1,.28671.95112,6.78363,6.78363,0,0,1-.09069,1.02855,16.73582,16.73582,0,0,1-.38926,1.78793q-.06555.24411-.14.49612a10.47936,10.47936,0,0,1-.43713-1.45406,7.28338,7.28338,0,0,1-.16533-1.18547,4.2798,4.2798,0,0,1,.0389-.88639A1.644,1.644,0,0,1,22.04248,11.7281Zm10.6171,10.9184a1.59791,1.59791,0,0,0-.09536-.406,1.44612,1.44612,0,0,0-.28595-.47294,2.1864,2.1864,0,0,0-.54461-.41762,5.92424,5.92424,0,0,0-2.82122-.54039c-.40328,0-.83359.01952-1.28765.059q-.68089.05844-1.43025.17644a13.48435,13.48435,0,0,1-1.5664-1.82747,16.652,16.652,0,0,1-.98-1.52251q.2173-.6826.38029-1.29978c.06366-.24225.12-.47452.17165-.70148q.10893-.48273.18162-.918c.03322-.20063.06176-.39494.08273-.57985a7.84448,7.84448,0,0,0,.05469-.89214,2.99752,2.99752,0,0,0-.97063-2.46043,1.62164,1.62164,0,0,0-.31437-.1796,1.88582,1.88582,0,0,0-.742-.14165,1.41789,1.41789,0,0,0-.71348.20379,1.51066,1.51066,0,0,0-.53779.53451,3.29733,3.29733,0,0,0-.34759,1.66157,7.06044,7.06044,0,0,0,.06164.81528,11.50714,11.50714,0,0,0,.92163,3.16356c-.08905.26334-.17961.525-.27282.78731-.18693.524-.385,1.04963-.60145,1.59469-.10837.27231-.22116.54929-.33975.83372a28.79464,28.79464,0,0,1-1.3719,2.84913c-1.23852.4982-3.61061,1.57468-4.62178,2.84338a2.09979,2.09979,0,0,0-.45242.90427,1.49882,1.49882,0,0,0-.02261.36337,1.36356,1.36356,0,0,0,.22432.663,1.54652,1.54652,0,0,0,.24174.28387,1.60961,1.60961,0,0,0,.36767.25014c.03309.01686.06732.03265.1047.049a1.93274,1.93274,0,0,0,.33824.11424,2.19039,2.19039,0,0,0,.50976.05848,2.57137,2.57137,0,0,0,1.09327-.26492,4.28953,4.28953,0,0,0,.71626-.4334A8.25473,8.25473,0,0,0,19.157,26.47788,16.62479,16.62479,0,0,0,20.3893,24.7942c.28595-.44243.5546-.89163.79988-1.32769q.55851-.19039,1.12611-.36179c.37752-.1143.7568-.22172,1.13495-.32125.08147-.0216.15952-.038.24048-.059.74266-.19122,1.46511-.35447,2.14727-.47559q.19343.16908.385.32017.38137.30342.74885.54089.18339.11926.36286.22438a6.63068,6.63068,0,0,0,3.32832.99109,2.4495,2.4495,0,0,0,1.36508-.33173,1.47543,1.47543,0,0,0,.19855-.15592,1.35119,1.35119,0,0,0,.3467-.52188,1.44757,1.44757,0,0,0,.09258-.45027A1.57657,1.57657,0,0,0,32.65958,22.6465Z"/>\n</g>\n</svg>')," ",e.text)))}function ca(e){switch(e.uiType){case ge.INLINE:case ge.POPUP:return z.createElement(z.Fragment,null,z.createElement(la,oa(oa({},e),{},{classNames:["hb_cf_pdf"]})),z.createElement(kt,{onlyClose:e.isFinalMessage,closeFn:e.secondaryFn,primaryFn:e.primaryFn,localeText:e.localeText}));case ge.CHATBOT:default:return z.createElement(la,oa({},e))}}function sa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var da,ua=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentOpenedDocuments={},this.libraryUrl="https://documentcloud.adobe.com/view-sdk/viewer.js",this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e){return"document"===e}}],(n=[{key:"handleMessage",value:function(e,t,n,a,r){var o,i=this,l=Ze(e.playbookType,r);this.contentId=this.api.addToChatFrame({style:l?"server":"unformatted",content:z.createElement(ca,{id:e.id,text:e.payload.text,isFinalMessage:e.isFinalMessage,clickFn:function(){return i.showPdf(e)},secondaryFn:function(){return i.api.showChatFrame(!1)},primaryFn:function(){i.api.removeFromChatFrame(i.contentId),i.api.sendMessage({})},uiType:r&&r.type,localeText:n}),messageType:(null===(o=null==e?void 0:e.payload)||void 0===o?void 0:o.type)||(null==e?void 0:e.type)})}},{key:"showPdf",value:function(e){var t=this;this.currentOpenedDocuments[e.id]||(this.currentOpenedDocuments[e.id]=!0,window.AdobeDC?this.attachPDF(e):(qe(this.libraryUrl,"view-sdk"),document.addEventListener("adobe_dc_view_sdk.ready",(function(){t.attachPDF(e)}))))}},{key:"attachPDF",value:function(e){var t=this,n=new window.AdobeDC.View({clientId:e.payload.documentClient.clientId,reportSuiteId:e.payload.documentClient.analyticSuiteId});n.previewFile({content:{location:{url:"".concat(this.api.baseUrl,"document?id=").concat(e.id)}},metaData:{fileName:e.payload.text,id:e.id}},{embedMode:"LIGHT_BOX",focusOnRendering:!0});var a={listenOn:[window.AdobeDC.View.Enum.PDFAnalyticsEvents.TEXT_SEARCH,window.AdobeDC.View.Enum.PDFAnalyticsEvents.DOCUMENT_DOWNLOAD,window.AdobeDC.View.Enum.PDFAnalyticsEvents.DOCUMENT_OPEN,window.AdobeDC.View.Enum.Events.PDF_VIEWER_CLOSE],enablePDFAnalytics:!0};n.registerCallback(window.AdobeDC.View.Enum.CallbackType.EVENT_LISTENER,(function(n){if(n.type===window.AdobeDC.View.Enum.Events.PDF_VIEWER_CLOSE)return delete t.currentOpenedDocuments[e.id],void setTimeout((function(){document.activeElement&&document.activeElement.blur()}),100);var a={id:e.id,type:"document_event",sender:"client",payload:{type:n.type},playbookType:e.playbookType};n.type===window.AdobeDC.View.Enum.PDFAnalyticsEvents.TEXT_SEARCH&&(a.payload.searchedText=n.data.searchedText),t.api.sendMessage(a)}),a)}},{key:"handleReplay",value:function(e,t,n,a,r){var o=this;e.forEach((function(e){return o.handleMessage(e,t,n,a,r)}))}}])&&sa(t.prototype,n),a&&sa(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ma=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return e===Q.LIVE_CHAT_MESSAGE}}],(n=[{key:"renderDividerText",value:function(e){var t,n,a=this;if(this.config&&"chatbot"!==(null===(t=this.config)||void 0===t?void 0:t.type)){var r=this.api.getHistory();this.messageId=this.api.addToChatFrame({style:"unformatted",content:z.createElement(Ft,{text:e,primaryFn:function(){a.api.sendMessage({type:"message",sender:"client",id:"live-chat-separator",playbookType:a.config?"liveStream":"dialog"}),a.api.removeFromChatFrame(a.messageId)},secondaryFn:function(){a.api.showChatFrame(!1)},localeText:this.localeText||{},uiType:(null===(n=this.config)||void 0===n?void 0:n.type)||"chatbot",isFinalMessage:r.length>0&&r.some((function(e){var t;return(null===(t=e.payload)||void 0===t?void 0:t.statusCode)===se.LC_207}))})})}else this.api.renderStatusSeparatorUi(e)}},{key:"removeConnectionLoaderUi",value:function(){da&&(this.api.removeFromChatFrame(da),da=null)}},{key:"handleCardType",value:function(e,t,n,a,r,o,i,l){var c,s;if(oe.SYSTEM===e){if(a===$.TIMED_OUT||a===$.CLOSED_BY_AGENT||a===$.CLOSED_BY_VISITOR){this.avatarData={};var d="";a===$.TIMED_OUT?(d=o.SESSION_INACTIVITY,l||this.api.dispatchCallbackEvent(we.CONVERSATION_LIVE_CHAT_REQUEST_TIMEOUT,this.livechatAgentProfile)):a===$.CLOSED_BY_AGENT?d="".concat(o.ENDED_SESSION_AGENT," ").concat(i):a===$.CLOSED_BY_VISITOR&&(d=o.ENDED_BY_VISITOR),a===$.TIMED_OUT||l||this.api.dispatchCallbackEvent(we.CONVERSATION_LIVE_CHAT_ENDED,this.livechatAgentProfile),this.renderDividerText(d),this.api.showTextInput(!1),this.api.resizeChatBody(!1)}switch(t){case ae.SYSTEM:switch(r){case se.LC_204:da?(this.removeConnectionLoaderUi(),da=this.api.renderConnectingUi()):da=this.api.renderConnectingUi(),this.api.dispatchCallbackEvent(we.CONVERSATION_LIVE_CHAT_REQUESTED);break;case se.LC_201:this.removeConnectionLoaderUi(),this.renderDividerText(o.ERROR_INITIATE_FAILED||n);break;case se.LC_203:this.avatarData={},this.renderDividerText(o.AGENT_LIVE_CHAT_ENDED),this.api.showTextInput(!1),this.api.resizeChatBody(!1),l||this.api.dispatchCallbackEvent(we.CONVERSATION_LIVE_CHAT_ENDED,this.livechatAgentProfile);break;case se.LC_202:case se.LC_205:case se.LC_206:case se.LC_207:this.removeConnectionLoaderUi(),this.renderDividerText(o[r]||n),r===se.LC_207||l||this.api.dispatchCallbackEvent(we.CONVERSATION_LIVE_CHAT_REQUEST_TIMEOUT,{text:o[r]||n})}break;case ae.CUSTOM:this.removeConnectionLoaderUi(),this.renderDividerText(n)}}else{var u=e===oe.AGENT,p=u?oe.SERVER:oe.CLIENT,m=z.createElement(Ft,{text:"<p>".concat(n,"</p>"),avatar:null===(s=null===(c=this.avatarData)||void 0===c?void 0:c.payload)||void 0===s?void 0:s.agentAvatarUrl,localeText:o}),h=z.createElement("div",{class:"hb_message"},Ye("<p>".concat(n,"</p>"))),f=u?m:h;this.api.addToChatFrame({style:p,content:f,messageType:t})}}},{key:"handleSelection",value:function(e,t,n,a,r){var o,i,l,c=this;if(a){var s,d=K();r&&"chatbot"!==(null==r?void 0:r.type)&&(s=O());var u=null===(o=a.payload)||void 0===o?void 0:o.meetingDuration;this.calanderModalId=this.api.addToChatFrame({style:"unformatted",content:z.createElement(Bn,{id:"calendar-".concat(t),onChoiceClick:function(t){var o,i,l,s,u,p,m,h,f,v,g=Ze(null==a?void 0:a.playbookType,r),y=null===(i=null===(o=null==a?void 0:a.payload)||void 0===o?void 0:o.profile)||void 0===i?void 0:i.email;c.slotInfo=t;var b={type:ae.CALENDAR_INFO,sender:oe.VISITOR,id:null==a?void 0:a.sessionId,payload:{profileId:null===(s=null===(l=a.payload)||void 0===l?void 0:l.profile)||void 0===s?void 0:s.id,date:null==t?void 0:t.date,time:null==t?void 0:t.time,timezone:null===(u=null==a?void 0:a.payload)||void 0===u?void 0:u.timezone,pageUrl:window.location.href,attendees:y?[y]:[],sessionId:null==a?void 0:a.sessionId}};if("chatbot"===(null==r?void 0:r.type)||g){c.api.sendMessage(b);var _=new Date("".concat(null===(p=c.slotInfo)||void 0===p?void 0:p.date.replace(/-/g,"/")," ").concat(null===(m=c.slotInfo)||void 0===m?void 0:m.time)),E=ze(_,e,n).timezone,T=Xe(n)||"en-US";c.api.dispatchCallbackEvent(we.CONVERSATION_MEETING_REQUESTED,{meetingInfo:{datetime_local:"".concat(_.toLocaleDateString(T,xe)),datetime_utc:_.toISOString(),timezone:E},agentName:(null===(h=c.meetingAgentProfile)||void 0===h?void 0:h.name)||"",agentId:(null===(f=c.meetingAgentProfile)||void 0===f?void 0:f.id)||""}),c.calanderModalId&&c.api.removeFromChatFrame(c.calanderModalId)}else c.messageAnswer=b,null===(v=d())||void 0===v||v.removePrimaryAttr("disabled")},slots:null===(i=a.payload)||void 0===i?void 0:i.slots,calendarHeading:e.TEXT_SCHEDULE_MEETING_IN_TIMEZONE.replace(/{{\d+}}/,"".concat(u||30)),timeslotHeading:e.TEXT_SCHEDULE_MEETING,localeText:e,locale:n||"en-US",buttonRef:s,uiType:r?r.type:"",secondaryFn:function(){return c.api.showChatFrame(!1)},primaryFn:function(){var e,t,n,a;(null===(t=null===(e=c.messageAnswer)||void 0===e?void 0:e.payload)||void 0===t?void 0:t.date)&&(null===(a=null===(n=c.messageAnswer)||void 0===n?void 0:n.payload)||void 0===a?void 0:a.time)&&(c.api.sendMessage(c.messageAnswer),c.api.removeFromChatFrame(c.profileCardId),c.calanderModalId&&c.api.removeFromChatFrame(c.calanderModalId))},showButtonGroup:!0,showButton:!0,mutators:d}),messageType:(null===(l=a.payload)||void 0===l?void 0:l.type)||ae.CALENDAR_INFO}),r&&"chatbot"!==(null==r?void 0:r.type)&&s&&s.current&&s.current.click()}}},{key:"handleMessage",value:function(e,t,n,a,r,o){var i,l,c,s,d,u,p,m,h,f,v,g,y,b,_,E,T,C,w,I,O=this,x=e.payload,S=void 0===x?{}:x,D=e.sender,M=void 0===D?"":D,N=e.type,A=void 0===N?"":N,k=S.type,L=void 0===k?"":k,F=S.content,P=void 0===F?"":F,R=S.terminationStatus,j=void 0===R?"":R,H=S.statusCode,B=void 0===H?"":H;if(this.config=r,this.localeText=n,Q.LIVE_CHAT_MESSAGE===A){switch(null===(i=e.payload)||void 0===i?void 0:i.type){case ae.AGENT_PROFILE:this.removeConnectionLoaderUi(),this.avatarData=e,this.livechatAgentProfile={agentId:(null===(l=e.payload)||void 0===l?void 0:l.userId)||"",agentName:(null===(c=e.payload)||void 0===c?void 0:c.agentFirstName)||""},this.renderDividerText("".concat(n.TEXT_CONNECTED_TO_AGENT," ").concat((null===(d=null===(s=this.avatarData)||void 0===s?void 0:s.payload)||void 0===d?void 0:d.agentFirstName)?this.avatarData.payload.agentFirstName:n.FALLBACK_AGENT_NAME));var U={payload:{type:ae.LIVE_CHAT},type:Q.LIVE_CHAT_MESSAGE};this.api.showTextInput(!0),this.api.setTextResponsePayload(U),this.api.resizeChatBody(!0),o||this.api.dispatchCallbackEvent(we.CONVERSATION_LIVE_CHAT_INITIATED,this.livechatAgentProfile);break;case ae.CALENDAR_INFO:this.meetingAgentProfile=null===(u=e.payload)||void 0===u?void 0:u.profile,this.profileCardId=this.api.addToChatFrame({style:r&&"chatbot"!==(null==r?void 0:r.type)?"unformatted":"server",content:z.createElement(ta,{avatar:(null===(m=null===(p=e.payload)||void 0===p?void 0:p.profile)||void 0===m?void 0:m.avatar)?null===(f=null===(h=e.payload)||void 0===h?void 0:h.profile)||void 0===f?void 0:f.avatar:Se,profile:null===(v=e.payload)||void 0===v?void 0:v.profile,localeText:n,uiType:(null==r?void 0:r.type)||"chatbot"}),messageType:(null===(g=e.payload)||void 0===g?void 0:g.type)||ae.CALENDAR_INFO}),this.api.removeFromChatFrame(this.calanderModalId),this.handleSelection(n,t,a,e,r);break;case ae.MEETING_BOOKING_RESPONSE:this.api.removeFromChatFrame(this.calanderModalId),this.slotInfo||(this.slotInfo={date:(null===(y=e.payload)||void 0===y?void 0:y.date)||"",time:(null===(b=e.payload)||void 0===b?void 0:b.time)||""});var V=new Date("".concat(null===(_=this.slotInfo)||void 0===_?void 0:_.date.replace(/-/g,"/")," ").concat(null===(E=this.slotInfo)||void 0===E?void 0:E.time)),Y=ze(V,n,a).timezone,q=Xe(a)||"en-US";this.api.addToChatFrame({style:r&&"chatbot"!==(null==r?void 0:r.type)?"unformatted":oe.CLIENT,content:z.createElement("div",{class:"hb_answer"},n.TEXT_MEETING_SCHEDULE," ",z.createElement("b",null,V.toLocaleDateString(q,xe)," ",Y)),messageType:ae.MEETING_BOOKING_RESPONSE}),o||this.api.dispatchCallbackEvent(we.CONVERSATION_MEETING_BOOKED,{meetingInfo:{datetime_local:"".concat(V.toLocaleDateString(q,xe)),datetime_utc:V.toISOString(),timezone:Y},agentName:(null===(T=this.meetingAgentProfile)||void 0===T?void 0:T.name)||"",agentId:(null===(C=this.meetingAgentProfile)||void 0===C?void 0:C.id)||""}),r&&"chatbot"!==(null==r?void 0:r.type)&&this.api.addToChatFrame({style:"unformatted",content:z.createElement(kt,{onlyClose:!0,closeFn:function(){O.api.showChatFrame(!1)},localeText:n})})}this.handleCardType(M,L,P,j,B,n,(null===(I=null===(w=this.avatarData)||void 0===w?void 0:w.payload)||void 0===I?void 0:I.agentFirstName)||n.FALLBACK_AGENT_NAME,o)}}},{key:"handleReplay",value:function(e,t,n,a,r,o){var i=this;e.forEach((function(e){return i.handleMessage(e,t,n,a,r,o)}))}}])&&pa(t.prototype,n),a&&pa(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ha(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var fa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return e===le.PROMPT||e===le.VISITOR_QUESTION||e===le.GENAI_ANSWER||e===le.VISITOR_FEEDBACK||e===le.END||e===le.AFFIRMATION_QUESTIONS||e===le.AFFIRMATION_CHOICE||e===le.NUDGE_CHOICE}}],(n=[{key:"handleMessage",value:function(e,t,n,a,r){var o,i,l,c,s,d,u=this,p=e,m=le.VISITOR_QUESTION,h=le.VISITOR_FEEDBACK,f=le.GENAI_ANSWER,v=le.PROMPT,g=le.AFFIRMATION_CHOICE,y=le.AFFIRMATION_QUESTIONS,b=le.AFFIRMATION_QUESTION,_=le.NUDGE_CHOICE,E={id:p.id,type:m,sender:"client",payload:{type:p.payload?p.payload.type:""},playbookType:p.playbookType},T=function(e,t,n){u.api.showTextInput(e),u.api.disableTextInput(t),u.api.resizeChatBody(n)},C=function(e){if(u.loaderId&&!e)return u.api.removeFromChatFrame(u.loaderId),void(u.loaderId="");u.loaderId=e?u.api.renderWaitingUi():""},w=function(e){if(u.genAiResponseMessageId){var t=u.api.getFromChatFrame(u.genAiResponseMessageId);if(t){var n=e?".thumbsup":".thumbsdown",a=t.querySelector(n);if(a){var r=t.querySelector(".hb_feedback_container");r&&(r.innerHTML="",a.classList.replace("outline","filled"),a.disabled=!0,r.appendChild(a))}}u.genAiResponseMessageId=""}},I=function(e){var t;u.api.sendMessage({id:p.id,type:h,sender:"client",payload:"string"==typeof e?{helpful:"true"===e,responseId:null===(t=p.payload)||void 0===t?void 0:t.responseId}:{},playbookType:p.playbookType}),w("true"===e)},O=function(e){var n={id:p.id,type:_,sender:"client",payload:"string"==typeof e?{text:e}:{id:e.id,text:e.text},playbookType:p.playbookType};u.handleMessage(n,t),u.api.sendMessage(n),T(!1,!1,!1)},x=function(e){var n={id:p.id,type:g,sender:"client",payload:"string"!=typeof e?{questionId:e.id}:{},playbookType:p.playbookType};u.affirmationMessageId="",u.handleMessage(n,t),u.api.sendMessage(n)};switch(p.type){case v:this.messageId=this.api.addToChatFrame({style:"server",content:z.createElement(Ft,{text:p.payload?p.payload.text:"",uiType:r&&r.type,localeText:n||{}}),messageType:v}),T(!0,!1,!0),this.api.setTextResponsePayload(E);break;case m:this.api.addToChatFrame({style:"client",messageType:m,content:z.createElement("div",{class:"hb_answer"},p.payload?p.payload.inputVal:"")}),this.api.disableTextInput(!0),this.questionId&&(this.api.removeFromChatFrame(this.questionId),this.api.removeFromChatFrame(this.nudgeQuestionMessageId),this.questionId="",this.nudgeQuestionMessageId=""),this.messageId&&(this.messageId=""),this.affirmationMessageId&&(this.affirmationMessageId=""),C(!0);break;case f:if(C(!1),p.payload){if(p.payload.text&&(this.genAiResponseMessageId=this.api.addToChatFrame({style:"server",content:z.createElement(Ft,{text:p.payload.text.startsWith("<p>")?p.payload.text:"<p>".concat(p.payload.text,"</p>"),uiType:p.playbookType,localeText:n||{}},p.payload.isGenAiResponse&&z.createElement("div",{class:"hb_feedback"},z.createElement("div",{class:"hb_feedback_container"},z.createElement("p",null,null==n?void 0:n.TEXT_FEEDBACK_QUESTION),z.createElement(tt,{classNames:["hb_feedback_btn","outline","thumbsup"],clickFn:function(){return I("true")},ariaLabel:null==n?void 0:n.TEXT_ACCESSIBILITY_HELPFUL_FEEDBACK}),z.createElement(tt,{classNames:["hb_feedback_btn","outline","thumbsdown"],clickFn:function(){return I("false")},ariaLabel:null==n?void 0:n.TEXT_ACCESSIBILITY_NOT_HELPFUL_FEEDBACK})))),messageType:f})),p.payload.relatedReads&&p.payload.relatedReads.length>0){var S=p.payload.relatedReads.length;this.api.addToChatFrame({style:"server",content:z.createElement(Ft,{uiType:p.playbookType,text:"<p>".concat(null==n?void 0:n.TEXT_RELATED_LINKS,"</p>"),localeText:n||{}},z.createElement("ul",{class:"hb_related_links ".concat(1===S?"hb_related_links_no_list":"")},p.payload.relatedReads.map((function(e,t){return z.createElement("li",null,z.createElement("a",{href:e.url,target:"_blank"},e.title))})))),messageType:"assisted_response_related_links"})}if(p.payload.nudgeQuestion){this.nudgeQuestionMessageId=this.api.addToChatFrame({style:"server",content:z.createElement(Ft,{text:p.payload.nudgeQuestion.text,uiType:p.playbookType,localeText:n||{}}),messageType:"nudge_question"});var D=z.createElement(Ht,{id:"assisted-nudge-".concat(t),choices:null===(i=null===(o=p.payload)||void 0===o?void 0:o.nudgeQuestion)||void 0===i?void 0:i.choices,uiType:p.playbookType,onChoiceClick:O,text:null===(c=null===(l=p.payload)||void 0===l?void 0:l.nudgeQuestion)||void 0===c?void 0:c.text,localeText:n||{}});this.questionId=this.api.addToChatFrame({style:"unformatted",content:D,messageType:"nudge_question_choices"})}p.payload.isGenAiResponse||(T(!1,!1,!1),this.messageId&&this.api.removeFromChatFrame(this.messageId),this.affirmationMessageId&&this.api.removeFromChatFrame(this.affirmationMessageId)),p.payload.allowMoreQuestions?(T(!0,!1,!0),this.api.setTextResponsePayload(E)):T(!1,!1,!1)}break;case y:C(!1),p.payload&&p.payload.suggestedQuestions&&p.payload.suggestedQuestions.length>0&&(this.suggestedQuestions=p.payload.suggestedQuestions,this.affirmationMessageId=this.api.addToChatFrame({style:"server",content:z.createElement(Ft,{text:"<p>".concat(null==n?void 0:n.TEXT_AFFIRMATION_QUESTION,"</p>"),uiType:r&&r.type,localeText:n||{}}),messageType:b}),this.questionId=this.api.addToChatFrame({style:"unformatted",content:z.createElement(Ht,{id:t,choices:null===(s=p.payload)||void 0===s?void 0:s.suggestedQuestions,onChoiceClick:x,uiType:p.playbookType,localeText:n||{}}),messageType:y})),this.api.disableTextInput(!1);break;case g:if(this.questionId&&this.api.removeFromChatFrame(this.questionId),p.payload&&p.payload.questionId){var M=p.payload.questionId,N=this.suggestedQuestions&&this.suggestedQuestions.length>0?this.suggestedQuestions.filter((function(e){return e.id===M}))[0].text:"";this.api.addToChatFrame({style:"client",messageType:g,content:z.createElement("div",{class:"hb_answer"},N)})}this.api.disableTextInput(!0),C(!0);break;case _:this.questionId&&this.api.removeFromChatFrame(this.questionId),p.payload&&p.payload.text&&this.api.addToChatFrame({style:"client",messageType:(null===(d=null==p?void 0:p.payload)||void 0===d?void 0:d.type)||(null==p?void 0:p.type),content:z.createElement("div",{class:"hb_answer"},p.payload.text)}),T(!1,!1,!0);break;case h:p.payload&&p.payload.helpful&&w(p.payload.helpful)}}},{key:"handleReplay",value:function(e,t,n,a,r){var o=this;e.forEach((function(e){return o.handleMessage(e,t,n,a,r,!0)}))}}])&&ha(t.prototype,n),a&&ha(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.AdobeDX.register((function(e){e&&(e.registerUiRenderer(At),e.registerCardHandler(Rt),e.registerCardHandler(Wn),e.registerCardHandler(Ut),e.registerCardHandler(aa),e.registerCardHandler(ua),e.registerCardHandler(ma),e.registerCardHandler(fa))}))}();
//# sourceMappingURL=index.js.map
