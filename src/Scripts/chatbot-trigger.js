(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".phenom-chatbot-wrapper{position:fixed;z-index:999;background:transparent;width:var(--chatbot-wrapper-width);height:var(--chatbot-wrapper-height);transition:all .1s;display:flex}.phenom-chatbot-sub-wrapper{width:100%;height:100%;position:relative;border-radius:inherit}div[data-chatbotState*=notification-widget]{min-width:min(360px,100vw);filter:drop-shadow(5px 5px 3px rgba(0,0,0,.15))}div[data-chatbotState*=window-open]{min-width:min(360px,100vw)}div[data-chatbotState*=window-open][data-chatbotWindowSize=mini-h]{height:316px}div[data-chatbotState*=window-open][data-chatbotWindowSize=maxi-h]{height:90%;min-width:min(540px,100vw)}div[data-chatbotState*=sidepanel-open]{width:1000px;max-width:min(1000px,95%)}div[data-chatbotState*=sidepanel-minimize]{width:min(382px,100vw)}div[data-chatbotState*=sidepanel-modal]{width:93%}div[data-chatbotState*=window-closed]{width:87px;height:83px}div[data-chatbotPosition*=bottom-left]{bottom:32px;left:24px}div[data-chatbotPosition*=bottom-right]{bottom:32px;right:24px}.phenom-chatbot-video-wrapper{position:fixed;z-index:10000;background-color:#00000080;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center}.phenom-chatbot-video-wrapper .close-icon{position:absolute;top:25px;right:25px;border:none;background:transparent;font-size:2.5rem;font-weight:700;line-height:1;color:#000;filter:drop-shadow(4px 3px 11px #fff);width:50px;height:50px}@media (max-width: 720px),(max-height: 320px){.phenom-chatbot-wrapper[data-chatbotState*=window-open]{width:100%!important;height:100%!important;bottom:0px!important;right:0px!important;left:unset!important;top:unset!important;transform:unset!important;max-height:100%!important}.ph-chatbot-parent-body{overflow:hidden}}.phenom-chatbot-wrapper[data-theme=classic]{border-radius:10px}.phenom-chatbot-wrapper[data-theme=classic][data-chatbotState*=window-open]{filter:drop-shadow(4px 4px 8px rgba(46,46,52,.25))}.phenom-chatbot-wrapper[data-theme=classic][data-chatbotState*=window-open][data-chatbotWindowSize=normal-h]{height:82%}.phenom-chatbot-wrapper[data-theme=classic][data-chatbotState*=window-closed]{width:87px;height:83px}.phenom-chatbot-wrapper[data-theme=phenom-x-plus]{z-index:9995}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotState*=window-open]{filter:drop-shadow(0px 5px 14px rgba(46,46,52,.25))}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotState*=window-open][data-chatbotWindowSize=normal-h]{height:72%}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotState*=window-closed]{width:68px;height:68px}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotPosition*=bottom-right]{right:1.875vw;bottom:9vh}.phenom-chatbot-wrapper[data-theme=prime]{border-radius:24px}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open]{filter:drop-shadow(4px 4px 8px rgba(46,46,52,.25))}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open][data-chatbotWindowSize=normal-h],.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open][data-chatbotState*=sidepanel-minimize]{height:92%;max-height:max(800px,65%)}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open][data-chatbotWindowSize=maxi-h]{height:92%;min-width:min(540px,100vw)}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-closed]{width:80px;height:80px}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotPosition*=bottom-right]{right:2.8vh;bottom:5.18vh}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=notification-widget]{min-width:min(340px,100vw);width:min(340px,100vw)}")),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
var Y=Object.defineProperty;var Q=(u,r,p)=>r in u?Y(u,r,{enumerable:!0,configurable:!0,writable:!0,value:p}):u[r]=p;var c=(u,r,p)=>(Q(u,typeof r!="symbol"?r+"":r,p),p);(function(){var O,P,D,R;"use strict";const u="",r={chatbotDependenciesNotFoundText:"Chatbot cant be loaded due to missing dependencies",chatbotTriggerInitStopped:"Chatbot cant be initated here !",chatbotDisabledText:"Chatbot is disabled!",chatbotTriggerDefaultDisabledRegexPaths:[/\/apply.*[?]/gi],chatbotTriggerDefaultDisabledPageNames:["screening","chatbot"],chatbotIframeId:"phenomChatbotIframe",chatbotWrapperElementId:"phenomChatbotWrapper",iframeVideoWrapperId:"phenomChatbotVideoWrapper"};function p(i,t,o=10,a=0,e=!1){return new Promise((n,s)=>{i!==void 0?n():(a>=o&&(e&&s(`Max retries reached: ${r.chatbotDependenciesNotFoundText}`),n()),setTimeout(()=>{n(p(i,t,o,a+1))},t))})}async function B(i,{body:t,method:o="POST",headers:a={}}){var e,n,s,h,b,l,f,w,C,I,E;if(await p((e=window.phChatbot)==null?void 0:e.phContext,500),!((n=window.phChatbot)!=null&&n.phContext))throw Error(r.chatbotDependenciesNotFoundText);return((s=window.phChatbot)==null?void 0:s.phContext)==window.phApp?(await p((l=(b=(h=window.phApp)==null?void 0:h.phb)==null?void 0:b.profileLoginService)==null?void 0:l.fetchRequest,500),(C=(w=(f=window.phApp)==null?void 0:f.phb)==null?void 0:w.profileLoginService)==null?void 0:C.fetchRequest(i,t)):(window.phChatbot.phContext=window.phChatbot.phContext,await p((I=window.phChatbot.phContext)==null?void 0:I.fetchRequest,500),(E=window.phChatbot)!=null&&E.phContext.fetchRequest?window.phChatbot.phContext.fetchRequest(i,{body:t,method:o,headers:a}):{})}function F(i,t){for(const o of t){const a=RegExp(o).exec(i);if(a&&a.length>0)return!0}return!1}function q(i,t){if(!i||!(t!=null&&t.length))return!1;for(const o of t)if(o===i)return!0;return!1}function y(i,t={}){const o=document.createElement("iframe");o.setAttribute("src",i);for(const a in t)o.setAttribute(a,t[a]);return o}function H(i,t,o=0){i||console.error("Unexpected error: Chatbot missing chatbot script in configs");const a=document.createElement("div");a.innerHTML=i;const e=a.querySelector("phenom-chatbot"),n=a.querySelectorAll("script"),s=a.querySelectorAll("link");setTimeout(function(){e&&t.appendChild(e);const h=document.getElementsByTagName("body")[0];for(const b of n){const l=document.createElement("script");l.src=b.src,l.text=b.text,h.appendChild(l)}for(const b of s)h.appendChild(b)},o)}function S(i){const t=document.getElementById(r.chatbotWrapperElementId);U(i,t)}function W(){A()}function A(){document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",W),document.body.style.cursor="",document.body.style.userSelect=""}function U(i,t){if(!t)return;document.body.style.cursor="move",document.body.style.userSelect="none";const o=5,a=5,e=window.innerWidth-t.clientWidth-10,n=window.innerHeight-t.clientHeight-5,s=Math.min(Math.max(i.clientY-o,o),n),h=Math.min(Math.max(i.clientX-a,a),e);t.style.top=`${s}px`,t.style.left=`${h}px`,t.style.transform="unset"}function J(){const i=document.getElementById(r.chatbotWrapperElementId);i&&(i.style.top="",i.style.left="",i.style.transform="")}function V(i){i.includes("window-open")?document.body.classList.add("ph-chatbot-parent-body"):document.body.classList.remove("ph-chatbot-parent-body")}class g{constructor(t){c(this,"chatbotInitiator");c(this,"chatbotDraggableClassName","chatbot-draggable");this.chatbotInitiator=t}postDataToChatbot(t,o={}){var a;if(this.chatbotInitiator.loadChatbotInIframe){const e=document.getElementById(r.chatbotIframeId);(a=e==null?void 0:e.contentWindow)==null||a.postMessage({eventName:t,payload:o},this.chatbotInitiator.chatbotOrigin)}else window.postMessage({eventName:t,payload:o},this.chatbotInitiator.chatbotOrigin)}sendPageRelatedRequiredInfoToChatbot(){var e,n,s,h,b,l,f,w,C,I,E,x,L,k,_,N,M;const t=!!window.phChatbot.currentJobInfo,o=!!((n=(e=window.phChatbot.phContext)==null?void 0:e.ddo)!=null&&n.eagerLoadRefineSearch),a={pageName:(s=window.phChatbot.phContext)==null?void 0:s.pageName,pageType:(h=window.phChatbot.phContext)==null?void 0:h.pageType,pageURL:window.location.href,...(b=window.phChatbot.phContext)==null?void 0:b.pageInfo};if(t){const T={...window.phChatbot.currentJobInfo,id:(l=window.phChatbot.currentJobInfo)==null?void 0:l.jobId,sequenceNumber:(f=window.phChatbot.currentJobInfo)==null?void 0:f.jobSeqNo,category:(w=window.phChatbot.currentJobInfo)==null?void 0:w.category,title:(C=window.phChatbot.currentJobInfo)==null?void 0:C.title,location:(I=window.phChatbot.currentJobInfo)==null?void 0:I.location,visibilityType:(E=window.phChatbot.currentJobInfo)==null?void 0:E.visibilityType,ats:(x=window.phChatbot.currentJobInfo)==null?void 0:x.ats};this.postDataToChatbot("PAGE_INFO",{pageInfo:a,jobInfo:T})}else if(o){const T={category:null},v=(M=(N=(_=(k=(L=window.phChatbot.phContext)==null?void 0:L.ddo)==null?void 0:k.eagerLoadRefineSearch)==null?void 0:_.data)==null?void 0:N.ui_selections)==null?void 0:M.category;v!=null&&v.length&&(T.category=v[0]),this.postDataToChatbot("PAGE_INFO",{pageInfo:a,jobInfo:T})}else this.postDataToChatbot("PAGE_INFO",{pageInfo:a})}removeElementAndRaiseChatbotInputFocusEvent(t){var o;(o=document.getElementById(t))==null||o.remove(),this.postDataToChatbot("FOCUS_ON_CHATBOT_USER_INPUT")}addRequiredEventListeners(t){window.addEventListener("message",o=>{if(o.origin!==t)return;const a=o.data.eventName,e=o.data.payload;switch(a){case"CHATBOT_INITIALIZE":this.parseAndSendInitialWrapperInfo(),window.dispatchEvent(new CustomEvent("CHATBOT_INITIATE",{detail:e}));break;case"CHATBOT_POSITION":e&&(this.chatbotInitiator.chatbotPosition.value=e);break;case"CHATBOT_DIMENSIONS_STATE":e.currentChatbotState&&(this.chatbotInitiator.chatbotState.value=e.currentChatbotState),this.setChatbotWrapperDimensions(e.dimensions);break;case"CHATBOT_THEME":e&&(this.chatbotInitiator.chatbotTheme.value=e);break;case"CHATBOT_SIZE":e&&(this.chatbotInitiator.chatbotSize.value=e);break;case"GET_WINDOW_DIMENSIONS":this.postWindowDimensionsToChatbot();break;case"ADD_WINDOW_RESIZE_LISTENER":{const n=new g(this.chatbotInitiator);window.addEventListener("resize",()=>{n.postWindowDimensionsToChatbot()});break}case"REMOVE_WINDOW_RESIZE_LISTENER":{const n=new g(this.chatbotInitiator);window.removeEventListener("resize",()=>{n.postWindowDimensionsToChatbot()});break}case"MOVE_CHATBOT_WITH_MOUSE":{e!=null&&e.enabled?this.handleDraggableEventOnChatbot():this.handleDraggableEventOnChatbot(!0);break}case"SHOW_FULLSCREEN_IFRAME":this.removeElementAndRaiseChatbotInputFocusEvent(r.iframeVideoWrapperId),this.chatbotInitiator.createIframeVideoWrapper(e==null?void 0:e.src,{id:r.iframeVideoWrapperId},{...e});break;default:a&&document.dispatchEvent(new CustomEvent(a,{detail:e}));break}},!1),document.addEventListener("ph:bot:removeProfile",()=>{this.postDataToChatbot("RESET_PERSONALIZATION")}),window.addEventListener("PhenomChatbotTriggerEvent",o=>{var s;const a=o,e=a.detail.action,n=a.detail.data;switch(e){case"reInitChatbot":{window.phChatbot.configurations={data:{}},(s=document.getElementById(r.chatbotWrapperElementId))==null||s.remove(),this.chatbotInitiator.initiate(!1);break}default:console.log(n)}})}parseAndSendInitialWrapperInfo(){this.postDataToChatbot("PARENT_SITE_LOCATION",window.location.href);const t=(this.chatbotInitiator.chatbotWrapperElement&&getComputedStyle(this.chatbotInitiator.chatbotWrapperElement).borderRadius)??"10px";this.postDataToChatbot("BORDER_RADIUS",t),this.sendPageRelatedRequiredInfoToChatbot()}postWindowDimensionsToChatbot(){this.postDataToChatbot("PARENT_WINDOW_DIMENSIONS",{width:window.innerWidth,height:window.innerHeight})}setChatbotWrapperDimensions(t={}){this.chatbotInitiator.chatbotDimensions.value={width:`${t.width}px`,height:`${t.height}px`}}handleDraggableEventOnChatbot(t=!1){t?A():(document.addEventListener("mouseup",W),document.addEventListener("mousemove",S))}}function m(i,t){const o=()=>({get:(e,n)=>typeof e[n]=="object"?new Proxy(e[n],o()):e[n],set:(e,n,s)=>{const h=JSON.parse(JSON.stringify(e));return e[n]=s,t&&t(h.value,e.value),!0}});return new Proxy({value:i},o())}class ${constructor(t){c(this,"loadChatbotInIframe",!1);c(this,"chatbotBaseUrl");c(this,"chatbotPageEndpoint",{}.C_WRAPPER_SCRIPT_PAGE_PATH||"chatbot");c(this,"chatbotOrigin","");c(this,"communicationService");c(this,"chatbotPosition",m("bottom-right",z));c(this,"chatbotWrapperElement");c(this,"chatbotInitiator");c(this,"chatbotDimensions",m({},X));c(this,"chatbotState",m("chatbot-closed",j));c(this,"chatbotTheme",m("classic",G));c(this,"chatbotSize",m("normal-h",Z));var o,a,e;try{t=t??((a=(o=window.phChatbot)==null?void 0:o.phContext)==null?void 0:a.baseURL)??window.location.href,this.chatbotOrigin=(e=new URL(t))==null?void 0:e.origin,this.chatbotBaseUrl=t.endsWith("/")?t:t+"/"}catch(n){if((n==null?void 0:n.name)==="TypeError")this.chatbotOrigin=window.location.origin,this.chatbotBaseUrl=window.location.origin;else throw Error("Unexpected error: Chatbot Trigger Initialization stopped.")}this.communicationService=new g(this)}invokeInitator(){document.readyState==="complete"?this.initiate():window.addEventListener("load",()=>{this.invokeInitator()})}async initiate(t=!0){var o,a,e,n;if(await p((o=window.phChatbot)==null?void 0:o.phContext,300,5),F(window.location.href,r.chatbotTriggerDefaultDisabledRegexPaths)||q((e=(a=window.phChatbot)==null?void 0:a.phContext)==null?void 0:e.pageName,r.chatbotTriggerDefaultDisabledPageNames)){console.info(r.chatbotTriggerInitStopped);return}(n=window.phChatbot)!=null&&n.phContext?(this.loadChatbotInIframe=!window.phChatbot.isContainerApproachEnabledForTXM,this.createChatbotWrapper()):(this.loadChatbotInIframe=!0,this.createChatbotWrapper()),t&&this.communicationService.addRequiredEventListeners(this.chatbotOrigin??window.location.origin)}createChatbotWrapper(){var a,e;const t=document.createElement("div");t.setAttribute("class","phenom-chatbot-wrapper"),t.setAttribute("id",r.chatbotWrapperElementId),t.setAttribute("data-theme",`${this.chatbotTheme.value}`),t.setAttribute("data-chatbotState",`${this.chatbotState.value}`),t.setAttribute("data-chatbotWindowSize",`${this.chatbotSize.value}`),t.setAttribute("data-chatbotPosition",`${this.chatbotPosition.value}`);const o=document.createElement("div");if(o.setAttribute("class","phenom-chatbot-sub-wrapper"),this.loadChatbotInIframe){const n=new URL(this.chatbotPageEndpoint,this.chatbotBaseUrl).href+"?chatbotLoadedInIframe=true",s=y(n,{frameborder:"0",scrolling:"no",id:r.chatbotIframeId,title:"Chatbot",allow:"geolocation *; autoplay *;",style:"background:transparent;width:100%;height:100%;border-radius:inherit;"});o.appendChild(s)}else(e=window.phChatbot)==null||e.makeFetchRequest((a=window.phChatbot)==null?void 0:a.configurationsDDO,{body:{currentUrlPath:window.location.href}}).then(n=>{if(!(n!=null&&n.data)||n.statusCode!==200){console.info("Configurations Not found");return}if(!n.data.isChannelEnabled){console.info("Chatbot is disabled!!");return}window.phChatbot.configurations=n;let s=n.data.chatbotInjectScript;H(s,o,n.data.chatbotLoadDelay),this.chatbotPosition.value=n.data.chatbotPosition||this.chatbotPosition.value,this.chatbotTheme.value=n.data.chatbotTheme||this.chatbotTheme.value});t.appendChild(o),document.body.appendChild(t),this.chatbotWrapperElement=document.getElementById(r.chatbotWrapperElementId)}createIframeVideoWrapper(t,o={},a={}){const e=document.createElement("div");e.setAttribute("class","phenom-chatbot-video-wrapper"),e.setAttribute("aria-live","assertive"),e.setAttribute("aria-label",a.title),e.onclick=()=>this.communicationService.removeElementAndRaiseChatbotInputFocusEvent(r.iframeVideoWrapperId);const n=document.createElement("button");n.setAttribute("class","close-icon"),n.onclick=()=>this.communicationService.removeElementAndRaiseChatbotInputFocusEvent(r.iframeVideoWrapperId),n.innerHTML="Ã—";for(const h in o)e.setAttribute(h,o[h]);const s=y(t,{frameborder:"0",scrolling:"no",id:"chatbotVideoIframe",title:"Chatbot",allow:"geolocation autoplay",type:"content",style:"background:none;width:98%;height:80%;border-radius:inherit;width: min(560px, 90%);height: 75%;",...a});e.appendChild(n),e.appendChild(s),document.body.appendChild(e),setTimeout(()=>{n.focus()},300),e.addEventListener("keydown",h=>{h.key==="Escape"&&this.communicationService.removeElementAndRaiseChatbotInputFocusEvent(r.iframeVideoWrapperId)})}setChatbotPosition(t){t&&(this.chatbotPosition.value=t)}}const d=new $(window.chatbotBaseUrl);function z(i,t){var o;(o=d.chatbotWrapperElement)==null||o.setAttribute("data-chatbotPosition",t)}function j(i,t){if(t!==i&&(J(),V(t),d!=null&&d.chatbotWrapperElement)){d.chatbotWrapperElement.setAttribute("data-chatbotState",t);const o=getComputedStyle(d.chatbotWrapperElement).borderRadius??"10px";d.communicationService.postDataToChatbot("BORDER_RADIUS",o)}}function G(i,t){var o;(o=d.chatbotWrapperElement)==null||o.setAttribute("data-theme",t)}function Z(i,t){var o;(o=d.chatbotWrapperElement)==null||o.setAttribute("data-chatbotWindowSize",t)}function X(i,t){d.chatbotWrapperElement&&(d.chatbotWrapperElement.style.setProperty("--chatbot-wrapper-width",`${t.width}`),d.chatbotWrapperElement.style.setProperty("--chatbot-wrapper-height",`${t.height}`))}const K={configurations:{data:{}},isContainerApproachEnabledForTXM:!0,configurationsDDO:"getChatbotConfigurations",phContext:window.phApp,currentJobInfo:(R=(D=(P=(O=window.phApp)==null?void 0:O.ddo)==null?void 0:P.jobDetail)==null?void 0:D.data)==null?void 0:R.job,makeFetchRequest:B,...window.requiredPhInfo,...window.phChatbot};window.phChatbot=K,d.invokeInitator()})();
//# sourceMappingURL=phenom-chatbot-trigger.js.map
